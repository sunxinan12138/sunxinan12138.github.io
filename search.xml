<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åˆ†å¸ƒå¼</title>
      <link href="/2020/10/02/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
      <url>/2020/10/02/%E5%88%86%E5%B8%83%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h1><h2 id="åˆ†å¸ƒå¼ç†è®º"><a href="#åˆ†å¸ƒå¼ç†è®º" class="headerlink" title="åˆ†å¸ƒå¼ç†è®º"></a>åˆ†å¸ƒå¼ç†è®º</h2><blockquote><p>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ</p><p>å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿ</p></blockquote><p>åœ¨ã€Šåˆ†å¸ƒå¼ç³»ç»ŸåŸç†ä¸èŒƒå‹ã€‹ä¸€ä¹¦ä¸­å®šä¹‰:<strong>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆ, è¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿ</strong></p><p>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡,  ä¸ºäº†å®Œæˆå…±åŒä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿ,  åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‡ºç°æ˜¯ä¸ºäº†ç”¨å»‰ä»·çš„, æ™®é€šçš„æœºå™¨å®Œæˆå•ä¸ªè®¡ç®—æœºæ— æ³•å®Œæˆçš„è®¡ç®—, å­˜å‚¨ä»»åŠ¡. å™¨ç›®çš„æ˜¯==åˆ©ç”¨æ›´å¤šçš„æœºå™¨, å¤„ç†æ›´å¤šçš„æ•°æ®==</p><blockquote><p>åˆ†å¸ƒå¼çš„æ¥å†</p></blockquote><ol><li>åˆšå¼€å§‹æ˜¯:  å•ä¸€åº”ç”¨æ¶æ„ORM</li><li>å‚ç›´åº”ç”¨æ¶æ„MVC</li><li>åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶<strong>(RPC)</strong></li></ol><p><img src="https://i.loli.net/2020/08/24/u8tkBrvRU2ps4Gy.png" alt="image.png"></p><ol><li>æµåŠ¨è®¡ç®—æ¶æ„  <strong>æé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ</strong>(SOA) </li></ol><h2 id="åˆ†å¸ƒå¼æ¶æ„"><a href="#åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="åˆ†å¸ƒå¼æ¶æ„"></a>åˆ†å¸ƒå¼æ¶æ„</h2><h3 id="ä»€ä¹ˆæ˜¯RPC"><a href="#ä»€ä¹ˆæ˜¯RPC" class="headerlink" title="ä»€ä¹ˆæ˜¯RPC"></a>ä»€ä¹ˆæ˜¯RPC</h3><p>RCP(Remote Procedure Call) è¿œç¨‹è°ƒç”¨è¿‡ç¨‹</p><p> è¿œç¨‹è°ƒç”¨è¿‡ç¨‹? ()è¿™ç©åº”å°±è·ŸæŠŠSocketç¿»è¯‘æˆå¥—æ¥å­—ä¸€æ · è¯´ä¸ªé”¤å­)  </p><p>é‚£æœ‰è¿œç¨‹è°ƒç”¨å°±æœ‰æœ¬åœ°è°ƒç”¨ â€“ æœ¬åœ°å°±æ˜¯åœ¨è‡ªå·±çš„æœåŠ¡é‡Œè¿›è¡Œäº¤äº’; é‚£å¾ˆæ˜¾ç„¶è¿œè°ƒå°±æ˜¯ è‡ªå·±çš„æœåŠ¡ä¸åˆ«çš„æœåŠ¡è¿›è¡Œäº¤äº’</p><p><img src="C:%5CUsers%5C25778%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200824230828180.png" alt="é€šä¿¡è¿‡ç¨‹"></p><p><img src="https://i.loli.net/2020/08/24/anKBl9hW1dHz8Ls.png" alt="image.png"></p><h4 id="ä¸¾ä¸ªæ —å­ğŸŒ°"><a href="#ä¸¾ä¸ªæ —å­ğŸŒ°" class="headerlink" title="ä¸¾ä¸ªæ —å­ğŸŒ°"></a>ä¸¾ä¸ªæ —å­ğŸŒ°</h4><ol><li>æ™®é€šæ¶æ„è®¡, åšä¸€ä¸ªåŠ æ³•è®¡ç®— ä¸»å‡½æ•°è°ƒç”¨ è®¡ç®—çš„addæ–¹æ³•</li><li>åˆ†å¸ƒå¼å‘¢å°±æ˜¯æŠŠè®¡ç®—çš„æœåŠ¡å•ç‹¬æ‹¿å‡ºæ¥äº† ä½†æ˜¯æ€ä¹ˆè·å–åˆ°è®¡ç®—æœåŠ¡çš„æ–¹æ³•å‘¢?</li></ol><p>å¯ä»¥åœ¨è®¡ç®—æœåŠ¡åŠ ä¸€ä¸ªæ¥å£? ä½†æ˜¯ä¸èƒ½æ¯ä¸€æ¬¡éƒ½å‘èµ·httpè¯·æ±‚å‘€</p><p>å¦‚ä½•è®©ä½¿ç”¨è€…æ„Ÿå—ä¸åˆ°è¿œç¨‹è°ƒç”¨å‘¢?</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Reference</span><span class="token keyword">private</span> è®¡ç®— name<span class="token punctuation">;</span></code></pre><p>ä½¿ç”¨<strong>ä»£ç†æ¨¡å¼</strong>å’ŒSpringçš„<strong>IOC</strong>ä¸€èµ·, æ³¨å…¥éœ€è¦çš„å¯¹è±¡</p><ul><li><strong>æ ¸å¿ƒæ¨¡å—</strong> é€šè®¯ å’Œ åºåˆ—åŒ–</li><li><strong>è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨é—®é¢˜ã€‚</strong></li><li><strong>è¿œç¨‹è°ƒç”¨æ—¶ï¼Œè¦èƒ½å¤Ÿåƒæœ¬åœ°è°ƒç”¨ä¸€æ ·æ–¹ä¾¿ï¼Œè®©è°ƒç”¨è€…æ„ŸçŸ¥ä¸åˆ°è¿œç¨‹è°ƒç”¨çš„é€»è¾‘ã€‚</strong></li></ul><h2 id="å››ç§IO"><a href="#å››ç§IO" class="headerlink" title="å››ç§IO"></a>å››ç§IO</h2><blockquote><p>netty æ˜¯åŸºäº NIO é‚£å…ˆç®€å•ä»‹ç»ä¸€ä¸‹IO</p></blockquote><h4 id="IOæ¨¡å‹"><a href="#IOæ¨¡å‹" class="headerlink" title="IOæ¨¡å‹"></a>IOæ¨¡å‹</h4><ol><li><p>I/Oæ¨¡å‹: ç®€å•ç†è§£å°±æ˜¯ç”¨ä»€ä¹ˆæ–¹å¼è¿›è¡Œæ•°æ®çš„å‘é€å’Œæ¥æ”¶, å†³å®šäº†é€šä¿¡çš„æ€§èƒ½</p></li><li><p>ä¸‰ç§IOæ¨¡å‹:</p></li></ol><h4 id="BIO-åŒæ­¥å¹¶é˜»å¡"><a href="#BIO-åŒæ­¥å¹¶é˜»å¡" class="headerlink" title="BIO(åŒæ­¥å¹¶é˜»å¡)"></a>BIO(åŒæ­¥å¹¶é˜»å¡)</h4><p>   ä¸€ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹, å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†, å¦‚æœè¿æ¥ä¸è¿›è¡Œæ“ä½œè¿˜ä¼šé€ æˆ<strong>ä¸å¿…è¦çš„å¼€é”€</strong></p><p><img src="https://i.loli.net/2020/08/25/Ttdh36PEOjWy2vC.png" alt="BIO"></p><ul><li>BIOä¾‹å­</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>ServerSocket<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>Socket<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ExecutorService<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>Executors<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">serverBIo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        Socket accept <span class="token operator">=</span> null<span class="token punctuation">;</span>        ExecutorService executorService <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ServerSocket socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"lianjie..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¾ªç¯é“¾æ¥</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            accept <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Socket finalAccept <span class="token operator">=</span> accept<span class="token punctuation">;</span>            executorService<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token function">handler</span><span class="token punctuation">(</span>finalAccept<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">returnMsg</span><span class="token punctuation">(</span>Socket finalAccept<span class="token punctuation">,</span> String s<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"return"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        OutputStream outputStream <span class="token operator">=</span> finalAccept<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        outputStream<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//  outputStream.close();</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handler</span><span class="token punctuation">(</span>Socket accept<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        InputStream stream <span class="token operator">=</span> null<span class="token punctuation">;</span>        String s <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            stream <span class="token operator">=</span> accept<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"in"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">int</span> i <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>                s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":::"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">returnMsg</span><span class="token punctuation">(</span>accept<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        MainDemo server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MainDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            server<span class="token punctuation">.</span><span class="token function">serverBIo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>ç¼ºç‚¹:</strong> </p><ul><li>éœ€è¦ç‹¬ç«‹çš„çº¿ç¨‹ å¹¶å‘å¤§æ—¶ ==éœ€è¦å¤§é‡çš„çº¿ç¨‹è¿›è¡Œå¤„ç†== å¹¶ä¸” å¦‚æœæ²¡æœ‰è¯»å†™æ“ä½œ çº¿ç¨‹ä¼šé˜»å¡åœ¨Readä¸Š é€ æˆèµ„æºæµªè´¹</li></ul><h4 id="NIO-åŒæ­¥éé˜»å¡"><a href="#NIO-åŒæ­¥éé˜»å¡" class="headerlink" title="NIO(åŒæ­¥éé˜»å¡)"></a>NIO(åŒæ­¥éé˜»å¡)</h4><p>   å’ŒBIOç›¸æ¯” å®ç°äº†ä¸€ä¸ª<strong>å¤šè·¯å¤ç”¨</strong>çš„åŠŸèƒ½ æœåŠ¡å™¨å¯ä»¥ç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¿æ¥, å¤šè·¯å¤ç”¨å™¨è¿›è¡Œè½®è¯¢å¦‚æœæœ‰IOè¯·æ±‚å°±å¤„ç†</p><p>   <img src="https://i.loli.net/2020/08/25/LQHDTZR8NGntb76.png" alt="NIO"></p><blockquote><p> ä¸‰å¤§æ ¸å¿ƒ: Selector Channel  Buffer</p></blockquote><p>å…·ä½“æ–¹å¼:</p><p><img src="C:%5CUsers%5C25778%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200825235215229.png" alt="image-20200825235215229"></p><p>NIOçš„é€šè®¯:</p><ul><li>å®¢æˆ·ç«¯</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>InetSocketAddress<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ByteBuffer<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span>SelectionKey<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span>Selector<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span>SocketChannel<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Iterator<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Scanner<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Set<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupChatClient</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> String HOST <span class="token operator">=</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æœåŠ¡å™¨åœ°å€</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> PORT <span class="token operator">=</span> <span class="token number">6667</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æœåŠ¡å™¨ç«¯å£</span>    <span class="token keyword">private</span> Selector selector<span class="token punctuation">;</span>    <span class="token keyword">private</span> SocketChannel socketChannel<span class="token punctuation">;</span>    <span class="token keyword">private</span> String userName<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">GroupChatClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°é€‰æ‹©å™¨</span>        selector <span class="token operator">=</span> Selector<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è¿æ¥è¿œç¨‹æœåŠ¡å™¨</span>        socketChannel <span class="token operator">=</span> SocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> PORT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¾ç½®éé˜»å¡</span>        socketChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ³¨å†Œé€‰æ‹©å™¨å¹¶è®¾ç½®ä¸º read</span>        socketChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> SelectionKey<span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¾—åˆ°å®¢æˆ·ç«¯ IP åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œä½œä¸ºèŠå¤©ç”¨æˆ·åä½¿ç”¨</span>        userName <span class="token operator">=</span> socketChannel<span class="token punctuation">.</span><span class="token function">getLocalAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userName <span class="token operator">+</span> <span class="token string">" is ok ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendInfo</span><span class="token punctuation">(</span>String info<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å¦‚æœæ§åˆ¶å°è¾“å…¥ exit å°±å…³é—­é€šé“ï¼Œç»“æŸèŠå¤©</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">"exit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>ByteBuffer<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            socketChannel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            socketChannel <span class="token operator">=</span> null<span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        info <span class="token operator">=</span> userName <span class="token operator">+</span> <span class="token string">" è¯´: "</span> <span class="token operator">+</span> info<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//å¾€é€šé“ä¸­å†™æ•°æ®</span>            socketChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>ByteBuffer<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//ä»æœåŠ¡å™¨ç«¯æ¥æ”¶æ•°æ®</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> readyChannels <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>readyChannels <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//æœ‰å¯ç”¨é€šé“</span>                Set selectedKeys <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                Iterator keyIterator <span class="token operator">=</span> selectedKeys<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>keyIterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    SelectionKey sk <span class="token operator">=</span> <span class="token punctuation">(</span>SelectionKey<span class="token punctuation">)</span> keyIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>sk<span class="token punctuation">.</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">//å¾—åˆ°å…³è”çš„é€šé“</span>                        SocketChannel sc <span class="token operator">=</span> <span class="token punctuation">(</span>SocketChannel<span class="token punctuation">)</span> sk<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//å¾—åˆ°ä¸€ä¸ªç¼“å†²åŒº</span>                        ByteBuffer buff <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//è¯»å–æ•°æ®å¹¶å­˜å‚¨åˆ°ç¼“å†²åŒº</span>                        sc<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//æŠŠç¼“å†²åŒºæ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²</span>                        String msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buff<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    keyIterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//åˆ é™¤å½“å‰ SelectionKeyï¼Œé˜²æ­¢é‡å¤å¤„ç†</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//ä¼šæ£€æµ‹åˆ°æ²¡æœ‰å¯ç”¨çš„channel ï¼Œå¯ä»¥é€€å‡º</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰å¯ç”¨channel ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception  <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//åˆ›å»ºä¸€ä¸ªèŠå¤©å®¢æˆ·ç«¯å¯¹è±¡</span>        GroupChatClient chatClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupChatClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹ä¸æ–­çš„æ¥æ”¶æœåŠ¡å™¨ç«¯å¹¿æ’­çš„æ•°æ®</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    chatClient<span class="token punctuation">.</span><span class="token function">readInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//é—´éš” 3 ç§’</span>                        Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Scanner scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åœ¨æ§åˆ¶å°è¾“å…¥æ•°æ®å¹¶å‘é€åˆ°æœåŠ¡å™¨ç«¯</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            String msg <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            chatClient<span class="token punctuation">.</span><span class="token function">sendInfo</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li>æœåŠ¡ç«¯</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>InetSocketAddress<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ByteBuffer<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>SimpleDateFormat<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Iterator<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupChatServer</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Selector selector<span class="token punctuation">;</span>    <span class="token keyword">private</span> ServerSocketChannel listenerChannel<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> PORT <span class="token operator">=</span> <span class="token number">6667</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æœåŠ¡å™¨ç«¯å£</span>    <span class="token keyword">public</span> <span class="token function">GroupChatServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å¾—åˆ°é€‰æ‹©å™¨</span>            selector <span class="token operator">=</span> Selector<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æ‰“å¼€ç›‘å¬é€šé“</span>            listenerChannel <span class="token operator">=</span> ServerSocketChannel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// ç»‘å®šç«¯å£</span>            listenerChannel<span class="token punctuation">.</span><span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span>PORT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼</span>            listenerChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// å°†é€‰æ‹©å™¨ç»‘å®šåˆ°ç›‘å¬é€šé“å¹¶ç›‘å¬ accept äº‹ä»¶</span>            listenerChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> SelectionKey<span class="token punctuation">.</span>OP_ACCEPT<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨ ok......."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//ä¸åœè½®è¯¢</span>                <span class="token keyword">int</span> count <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è·å–å°±ç»ª channel</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    Iterator<span class="token operator">&lt;</span>SelectionKey<span class="token operator">></span> iterator <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        SelectionKey key <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">// ç›‘å¬åˆ° accept</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                            SocketChannel sc <span class="token operator">=</span> listenerChannel<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//éé˜»å¡æ¨¡å¼</span>                            sc<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Šå¹¶ç›‘å¬ read</span>                            sc<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> SelectionKey<span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//System.out.println(sc.getRemoteAddress().toString().substring(1) + "online ...");</span>                            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span><span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ä¸Šçº¿ ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//å°†æ­¤å¯¹åº”çš„ channel è®¾ç½®ä¸º accept,æ¥ç€å‡†å¤‡æ¥å—å…¶ä»–å®¢æˆ·ç«¯è¯·æ±‚</span>                            key<span class="token punctuation">.</span><span class="token function">interestOps</span><span class="token punctuation">(</span>SelectionKey<span class="token punctuation">.</span>OP_ACCEPT<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        <span class="token comment" spellcheck="true">//ç›‘å¬åˆ° read</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token function">readData</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è¯»å–å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®</span>                        <span class="token punctuation">}</span>                        <span class="token comment" spellcheck="true">//ä¸€å®šè¦æŠŠå½“å‰ key åˆ æ‰ï¼Œé˜²æ­¢é‡å¤å¤„ç†</span>                        iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"waitting ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">readData</span><span class="token punctuation">(</span>SelectionKey key<span class="token punctuation">)</span> <span class="token punctuation">{</span>        SocketChannel channel <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å¾—åˆ°å…³è”çš„é€šé“</span>            channel <span class="token operator">=</span> <span class="token punctuation">(</span>SocketChannel<span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//è®¾ç½® buffer ç¼“å†²åŒº</span>            ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//ä»é€šé“ä¸­è¯»å–æ•°æ®å¹¶å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­</span>            <span class="token keyword">int</span> count <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//å¦‚æœè¯»å–åˆ°äº†æ•°æ®</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//æŠŠç¼“å†²åŒºæ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>                String msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printInfo</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//å°†å…³è”çš„ channel è®¾ç½®ä¸º readï¼Œç»§ç»­å‡†å¤‡æ¥å—æ•°æ®</span>                key<span class="token punctuation">.</span><span class="token function">interestOps</span><span class="token punctuation">(</span>SelectionKey<span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">sendInfoToOtherClients</span><span class="token punctuation">(</span>channel<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­æ•°æ®</span>            <span class="token punctuation">}</span>            buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//å½“å®¢æˆ·ç«¯å…³é—­ channel æ—¶ï¼Œè¿›è¡Œå¼‚å¸¸å¦‚ç†</span>                <span class="token comment" spellcheck="true">//printInfo(channel.getRemoteAddress().toString().substring(1) + "offline...");</span>                <span class="token function">printInfo</span><span class="token punctuation">(</span>channel<span class="token punctuation">.</span><span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ç¦»çº¿äº† ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                key<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å–æ¶ˆæ³¨å†Œ</span>                channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…³é—­é€šé“</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e1<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendInfoToOtherClients</span><span class="token punctuation">(</span>SocketChannel except<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨è¿›è¡Œæ¶ˆæ¯è½¬å‘ ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è½¬å‘æ•°æ®åˆ°æ‰€æœ‰çš„ SocketChannel ä¸­</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>SelectionKey key <span class="token operator">:</span> selector<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            Channel targetchannel <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//æ’é™¤è‡ªèº«</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>targetchannel <span class="token keyword">instanceof</span> <span class="token class-name">SocketChannel</span> <span class="token operator">&amp;&amp;</span> targetchannel <span class="token operator">!=</span> except<span class="token punctuation">)</span> <span class="token punctuation">{</span>                SocketChannel dest <span class="token operator">=</span> <span class="token punctuation">(</span>SocketChannel<span class="token punctuation">)</span> targetchannel<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//æŠŠæ•°æ®å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­</span>                ByteBuffer buffer <span class="token operator">=</span> ByteBuffer<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//å¾€é€šé“ä¸­å†™æ•°æ®</span>                dest<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">printInfo</span><span class="token punctuation">(</span>String str<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//æ˜¾ç¤ºæ¶ˆæ¯</span>        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨æ¥æ”¶åˆ°æ¶ˆæ¯ æ—¶é—´: ["</span> <span class="token operator">+</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"] -> "</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        GroupChatServer server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupChatServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li><a href="#">ç»†èŠ‚çš„NIOåœ¨è¿™</a></li></ul><h4 id="AIO-å¼‚æ­¥éé˜»å¡-ä¸€èˆ¬ç”¨äºé•¿ç¨³å®šçš„è¿æ¥"><a href="#AIO-å¼‚æ­¥éé˜»å¡-ä¸€èˆ¬ç”¨äºé•¿ç¨³å®šçš„è¿æ¥" class="headerlink" title="AIO(å¼‚æ­¥éé˜»å¡)ä¸€èˆ¬ç”¨äºé•¿ç¨³å®šçš„è¿æ¥"></a>AIO(å¼‚æ­¥éé˜»å¡)ä¸€èˆ¬ç”¨äºé•¿ç¨³å®šçš„è¿æ¥</h4><h2 id="Netty"><a href="#Netty" class="headerlink" title="Netty"></a>Netty</h2><p>Nettyæ˜¯ä¸€ä¸ªç”±JBossæä¾›çš„javaå¼€æºæ¡†æ¶, </p><p>Nettyæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„,  åŸºäºäº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨æ¡†æ¶,  ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½, é«˜å¯ç”¨çš„ç½‘ç»œIOç¨‹åº.</p><p>Nettyä¸»è¦é’ˆå¯¹åœ¨TCPåè®®ä¸‹, é¢å‘clientç«¯çš„é«˜å¹¶å‘åº”ç”¨, æˆ–è€…Peer-to-Peeråœºæ™¯ä¸‹çš„å¤§é‡æ•°æ®æŒç»­ä¼ è¾“åº”ç”¨. </p><p>Netty ä¸»è¦åŸºäºNIO</p><h3 id="Reactoræ¨¡å¼"><a href="#Reactoræ¨¡å¼" class="headerlink" title="Reactoræ¨¡å¼"></a>Reactoræ¨¡å¼</h3><blockquote><p> å…ˆçœ‹ä¸€æ¬¡å•Šä¼ ç»Ÿçš„æ¨¡å‹:</p></blockquote><p><img src="https://i.loli.net/2020/09/10/8nVLgUWyYIswPbD.png" alt="image.png"></p><p><strong>é—®é¢˜åˆ†æ</strong></p><ol><li><p>å½“å¹¶å‘æ•°å¾ˆå¤§ï¼Œå°±ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œå ç”¨å¾ˆå¤§ç³»ç»Ÿèµ„æº</p></li><li><p>è¿æ¥åˆ›å»ºåï¼Œå¦‚æœå½“å‰çº¿ç¨‹æš‚æ—¶æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œè¯¥çº¿ç¨‹ä¼šé˜»å¡åœ¨read æ“ä½œï¼Œé€ æˆçº¿ç¨‹èµ„æºæµªè´¹</p></li></ol><blockquote><p> Reactoræ¨¡å¼(IOå¤ç”¨)</p></blockquote><p><img src="https://i.loli.net/2020/09/10/yTOxXHjq3LoAdCP.png" alt="image.png"></p><ol><li>Reactor æ¨¡å¼ï¼Œé€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥åŒæ—¶ä¼ é€’ç»™<strong>æœåŠ¡å¤„ç†å™¨</strong>çš„æ¨¡å¼(åŸºäºäº‹ä»¶é©±åŠ¨)</li><li>æœåŠ¡å™¨ç«¯ç¨‹åºå¤„ç†ä¼ å…¥çš„å¤šä¸ªè¯·æ±‚,å¹¶å°†å®ƒä»¬åŒæ­¥åˆ†æ´¾åˆ°ç›¸åº”çš„å¤„ç†çº¿ç¨‹ï¼Œ å› æ­¤Reactoræ¨¡å¼ä¹Ÿå« Dispatcheræ¨¡å¼</li><li>Reactor æ¨¡å¼ä½¿ç”¨IOå¤ç”¨ç›‘å¬äº‹ä»¶, æ”¶åˆ°äº‹ä»¶åï¼Œåˆ†å‘ç»™æŸä¸ªçº¿ç¨‹(è¿›ç¨‹), è¿™ç‚¹å°±æ˜¯ç½‘ç»œæœåŠ¡å™¨é«˜å¹¶å‘å¤„ç†å…³é”®</li></ol><h2 id="dubbo"><a href="#dubbo" class="headerlink" title="dubbo"></a>dubbo</h2><p><img src="http://dubbo.apache.org/docs/zh-cn/user/sources/images/dubbo-architecture-roadmap.jpg" alt="dubboæµç¨‹"></p><h2 id="åŸºäºnettyæ¡†æ¶çš„é€šä¿¡"><a href="#åŸºäºnettyæ¡†æ¶çš„é€šä¿¡" class="headerlink" title="åŸºäºnettyæ¡†æ¶çš„é€šä¿¡"></a>åŸºäºnettyæ¡†æ¶çš„é€šä¿¡</h2><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/2accc2840a1b" target="_blank" rel="noopener">å¦‚ä½•ç»™è€å©†è§£é‡Šä»€ä¹ˆæ˜¯RPC</a></p><p><a href="https://www.cnblogs.com/haimishasha/p/10756448.html#autoid-0-0-0" target="_blank" rel="noopener">NIOé€šä¿¡æ¨¡å‹æ¡ˆä¾‹</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å‚æ¨¡å¼</title>
      <link href="/2020/08/17/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/08/17/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> ç±»åˆ« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2020/08/17/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/08/17/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h1><h2 id="è§‚å¯Ÿè€…ä¾‹å­"><a href="#è§‚å¯Ÿè€…ä¾‹å­" class="headerlink" title="è§‚å¯Ÿè€…ä¾‹å­"></a>è§‚å¯Ÿè€…ä¾‹å­</h2><p>ä¸€ä¸ªæ°”è±¡å° æƒ³è¦<strong>å‡ ä¸ªæ˜¾ç¤ºå™¨</strong> , æ•°æ®ä»<strong>weatherå¯¹è±¡</strong>ä¸­è·å– å¦‚æœ weather æ•°æ®æ›´æ–° æ˜¾ç¤ºå™¨è¦æ›´æ–°å¯¹åº”æ•°æ®</p><blockquote><p>æ˜¾ç¤ºå™¨å°±æ˜¯è§‚å¯Ÿè€… è€Œæ°”è±¡å°çš„æ•°æ®weather å°±æ˜¯é€šçŸ¥è€…(<strong>ä¸»é¢˜å¯¹è±¡</strong>)</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * @author SunJusong * è§‚å¯Ÿè€…éƒ¨åˆ† * @date 2020å¹´ 08æœˆ27æ—¥ 23:17:48 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Obs</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span><span class="token punctuation">,</span> DisPlay <span class="token punctuation">{</span>    <span class="token keyword">float</span> temp<span class="token punctuation">;</span>    <span class="token keyword">float</span> humidity<span class="token punctuation">;</span>    <span class="token keyword">float</span> pressur<span class="token punctuation">;</span>    <span class="token keyword">private</span> Subject weather<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Obs</span><span class="token punctuation">(</span>Subject sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>weather <span class="token operator">=</span> sub<span class="token punctuation">;</span>        sub<span class="token punctuation">.</span><span class="token function">RegistObserver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å®ç°update æ–¹æ³•æ¥æ˜¾ç¤º</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">float</span> temp<span class="token punctuation">,</span> <span class="token keyword">float</span> humidity<span class="token punctuation">,</span> <span class="token keyword">float</span> pressure<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>temp <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>humidity <span class="token operator">=</span> humidity<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pressur <span class="token operator">=</span> pressure<span class="token punctuation">;</span>        <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> <span class="token string">"=="</span> <span class="token operator">+</span> humidity <span class="token operator">+</span> <span class="token string">"=="</span> <span class="token operator">+</span> pressur<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è§‚å¯Ÿè€…æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">float</span> temp<span class="token punctuation">,</span> <span class="token keyword">float</span> humidity<span class="token punctuation">,</span> <span class="token keyword">float</span> pressure<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ˜¾ç¤ºåŠŸèƒ½æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">DisPlay</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MainDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºä¸»ä½“å¯¹è±¡</span>        Weather weather <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Weather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»ºè§‚å¯Ÿè€… å½“ç„¶ ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªä¸åŒçš„ç±»</span>        Obs obs1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obs</span><span class="token punctuation">(</span>weather<span class="token punctuation">)</span><span class="token punctuation">;</span>        Obs obs2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obs</span><span class="token punctuation">(</span>weather<span class="token punctuation">)</span><span class="token punctuation">;</span>        Obs obs3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obs</span><span class="token punctuation">(</span>weather<span class="token punctuation">)</span><span class="token punctuation">;</span>        weather<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        weather<span class="token punctuation">.</span><span class="token function">RemoveObserver</span><span class="token punctuation">(</span>obs2<span class="token punctuation">)</span><span class="token punctuation">;</span>        weather<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author SunJusong * ä¸»ä½“å¯¹è±¡éƒ¨åˆ† * @date 2020å¹´ 08æœˆ27æ—¥ 23:14:29 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Observer<span class="token operator">></span> observers<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">float</span> temp<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">float</span> humidity<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">float</span> pressur<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Weather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">RegistObserver</span><span class="token punctuation">(</span>Observer o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        observers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">RemoveObserver</span><span class="token punctuation">(</span>Observer o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> observers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>        observers<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Observer observer <span class="token operator">:</span> observers<span class="token punctuation">)</span> <span class="token punctuation">{</span>            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> humidity<span class="token punctuation">,</span> pressur<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/* jdkè‡ªå¸¦     è§‚å¯Ÿè€…è¦ç»§æ‰¿Observable è§‚å¯Ÿè€…å®ç° Observer     public void change() {         // å°è£äº†é€šçŸ¥å’Œchangedæ–¹æ³•         setChanged();         notifyObservers();     }     public float getTemp() {         return temp;     }     public float getHumidity() {         return humidity;     }     public float getPressur() {         return pressur;     } */</span>    <span class="token comment" spellcheck="true">// ä¼ å…¥æ›´æ–°çš„æ•°å€¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token keyword">float</span> temp<span class="token punctuation">,</span> <span class="token keyword">float</span> humidity<span class="token punctuation">,</span> <span class="token keyword">float</span> pressure<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>temp <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>humidity <span class="token operator">=</span> humidity<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pressur <span class="token operator">=</span> pressure<span class="token punctuation">;</span>        <span class="token function">notifyObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä¸»ä½“å¯¹è±¡æ¥å£</span><span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ³¨å†Œè§‚å¯Ÿè€…</span>    <span class="token keyword">void</span> <span class="token function">RegistObserver</span><span class="token punctuation">(</span>Observer o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç§»é™¤è§‚å¯Ÿè€…</span>    <span class="token keyword">void</span> <span class="token function">RemoveObserver</span><span class="token punctuation">(</span>Observer o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æ›´æ–°ä¿¡æ¯</span>    <span class="token keyword">void</span> <span class="token function">notifyObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><img src="https://i.loli.net/2020/08/18/GRxYKhX5bvAluLs.png" alt="image.png"></p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼-1"><a href="#è§‚å¯Ÿè€…æ¨¡å¼-1" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><blockquote><p>å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³», è®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸ª<strong>ä¸»é¢˜å¯¹è±¡</strong>. è¿™ä¸ªä¸»ä½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ä¼šé€šçŸ¥æ‰€æœ‰çš„<strong>è§‚å¯Ÿè€…</strong>, ä½¿å¾—ä»–ä»¬è‡ªå·±å¯ä»¥æ›´æ–°è‡ªå·± </p></blockquote><p><img src="https://i.loli.net/2020/08/18/LPSEpFO87CcHmkB.png" alt="image.png"></p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹"><a href="#è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹"></a>è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹ç‚¹</h2><h2 id="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³"><a href="#è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³"></a>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸è¶³</h2>]]></content>
      
      
      <categories>
          
          <category> ç±»åˆ« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€å‘æ’ä»¶</title>
      <link href="/2020/07/26/%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6/"/>
      <url>/2020/07/26/%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å‘æ’ä»¶"><a href="#å¼€å‘æ’ä»¶" class="headerlink" title="å¼€å‘æ’ä»¶"></a>å¼€å‘æ’ä»¶</h1><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><h3 id="1-Mavenæ˜¯å•¥"><a href="#1-Mavenæ˜¯å•¥" class="headerlink" title="1.Mavenæ˜¯å•¥"></a>1.Mavenæ˜¯å•¥</h3><p>å½“æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°è¿™ç©åº”,è§‰å¾—å¾ˆé«˜å¤§ä¸Š. è¯´ç™½äº† å°±æ˜¯ä¸ª<strong>è‡ªåŠ¨å¯¼å…¥jaråŒ…çš„</strong></p><ul><li><p>Mavenè¿˜æ˜¯å¾ˆå¼ºå¤§çš„:</p><ul><li>é¡¹ç›®ç»§æ‰¿(åœ¨å¤šä¸ªæ¨¡å—çš„é¡¹ç›®ä¸­å¾ˆå¥½ç”¨çš„)</li><li>è§£å†³jarå†²çª</li><li>è‡ªåŠ¨å¯¼å…¥jar(ä»æœ¬åœ°åº“å¯»æ‰¾å¦‚æœæ²¡æœ‰â€“ä¼šè‡ªåŠ¨å»ä¸­å¤®ä»“åº“ä¸‹è½½)<ul><li><a href="https://mvnrepository.com/" target="_blank" rel="noopener">ä¾èµ–é…ç½®åœ°å€</a></li></ul></li></ul></li><li><p>ç”Ÿå‘½å‘¨æœŸ</p><p><img src="https://www.runoob.com/wp-content/uploads/2018/09/7642256-c967b2c1faeba9ce.png" alt="Mavenç”Ÿå‘½å‘¨æœŸ"></p></li></ul><h3 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h3><p><a href="https://blog.csdn.net/daffordil/article/details/89419252" target="_blank" rel="noopener">å®‰è£…çœ‹è¿™ä¸ª</a> æŠŠé•œåƒå’Œæœ¬åœ°åº“åœ°å€é…ç½®äº†å°±å¥½</p><h3 id="3-è‡ªåŠ¨é…ç½®"><a href="#3-è‡ªåŠ¨é…ç½®" class="headerlink" title="3. è‡ªåŠ¨é…ç½®"></a>3. è‡ªåŠ¨é…ç½®</h3><ul><li>å¸¸ç”¨çš„ä¸‰ä¸­æ¨¡å¼</li></ul><pre class=" language-java"><code class="language-java"><span class="token number">1</span>ã€cocoon<span class="token operator">-</span><span class="token number">22</span><span class="token operator">-</span>archetype<span class="token operator">-</span>webapp   <span class="token operator">--</span> <span class="token number">2</span>ã€maven<span class="token operator">-</span>archetype<span class="token operator">-</span>quickstart   <span class="token operator">--</span> <span class="token number">7</span><span class="token number">3</span>ã€maven<span class="token operator">-</span>archetype<span class="token operator">-</span>webapp       <span class="token operator">--</span> <span class="token number">10</span></code></pre><blockquote><p><a href="https://blog.csdn.net/sirdean/article/details/81636658" target="_blank" rel="noopener">å…¶ä»–çš„å¯ä»¥çœ‹è¿™é‡Œ</a></p></blockquote><pre class=" language-java"><code class="language-java"><span class="token string">'groupId'</span><span class="token operator">:</span> å…¬å¸å<span class="token string">'artifactId'</span><span class="token operator">:</span> é¡¹ç›®åå­—<span class="token string">'version'</span><span class="token operator">:</span> ç‰ˆæœ¬ <span class="token punctuation">(</span>é»˜è®¤æ˜¯ <span class="token number">1.0</span><span class="token operator">-</span>SNAPSHOT<span class="token punctuation">)</span><span class="token string">'package'</span><span class="token operator">:</span> com<span class="token punctuation">.</span>sjs<span class="token operator">:</span>åŒ…å</code></pre><p>Mavené€šè¿‡â€™groupIdâ€™, â€˜artifactIdâ€™, â€˜versionâ€™æ¥å®šä½ é¡¹ç›®/ç±»åº“ åæ ‡</p><h3 id="4-cmdé…ç½®-å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ"><a href="#4-cmdé…ç½®-å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ" class="headerlink" title="4. cmdé…ç½®(å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ)"></a>4. cmdé…ç½®(å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ)</h3><p>åˆ›å»º:</p><pre class=" language-java"><code class="language-java">mvn archetype<span class="token operator">:</span>generateæŒ‡ä»¤ç›´æ¥åˆ›å»ºé¡¹ç›®    mvn archetype<span class="token operator">:</span>generate <span class="token operator">-</span>DgroupId<span class="token operator">=</span>å…¬å¸å <span class="token operator">-</span>DartifactId<span class="token operator">=</span>å·¥ç¨‹å <span class="token operator">-</span>Dviersion<span class="token operator">=</span><span class="token number">1.0</span><span class="token operator">-</span>SNAPSHOT <span class="token operator">-</span>Dpackage<span class="token operator">=</span>åŒ…å</code></pre><p>å¸¸ç”¨å‘½ä»¤</p><pre class=" language-java"><code class="language-java">maven <span class="token operator">-</span>vmvn test<span class="token operator">:</span> æµ‹è¯• <span class="token punctuation">(</span>ä¼šæœ‰æµ‹è¯•æŠ¥å‘Šæ—¥æ­¢<span class="token punctuation">)</span>mvn clean<span class="token operator">:</span> cleanmvn <span class="token keyword">package</span><span class="token operator">:</span> å°†å½“å‰è¿™ä¸ªé¡¹ç›®æ‰“åŒ…æˆjarï¼Œæˆ–è€…æ˜¯warï¼Œpommvn install<span class="token operator">:</span> é¦–å…ˆå°†pom<span class="token punctuation">.</span>xmlä¸­éœ€è¦çš„jaråŒ…å®‰è£…åˆ°æœ¬åœ°ä»“åº“ä¸Šï¼Œå¹¶ä¸”ï¼Œå°†è‡ªå·±æ‰“åŒ…ç„¶åå®‰è£…åˆ°æœ¬åœ°ä»“åº“ä¸Šã€‚mvn compile<span class="token operator">:</span> ç¼–è¯‘æºä»£ç </code></pre><ul><li><strong>scope(å®šä¹‰ä¾èµ–çš„èŒƒå›´)çš„6ä¸­å±æ€§å€¼ï¼š</strong></li></ul><pre class=" language-java"><code class="language-java">compileï¼šé»˜è®¤çš„èŒƒå›´ï¼Œç¼–è¯‘æµ‹è¯•è¿è¡Œéƒ½æœ‰æ•ˆprovidedï¼šç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆruntimeï¼šæµ‹è¯•å’Œè¿è¡Œæ—¶æœ‰æ•ˆtestï¼šåªåœ¨æµ‹è¯•æ—¶æœ‰æ•ˆsystemï¼šåœ¨ç¼–è¯‘å’Œæµ‹è¯•æ—¶æœ‰æ•ˆï¼Œç§»æ¤æ€§ä½ï¼Œä¸æœ¬æœºç³»ç»Ÿç›¸å…³è”<span class="token keyword">import</span>ï¼šå¯¼å…¥èŒƒå›´ï¼Œå¥¹åªä½¿ç”¨åœ¨dependencyManagementä¸­ï¼Œè¡¨ç¤ºä»å…¶ä»–çš„pomä¸­å¯¼å…¥dependencyçš„é…ç½®</code></pre>]]></content>
      
      
      <categories>
          
          <category> TOOL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql</title>
      <link href="/2020/07/07/Mysql/"/>
      <url>/2020/07/07/Mysql/</url>
      
        <content type="html"><![CDATA[<h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><h2 id="Mysqlä»‹ç»"><a href="#Mysqlä»‹ç»" class="headerlink" title="Mysqlä»‹ç»"></a>Mysqlä»‹ç»</h2><ul><li>javaä¼ä¸šçº§å¼€å‘ç¦»ä¸å¼€æ•°æ®åº“</li><li><strong>æ•°æ®æ˜¯æ‰€æœ‰è½¯ä»¶ä½“ç³»ä¸­æ ¸å¿ƒå­˜åœ¨</strong>   (DBAèŒä½)</li></ul><p>ç‹‚ç¥è¯´çš„:</p><blockquote><p>åªä¼šå†™ä»£ç ,å­¦å¥½æ•°æ®åº“,æ··é¥­åƒ</p><p>æ“ä½œç³»ç»Ÿ,æ•°æ®ç»“æ„ ! ä¸é”™çš„ç¨‹åºçŒ¿</p><p>ç¦»æ•£æ•°å­¦,æ•°å­—ç”µè·¯, ä½“ç³»ç»“æ„, ç¼–è¯‘åŸç† + ç»éªŒ å¤§ä½¬</p></blockquote><h3 id="1-æ•°æ®åº“-DB-DataBase"><a href="#1-æ•°æ®åº“-DB-DataBase" class="headerlink" title="1. æ•°æ®åº“(DB, DataBase)"></a>1. æ•°æ®åº“(DB, DataBase)</h3><p>æ•°æ®çš„ä»“åº“</p><p>SQL: å¯ä»¥å­˜å‚¨å¤§é‡æ•°æ® 500ä¸‡ä»¥ä¸‹éƒ½æ²¡é—®é¢˜</p><h4 id="æ•°æ®åº“åˆ†ç±»-SQL-NOSQL"><a href="#æ•°æ®åº“åˆ†ç±»-SQL-NOSQL" class="headerlink" title="æ•°æ®åº“åˆ†ç±»(SQL/NOSQL)"></a>æ•°æ®åº“åˆ†ç±»(SQL/NOSQL)</h4><ul><li>å…³ç³»å‹æ•°æ®åº“(SQL)<ul><li>Mysql,  Oracle,  Sql Server,  DB2, SQLlite</li><li>é€šè¿‡è¡¨å’Œè¡¨ä¹‹é—´, è¡Œå’Œåˆ—ä¹‹é—´çš„å…³ç³»è¿›è¡Œæ•°æ®å­˜å‚¨.  </li></ul></li><li>è²å…³ç³»å‹æ•°æ®åº“(NOSQL) <ul><li>Redis,  MongDB</li><li>å­˜å‚¨å¯¹è±¡,é€šè¿‡å¯¹è±¡çš„è‡ªèº«å±æ€§.  è€Œä¸”ä½¿ç”¨key-valueçš„å…³ç³»å­˜å‚¨çš„</li></ul></li></ul><p>==DBSM(æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)==</p><ul><li>æ•°æ®åº“çš„ç®¡ç†è½¯ä»¶, ç®¡ç†å’Œç»´æŠ¤æˆ‘ä»¬çš„æ•°æ®</li><li>MySql å°±æ˜¯DBMS</li></ul><h3 id="Mysqlæ“ä½œè¯­å¥"><a href="#Mysqlæ“ä½œè¯­å¥" class="headerlink" title="Mysqlæ“ä½œè¯­å¥"></a>Mysqlæ“ä½œè¯­å¥</h3><table><thead><tr><th>æ“ä½œè¯­å¥</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>mysqld - install</td><td>å®‰è£…æ•°æ®åº“(åœ¨binç›®å½•ä¸‹)</td></tr><tr><td>mysqld â€“initialize-insecure â€“user=mysql</td><td>åˆå§‹åŒ–æ•°æ®æ–‡ä»¶</td></tr><tr><td>flush privileges;</td><td>åˆ·æ–°æƒé™</td></tr><tr><td>net start mysql</td><td>å¯åŠ¨MysqlæœåŠ¡</td></tr><tr><td>net stop mysql</td><td>ç»“æŸMysqlæœåŠ¡</td></tr><tr><td>exit</td><td>é€€å‡ºMysql</td></tr></tbody></table><h2 id="æ•°æ®åº“æ“ä½œè¯­å¥"><a href="#æ•°æ®åº“æ“ä½œè¯­å¥" class="headerlink" title="æ•°æ®åº“æ“ä½œè¯­å¥"></a>æ•°æ®åº“æ“ä½œè¯­å¥</h2><blockquote><p>ä¹¦å†™é¡ºåº</p><p>select â€“ from  â€“ where  â€“ group by  â€“ order by</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- æŸ¥çœ‹æœ‰ä»€ä¹ˆæ•°æ®åº“</span><span class="token keyword">show</span> <span class="token keyword">database</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- åˆ›å»ºåº“</span>creat <span class="token keyword">database</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- ä½¿ç”¨åº“</span><span class="token keyword">user</span> åº“å<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- å±•ç¤ºè¡¨</span><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- æ˜¾ç¤ºç»“æ„</span><span class="token keyword">describe</span> è¡¨å<span class="token punctuation">;</span><span class="token keyword">desc</span> è¡¨å<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- åˆ›å»ºè¡¨</span><span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨å<span class="token punctuation">(</span>åˆ—å ç±»å‹<span class="token punctuation">(</span>é•¿åº¦<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- æ›´æ–°</span><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">add</span>  <span class="token keyword">column</span>  åˆ—å ç±»å‹<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">add</span>  åˆ—å ç±»å‹<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--------------------------------------------------</span><span class="token comment" spellcheck="true">--æŸ¥çœ‹æ•°æ®åº“å»ºåº“è¯­å¥</span><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> åº“<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- æŸ¥çœ‹è¡¨çš„å®šä¹‰è¯­å¥</span><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- å±•ç¤ºè¡¨ç»“æ„</span><span class="token keyword">desc</span> è¡¨<span class="token punctuation">;</span></code></pre><h2 id="æ•°æ®åº“èšåˆå‡½æ•°"><a href="#æ•°æ®åº“èšåˆå‡½æ•°" class="headerlink" title="æ•°æ®åº“èšåˆå‡½æ•°"></a>æ•°æ®åº“èšåˆå‡½æ•°</h2><blockquote><p>èšåˆå‡½æ•°: ä»–ä»¬åªè¿è¡Œéç©ºå€¼,å¦‚æœæœ‰ç©ºå€¼å°†ä¸ä¼šè®¡ç®—åœ¨å†…</p><p>è€Œä¸”é»˜è®¤é‡å¤å€¼ä¼šè¢«å–åˆ°</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- åŸºæœ¬è®¡ç®—</span><span class="token function">MAX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">MIN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">AVG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">count</span><span class="token punctuation">(</span>å‚æ•°<span class="token punctuation">)</span> ä¸€å…±å¤šå°‘è¡Œå¦‚æœæ˜¯<span class="token operator">*</span> é‚£å°±æ˜¯æ€»æ•°<span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> å‚æ•°<span class="token punctuation">)</span>  é™¤å»é‡å¤<span class="token comment" spellcheck="true">-- å»é‡</span><span class="token keyword">DISTINCT</span> åå­—<span class="token comment" spellcheck="true">--æ—¥æœŸ</span>    <span class="token comment" spellcheck="true">-- æ ¼å¼åŒ–æ—¥æœŸ</span>    <span class="token keyword">data</span> _format<span class="token punctuation">(</span>è·å–çš„æ—¥æœŸ<span class="token punctuation">,</span><span class="token string">'%Y%m%d'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">-- å½“å‰æ—¶é—´</span>    CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">-- æ­£åˆ™è¡¨è¾¾å¼ </span><span class="token operator">regexp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">-- æ¨¡ç³ŠæŸ¥è¯¢ä¸ç”¨%</span>    <span class="token comment" spellcheck="true">-- ^a è¡¨ç¤ºä»¥aå¼€å§‹</span>    <span class="token comment" spellcheck="true">-- a$ ä»¥aç»“å°¾</span>    <span class="token comment" spellcheck="true">-- |  é€»è¾‘ä¸</span>    <span class="token comment" spellcheck="true">-- [abc] åŒ…æ‹¬å…¶ä¸­ä»»ä¸€ä¸ª</span>    <span class="token comment" spellcheck="true">-- [a-b] - è¡¨ç¤ºaåˆ°bçš„ä»»ä¸€ä¸ª</span>LAST_INSERT_ID<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">-- æœ€åä¸€ä¸ªINSERTæˆ– UPDATE è‡ªå¢é•¿(AUTO_INCREMENT)åˆ—çš„ID</span><span class="token comment" spellcheck="true">-- åˆ†ç»„</span><span class="token keyword">group</span> <span class="token keyword">by</span> åˆ—<span class="token number">1</span><span class="token punctuation">,</span>åˆ—<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">-- åœ¨èšåˆå‡½æ•°(åˆ†ç»„)åä½¿ç”¨ çš„æ¡ä»¶ç­›é€‰</span><span class="token keyword">having</span>æ¡ä»¶ <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">and</span> æ¡ä»¶<span class="token number">2</span><span class="token comment" spellcheck="true">-- WITH ROLLUPè¿ç®—</span>ç”¨æ¥ç»Ÿè®¡å½“å‰åˆ—çš„æ€»å’Œï¼Œ ç»Ÿè®¡çš„æ˜¯èšåˆå‡½æ•°çš„åˆ—  è®¡ç®—çš„ç»“æœæ˜¯èšåˆå‡½æ•°çš„æ–¹å¼ sumæ˜¯å’Œï¼Œ AVGæ˜¯å¹³å‡æ•°<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> åˆ—<span class="token number">1</span><span class="token punctuation">,</span>åˆ—<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">WITH ROLLUP</span> </code></pre><table><thead><tr><th>having</th><th>where</th></tr></thead><tbody><tr><td>åªèƒ½åˆ¤æ–­selectè¿‡çš„åˆ—å</td><td>èƒ½åˆ¤æ–­æ‰€æœ‰åˆ—å</td></tr><tr><td>å…¶ä»–å·®ä¸å¤š</td><td></td></tr></tbody></table><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- å®¶æ—©vaçš„å¹¶ä¸” è®¢å•æ€»é¢å¤§äº100</span><span class="token keyword">SELECT</span>    <span class="token number">c</span><span class="token punctuation">.</span>customer_id<span class="token punctuation">,</span>    <span class="token number">c</span><span class="token punctuation">.</span>first_name<span class="token punctuation">,</span>    <span class="token number">c</span><span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>    <span class="token function">SUM</span><span class="token punctuation">(</span> oi<span class="token punctuation">.</span>quantity <span class="token operator">*</span> oi<span class="token punctuation">.</span>unit_price <span class="token punctuation">)</span> <span class="token keyword">AS</span> spend <span class="token keyword">FROM</span>    orders o    <span class="token keyword">JOIN</span> customers <span class="token number">c</span> <span class="token keyword">USING</span> <span class="token punctuation">(</span> customer_id <span class="token punctuation">)</span>    <span class="token keyword">JOIN</span> order_items oi <span class="token keyword">USING</span> <span class="token punctuation">(</span> order_id <span class="token punctuation">)</span> <span class="token keyword">WHERE</span>    <span class="token number">c</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'VA'</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span>    <span class="token number">c</span><span class="token punctuation">.</span>customer_id<span class="token punctuation">,</span>    <span class="token number">c</span><span class="token punctuation">.</span>first_name<span class="token punctuation">,</span>    <span class="token number">c</span><span class="token punctuation">.</span>last_name<span class="token keyword">HAVING</span>    spend <span class="token operator">></span> <span class="token number">90</span></code></pre><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- in/not in</span><span class="token operator">in</span> <span class="token operator">/</span> <span class="token operator">not</span> <span class="token operator">in</span>å½“å­æŸ¥è¯¢æ˜¯ä¸€ä¸ªé›†åˆ å°±ç”¨ <span class="token operator">in</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨ <span class="token keyword">where</span> <span class="token number">a</span> <span class="token operator">in</span> ï¼ˆ <span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>ï¼‰ <span class="token comment" spellcheck="true">-- ALL æŸ¥è¯¢</span><span class="token comment" spellcheck="true">-- è¡¨ç¤ºæ‹¬å·é‡Œçš„å…¨éƒ¨  (> ALl) å¤§äºå…¨éƒ¨</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨ <span class="token keyword">where</span> å­—æ®µ <span class="token operator">></span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- = ANY / SOME  (= ANY  å’Œ  IN ç­‰æ•ˆ)</span><span class="token comment" spellcheck="true">-- è¿”å›ä¸€ä¸ªé›†åˆä¸­æ‰€æœ‰æ¡ä»¶çš„</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨ <span class="token keyword">where</span> å­—æ®µ <span class="token operator">=</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- explain + è¯­å¥</span>æŸ¥çœ‹æ€§èƒ½ sqlä¼˜åŒ–</code></pre><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><h3 id="æŸ¥è¯¢-æ’åº"><a href="#æŸ¥è¯¢-æ’åº" class="headerlink" title="æŸ¥è¯¢/æ’åº"></a>æŸ¥è¯¢/æ’åº</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- è‡ªåŠ¨é‚£ä¸ªæäº¤çŠ¶æ€</span><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'autocommit'</span><span class="token comment" spellcheck="true">-- æ¡ä»¶æŸ¥è¯¢</span><span class="token keyword">where</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">and</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">or</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">-- æ˜¯å¦å­˜åœ¨ å¯ä»¥ä»£æ›¿andæ“ä½œ</span>    <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">a</span><span class="token punctuation">,</span><span class="token number">b</span><span class="token punctuation">,</span><span class="token number">c</span><span class="token punctuation">)</span>    <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">a</span><span class="token punctuation">,</span><span class="token number">b</span><span class="token punctuation">,</span><span class="token number">c</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">--  æ˜¯å¦å­˜åœ¨</span>    exist <span class="token punctuation">(</span>è¿”å›çš„æ˜¯ <span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span><span class="token punctuation">)</span>     <span class="token comment" spellcheck="true">-- åœ¨...ä¹‹é—´</span>    <span class="token keyword">WHERE</span> <span class="token operator">between</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">-- ç©º, éç©º</span>    <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">/</span> <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>  <span class="token comment" spellcheck="true">-- æ¨¡ç³ŠæŸ¥è¯¢ like %è¡¨ç¤ºä»»æ„æ•°é‡å­—ç¬¦ _è¡¨ç¤ºå•ä¸ªä»»æ„å­—ç¬¦ å¯ä»¥æœ‰å¤šä¸ª_</span><span class="token keyword">where</span> åˆ— <span class="token operator">like</span> <span class="token string">'%val%'</span><span class="token operator">LIKE</span> <span class="token string">'___å•Š'</span><span class="token comment" spellcheck="true">-- æ’åº</span><span class="token keyword">order</span> <span class="token keyword">by</span> åˆ—  <span class="token keyword">desc</span> é™åº <span class="token keyword">asc</span> å‡åº<span class="token comment" spellcheck="true">-- æˆªå–</span><span class="token keyword">limit</span> x è¡¨ç¤ºä»å¤´æˆªå–xä¸ª<span class="token keyword">limit</span> y<span class="token punctuation">,</span>x è¡¨ç¤ºä»yå¼€å§‹æˆªå–xä¸ª <span class="token punctuation">(</span>åˆ†é¡µä¼šç”¨<span class="token punctuation">)</span></code></pre><h3 id="å†…è¿æ¥æŸ¥è¯¢"><a href="#å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="å†…è¿æ¥æŸ¥è¯¢:"></a>å†…è¿æ¥æŸ¥è¯¢:</h3><blockquote><p>å¤åˆä¸»é”®: è¡¨ä¸­ä¸»é”®æ•°é‡è¶…è¿‡ä¸€åˆ—</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- innerå¯ä»¥çœç•¥</span><span class="token keyword">inner</span> <span class="token keyword">join</span> è¡¨<span class="token number">1</span> <span class="token keyword">on</span> æ¡ä»¶<span class="token comment" spellcheck="true">-- è·¨æ•°æ®åº“é“¾æ¥</span><span class="token keyword">join</span> <span class="token number">a</span>åº“<span class="token punctuation">.</span><span class="token number">a</span>è¡¨<span class="token comment" spellcheck="true">-- å¤šè¡¨æŸ¥è¯¢</span><span class="token keyword">from</span> è¡¨<span class="token number">1</span> <span class="token keyword">join</span> è¡¨<span class="token number">2</span> <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">join</span> è¡¨<span class="token number">3</span> <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">-- å¤åˆé“¾æ¥: çŸ¥è¯†ç‚¹:å¤åˆä¸»é”® å°±æ˜¯å¤šäº†ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶</span><span class="token keyword">join</span> è¡¨ <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">and</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">-- éšå¼é“¾æ¥ </span>æŠŠ <span class="token keyword">join</span> <span class="token keyword">on</span> ç”¨ <span class="token keyword">where</span> ä»£æ›¿ å°½é‡ä¸ä½¿ç”¨<span class="token keyword">where</span></code></pre><h3 id="å¤–è¿æ¥æŸ¥è¯¢"><a href="#å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="å¤–è¿æ¥æŸ¥è¯¢:"></a>å¤–è¿æ¥æŸ¥è¯¢:</h3><blockquote><p>å†…è¿æ¥å¦‚æœä¸æ»¡è¶³ on çš„æ¡ä»¶ä¸ä¼šè¿”å› </p><p>å¤–è¿æ¥ä¼šä»¥ left/right ä¸ºä¸»è¡¨ ä¸æ»¡è¶³ä¹Ÿä¼šè¿”å›</p><p>outer join (outerå¯ä»¥çœç•¥)</p><ul><li>ä¸¤ç§:<ul><li>å·¦è¿æ¥: left join  (ä¸€èˆ¬æƒ…å†µä½¿ç”¨å·¦è¿æ¥)</li><li>å³é“¾æ¥: right join</li></ul></li></ul></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- å¤šè¡¨è¿æ¥</span>ä¾‹å­:<span class="token keyword">SELECT</span>    o<span class="token punctuation">.</span>order_date<span class="token punctuation">,</span>    o<span class="token punctuation">.</span>order_id<span class="token punctuation">,</span>    <span class="token number">c</span><span class="token punctuation">.</span>first_name <span class="token keyword">AS</span> customer<span class="token punctuation">,</span>    s<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">AS</span> shipper<span class="token punctuation">,</span>    os<span class="token punctuation">.</span>NAME <span class="token keyword">AS</span> <span class="token string">'status'</span> <span class="token keyword">FROM</span>    orders o    <span class="token keyword">JOIN</span> customers <span class="token number">c</span> <span class="token keyword">ON</span> o<span class="token punctuation">.</span>customer_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>customer_id    <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> shippers s <span class="token keyword">ON</span> s<span class="token punctuation">.</span>shipper_id <span class="token operator">=</span> o<span class="token punctuation">.</span>shipper_id    <span class="token keyword">JOIN</span> order_statuses os <span class="token keyword">ON</span> os<span class="token punctuation">.</span>order_status_id <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token keyword">status</span><span class="token punctuation">`</span><span class="token comment" spellcheck="true">-- using(åˆ—1,åˆ—2...)</span><span class="token keyword">using</span><span class="token punctuation">(</span>åˆ—<span class="token number">1</span><span class="token punctuation">,</span>åˆ—<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>å¯ä»¥æ›¿æ¢æ‰ <span class="token keyword">on</span> ä½†æ˜¯è¦æ±‚è¦æŸ¥è¯¢çš„ä¸¤ä¸ªè¡¨çš„çš„åˆ—æ˜ç›¸ç­‰ å½“ç„¶ä¹Ÿå¯ä»¥ç»™å¤šä¸ªå‚æ•°ç”¨<span class="token punctuation">,</span> éš”å¼€</code></pre><h3 id="å…¶ä»–é“¾æ¥æŸ¥è¯¢"><a href="#å…¶ä»–é“¾æ¥æŸ¥è¯¢" class="headerlink" title="å…¶ä»–é“¾æ¥æŸ¥è¯¢"></a>å…¶ä»–é“¾æ¥æŸ¥è¯¢</h3><ul><li>è‡ªç„¶è¿æ¥ natural join:<br> æ•°æ®åº“å¼•æ“è‡ªåŠ¨åŒ¹é… ä¸å»ºè®®ä½¿ç”¨</li><li>äº¤å‰è¿æ¥:</li></ul><blockquote><p>å°†ä¸¤ä¸ªè¡¨çš„æ•°æ®äº¤å‰ç»„åˆ(ä¸‰ç§é¥®æ–™å’Œä¸‰ç§æ¯å­å°ºå¯¸ äº¤å‰è¿æ¥å‡ºæ‰€æœ‰çŠ¶æ€)</p></blockquote><pre class=" language-sql"><code class="language-sql">è¡¨<span class="token number">1</span> <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> è¡¨<span class="token number">2</span> <span class="token punctuation">(</span>å»ºè®®ä½¿ç”¨<span class="token punctuation">)</span><span class="token keyword">from</span> è¡¨<span class="token number">1</span><span class="token punctuation">,</span> è¡¨<span class="token number">2</span>  </code></pre><ul><li>è”åˆæŸ¥è¯¢(UNION)</li></ul><blockquote><p>å°†å¤šä¸ªæŸ¥è¯¢ç»“æ„é›†,åˆæˆä¸€ä¸ª åˆ—æ•°è¦ç›¸åŒ, åˆ—æ˜å–ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¯­å¥</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><h3 id="å¤æ‚æŸ¥è¯¢"><a href="#å¤æ‚æŸ¥è¯¢" class="headerlink" title="å¤æ‚æŸ¥è¯¢"></a>å¤æ‚æŸ¥è¯¢</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- å­æŸ¥è¯¢ï¼ˆåµŒå¥—æŸ¥è¯¢)</span>ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„ç»“æœæ˜¯å¦ä¸€ä¸ªçš„æ¡ä»¶<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨ <span class="token keyword">where</span> <span class="token number">a</span> <span class="token operator">=</span> ï¼ˆ <span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>ï¼‰ </code></pre><h3 id="ç›¸å…³å­æŸ¥è¯¢"><a href="#ç›¸å…³å­æŸ¥è¯¢" class="headerlink" title="ç›¸å…³å­æŸ¥è¯¢"></a>ç›¸å…³å­æŸ¥è¯¢</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- åœ¨åµŒå¥—æŸ¥è¯¢ä¸­æœ‰ç”¨åˆ°åµŒå¥—å¤–çš„æ•°æ® (ç¼ºç‚¹: æ…¢,å†…å­˜æ¶ˆè€—é«˜)</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨ <span class="token number">a</span> <span class="token keyword">where</span> val <span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">select</span> val <span class="token keyword">from</span> è¡¨ <span class="token number">b</span> <span class="token keyword">where</span> <span class="token number">a</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>  </code></pre><h4 id="å­æŸ¥è¯¢åœ¨-select-å’Œ-fromä¸­ä½¿ç”¨"><a href="#å­æŸ¥è¯¢åœ¨-select-å’Œ-fromä¸­ä½¿ç”¨" class="headerlink" title="å­æŸ¥è¯¢åœ¨ select å’Œ fromä¸­ä½¿ç”¨"></a>å­æŸ¥è¯¢åœ¨ select å’Œ fromä¸­ä½¿ç”¨</h4><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- è®¡ç®—å’Œå’Œå¹³å‡å€¼åšå·®  åœ¨selectä¸­</span><span class="token keyword">SELECT</span>    <span class="token number">c</span><span class="token punctuation">.</span>client_id<span class="token punctuation">,</span>    <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span> invoice_total <span class="token punctuation">)</span> <span class="token keyword">FROM</span> invoices <span class="token keyword">WHERE</span> <span class="token number">c</span><span class="token punctuation">.</span>client_id <span class="token operator">=</span> client_id  <span class="token punctuation">)</span> <span class="token keyword">AS</span> sum1_total<span class="token punctuation">,</span>    <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span> invoice_total <span class="token punctuation">)</span> <span class="token keyword">FROM</span> invoices <span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_total<span class="token punctuation">,</span>    <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> sum1_total <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> avg_total <span class="token punctuation">)</span> <span class="token keyword">FROM</span>    <span class="token punctuation">`</span>invoices<span class="token punctuation">`</span> i<span class="token punctuation">,</span>    clients <span class="token number">c</span>     <span class="token keyword">WHERE</span> æ¡ä»¶</code></pre><h2 id="æ’å…¥-å¤åˆ¶"><a href="#æ’å…¥-å¤åˆ¶" class="headerlink" title="æ’å…¥/å¤åˆ¶"></a>æ’å…¥/å¤åˆ¶</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- å¢åŠ æ•°æ®</span><span class="token comment" spellcheck="true">-- defaut è¡¨ç¤ºé»˜è®¤</span><span class="token keyword">insert</span> <span class="token keyword">into</span> è¡¨å <span class="token keyword">value</span><span class="token punctuation">(</span> defaut <span class="token punctuation">,</span>å­—æ®µå€¼<span class="token number">1</span><span class="token punctuation">,</span>å€¼<span class="token number">2</span><span class="token punctuation">,</span>å€¼<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> è¡¨å<span class="token punctuation">(</span>å­—æ®µå<span class="token number">1</span><span class="token punctuation">,</span>å<span class="token number">2</span>å<span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">value</span><span class="token punctuation">(</span>å­—æ®µå€¼<span class="token number">1</span><span class="token punctuation">,</span>å€¼<span class="token number">2</span><span class="token punctuation">,</span>å€¼<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- å¤šè¡Œæ’å…¥</span><span class="token keyword">insert</span> <span class="token keyword">into</span> è¡¨<span class="token punctuation">(</span>å­—æ®µ<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>å€¼<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>å€¼<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> æ’å…¥å¤šä¸ªæ•°æ®<span class="token comment" spellcheck="true">-- å¤šè¡¨ æ’å…¥</span>LAST_INSERT_ID<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">-- æœ€è¿‘æ’å…¥ID</span><span class="token comment" spellcheck="true">-- å¤åˆ¶è¡¨</span><span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨ <span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment" spellcheck="true">-- åˆ›å»ºä¸€ä¸ªä½ æŸ¥è¯¢å‡ºæ¥çš„è¡¨</span><span class="token keyword">insert</span> <span class="token keyword">into</span> è¡¨ <span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token comment" spellcheck="true">-- æ’å…¥ä¸€ä¸ªä½ æŸ¥è¯¢çš„è¡¨</span></code></pre><h2 id="æ›´æ–°-åˆ é™¤"><a href="#æ›´æ–°-åˆ é™¤" class="headerlink" title="æ›´æ–°/åˆ é™¤"></a>æ›´æ–°/åˆ é™¤</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- æ›´æ–°</span><span class="token keyword">update</span> è¡¨å <span class="token keyword">set</span> å­—æ®µ<span class="token number">1</span> <span class="token operator">=</span> å€¼<span class="token number">1</span><span class="token punctuation">,</span> å­—æ®µ<span class="token number">2</span> <span class="token operator">=</span> å€¼<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> å­—æ®µä½ç½® <span class="token operator">=</span> å€¼<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- å¤šè¡Œæ›´æ–°</span><span class="token keyword">UPDATE</span> è¡¨å <span class="token keyword">SET</span> å­—æ®µ<span class="token number">1</span> <span class="token operator">=</span> å€¼<span class="token number">1</span><span class="token operator">+</span><span class="token number">50</span><span class="token punctuation">,</span>å­—æ®µ<span class="token number">2</span> <span class="token operator">=</span> å€¼<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">WHERE</span> æ¡ä»¶ <span class="token comment" spellcheck="true">-- æ¡ä»¶å¯ä»¥é€‰å®šå¤šè¡Œæ•°æ®</span><span class="token comment" spellcheck="true">-- åœ¨updateä¸­ä½¿ç”¨ select</span>åµŒå¥—æŸ¥è¯¢ç»“æœé›†<span class="token keyword">UPDATE</span> è¡¨å <span class="token keyword">SET</span> å­—æ®µ<span class="token number">1</span> <span class="token operator">=</span> å€¼<span class="token number">1</span> <span class="token keyword">WHERE</span> åˆ—<span class="token number">1</span><span class="token operator">=</span><span class="token punctuation">(</span> <span class="token keyword">select</span> è¯­å¥<span class="token punctuation">)</span><span class="token comment" spellcheck="true">--------------åˆ é™¤--------------</span><span class="token keyword">delete</span> <span class="token operator">/</span> <span class="token keyword">truncate</span> <span class="token keyword">table</span> è¡¨å<span class="token punctuation">;</span>  åˆ é™¤å…¨è¡¨<span class="token keyword">delete</span> <span class="token keyword">from</span> è¡¨å <span class="token keyword">where</span> å­—æ®µå <span class="token operator">=</span> å­—æ®µå€¼<span class="token punctuation">;</span>å½“ç„¶å¯ä»¥åµŒå¥—<span class="token keyword">select</span>è¯­å¥:<span class="token keyword">delete</span> è¡¨å <span class="token keyword">WHERE</span> åˆ—<span class="token number">1</span><span class="token operator">=</span><span class="token punctuation">(</span> <span class="token keyword">select</span> è¯­å¥<span class="token punctuation">)</span></code></pre><h2 id="ä¸€äº›å‡½æ•°"><a href="#ä¸€äº›å‡½æ•°" class="headerlink" title="ä¸€äº›å‡½æ•°"></a>ä¸€äº›å‡½æ•°</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- åˆ¤æ–­ç©º</span>IFNULL<span class="token punctuation">(</span><span class="token number">a</span><span class="token punctuation">,</span><span class="token number">b</span><span class="token punctuation">)</span> å¦‚æœç¬¬ä¸€ä¸ª<span class="token number">a</span>æ˜¯ç©ºé‚£ä¹ˆè¿”å›<span class="token number">b</span></code></pre><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><blockquote><p>è§†å›¾æ•°æ®æ˜¯åŒæ­¥çš„(æ•°æ®åŒæ­¥çš„)</p><p>åˆ›å»ºè§†å›¾æ—¶ <strong>ä¸ä½¿ç”¨</strong> Distinct / union ä»¥åŠ sum / group by â€¦ èšåˆå‡½æ•° çš„view å°±æ˜¯å¯æ›´æ–°è¡¨ </p><p>è§†å›¾å¯ä»¥å‡å°æ•°æ®åº“è®¾è®¡æ”¹åŠ¨çš„å½±å“ ç®€åŒ–æŸ¥è¯¢æ“ä½œ</p></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- åˆ›å»ºè§†å›¾</span><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> clients_balance <span class="token keyword">AS</span> <span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> æŠŠæŸ¥è¯¢çš„ä¸œè¥¿å­˜è¿›å»<span class="token keyword">create</span> <span class="token operator">or</span> replace  æˆ–è€…ç”¨è¿™ä¸ªè¯­å¥ <span class="token comment" spellcheck="true">-- åˆ é™¤è§†å›¾</span><span class="token keyword">drop</span> <span class="token keyword">view</span> name<span class="token comment" spellcheck="true">-- ä¿®æ”¹è§†å›¾ é˜²æ­¢æ•°æ®è¢«åˆ æ‰</span>åœ¨åˆ›å»ºè§†å›¾ååŠ ä¸Š<span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span></code></pre><h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- åˆ›å»ºå‡½æ•°(å­˜å‚¨è¿‡ç¨‹) </span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> get_invoices_and_balance<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">-- å‚æ•° ç›¸å½“äºå‡½æ•°çš„å‚æ•°</span><span class="token keyword">BEGIN</span><span class="token keyword">SELECT</span>    <span class="token operator">*</span> <span class="token keyword">FROM</span>    invoices <span class="token keyword">WHERE</span>    <span class="token punctuation">(</span> invoice_total <span class="token operator">-</span> payment_total <span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">END</span><span class="token comment" spellcheck="true">-- å®šä¹‰ç»“æŸç¬¦å·</span><span class="token keyword">DELIMITER</span> $$ <span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- æ·»åŠ å‚æ•° å½“ç„¶æŸ¥è¯¢æ—¶ä¹Ÿè¦åŠ å‚æ•°</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> name <span class="token punctuation">(</span> valName1 TYPE1<span class="token punctuation">,</span>valName2 TYPE2 <span class="token punctuation">)</span> <span class="token keyword">BEGIN</span> <span class="token comment" spellcheck="true">-- å¦‚æœè¦åˆ¤æ–­æ¡ä»¶</span><span class="token keyword">IF</span> valName1 <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">and</span> valName2 <span class="token operator">is</span> <span class="token boolean">NULL</span> <span class="token keyword">THEN</span><span class="token keyword">ELSE</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span></code></pre><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- æ‰§è¡Œè¿‡ç¨‹</span><span class="token keyword">CALL</span> get_invoices_and_balance<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- åˆ é™¤è¿‡ç¨‹ If exists åˆ¤æ–­æ˜¯å¦å­˜åœ¨ å¯ä»¥ä¸åŠ </span><span class="token keyword">drop</span> <span class="token keyword">procedure</span> <span class="token keyword">If</span> <span class="token keyword">exists</span> name<span class="token punctuation">;</span></code></pre><h2 id="InnoDBå’ŒMySAM"><a href="#InnoDBå’ŒMySAM" class="headerlink" title="InnoDBå’ŒMySAM"></a>InnoDBå’ŒMySAM</h2><ul><li>ç°åœ¨éƒ½æ˜¯é»˜è®¤ä½¿ç”¨InnoDB</li><li>MySAM æ¯”è¾ƒè€,ä»¥å‰ç”¨</li></ul><blockquote><p>åŒºåˆ«:</p></blockquote><table><thead><tr><th></th><th>MySAM</th><th>INNODB</th></tr></thead><tbody><tr><td>äº‹åŠ¡</td><td>ä¸æ”¯æŒ</td><td><strong>æ”¯æŒ</strong></td></tr><tr><td>æ•°æ®é”å®šæ–¹å¼</td><td>è¡¨é”å®š</td><td><strong>è¡Œé”å®š</strong></td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>ä¸æ”¯æŒ</td><td><strong>æ”¯æŒ</strong></td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td><strong>æ”¯æŒ</strong></td><td>ä¸æ”¯æŒ</td></tr><tr><td>è¡¨ç©ºé—´å¤§å°</td><td>å°</td><td>å¤§,çº¦ä¸ºMySAMçš„ä¸¤å€</td></tr><tr><td>èšé›†ç´¢å¼•</td><td>æ¯”æ™®é€šç´¢å¼•å¤šäº†ä¸ªçº¦æŸ</td><td>å¶å­èŠ‚ç‚¹å°±æ˜¯æ•°æ®èŠ‚ç‚¹</td></tr></tbody></table><blockquote><p>åœ¨ç‰©ç†ç©ºé—´:</p></blockquote><p>æ‰€æœ‰æ•°æ®åº“éƒ½æ˜¯ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨dataç›®å½•ä¸‹,ä¸€ç»„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæ•°æ®åº“,æœ¬è´¨è¿˜æ˜¯æ–‡ä»¶å­˜å‚¨</p><p>Mysqlå¼•æ“</p><ul><li>INNODBåœ¨æ•°æ®åº“ä¸Šåªæœ‰ä¸€ä¸ª*.frm, ä»¥åŠä¸Šçº§ç›®å½•çš„ibdata1æ–‡ä»¶</li><li>MySAM<ul><li>*.frm è¡¨ç»“æ„</li><li>*.myd  æ•°æ®æ–‡ä»¶(data)</li><li>*.MYI  ç´¢å¼•æ–‡ä»¶(index)</li></ul></li></ul><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><p>MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼šç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ã€‚æå–å¥å­ä¸»å¹²ï¼Œå°±å¯ä»¥å¾—åˆ°ç´¢å¼•çš„æœ¬è´¨ï¼šç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚</p><p>IOæ¬¡æ•°å’Œæ•°æ®ç»“æ„çš„æ¬¡æ•°æœ‰å…³(æ ‘ â€“ å°±æ˜¯é«˜åº¦) , å¦‚æœæ²¡æœ‰ç´¢å¼•é‚£å°±æ˜¯ä¸€ä¸ªæ•°æ®ä¸€æ¬¡IO</p><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><a href="https://zhuanlan.zhihu.com/p/29118331" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/29118331</a></p><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><p>mysqlçš„ç´¢å¼•åˆ†ä¸ºå•åˆ—ç´¢å¼•(ä¸»é”®ç´¢å¼•(èšé›†ç´¢å¼•),å”¯ä¸€ç´¢å¼•(UNIQUE INDEX),æ™®é€šç´¢å¼•(INDEX ))å’Œç»„åˆç´¢å¼•.</p><p>å•åˆ—ç´¢å¼•:ä¸€ä¸ªç´¢å¼•åªåŒ…å«ä¸€ä¸ªåˆ—,ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•.</p><p>ç»„åˆç´¢å¼•:ä¸€ä¸ªç»„åˆç´¢å¼•åŒ…å«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„åˆ—,</p><hr><p>èšé›†ç´¢å¼•: æ•°æ®è¡Œçš„ç‰©ç†é¡ºåºä¸åˆ—å€¼çš„<strong>é¡ºåºç›¸åŒ</strong></p><p>éèšé›†ç´¢å¼•: è¯¥ç´¢å¼•ä¸­ç´¢å¼•çš„é€»è¾‘é¡ºåºä¸ç£ç›˜ä¸Šè¡Œçš„ç‰©ç†å­˜å‚¨é¡ºåºä¸åŒï¼Œä¸€ä¸ªè¡¨ä¸­å¯ä»¥æ‹¥æœ‰å¤šä¸ªéèšé›†ç´¢å¼•ã€‚(æ™®é€šç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ï¼Œå…¨æ–‡ç´¢å¼•)</p><p>å›è¡¨æŸ¥è¯¢è§£å†³æ–¹å¼:   å¤åˆç´¢å¼•ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- ç»„åˆ</span><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> IndexName <span class="token keyword">On</span> <span class="token punctuation">`</span>TableName<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>å­—æ®µå<span class="token punctuation">`</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">`</span>å­—æ®µå<span class="token punctuation">`</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¦†ç›–ç´¢å¼•: select çš„ å’ŒæŸ¥æ‰¾çš„éƒ½æ˜¯ç´¢å¼•</p><blockquote><p> ç´¢å¼•çš„æ•°æ®ç»“æ„:</p></blockquote><p>å“ˆå¸Œ:</p><p>Bæ ‘</p><p>B+æ ‘</p><blockquote><p>ç´¢å¼•</p><p><a href="https://www.jianshu.com/p/2879225ba243" target="_blank" rel="noopener">https://www.jianshu.com/p/2879225ba243</a></p></blockquote><h2 id="LOG"><a href="#LOG" class="headerlink" title="LOG"></a>LOG</h2><p>P52 - p63 ä¸€äº›å‡½æ•°å’Œè¯­å¥: æˆ‘è·³äº†</p><p>P74 - P84 å­˜å‚¨è¿‡ç¨‹çš„å…¶ä»–ä¸œè¥¿ å’Œ è§¦å‘å™¨ æˆ‘è·³äº†</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.csdn.net/jiadajing267/article/details/81269067" target="_blank" rel="noopener">Mysqlè°ƒä¼˜ â€“ explain</a></p><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†</a></p>]]></content>
      
      
      <categories>
          
          <category> ç±»åˆ« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xx-net è®¿é—®Google</title>
      <link href="/2020/07/04/xx-net-%E8%AE%BF%E9%97%AEGoogle/"/>
      <url>/2020/07/04/xx-net-%E8%AE%BF%E9%97%AEGoogle/</url>
      
        <content type="html"><![CDATA[<h1 id="xx-net-è®¿é—®Google"><a href="#xx-net-è®¿é—®Google" class="headerlink" title="xx-net è®¿é—®Google"></a>xx-net è®¿é—®Google</h1><p>è®¿é—®google</p><p>ä¸‹è½½XX-net: <a href="https://github.com/XX-net/XX-Net/blob/master/code/default/download.md">githubåœ°å€</a> </p><p>ä¸‹è½½ç¨³å®šç‰ˆè§£å‹(å°½é‡ä¸è¦æœ‰ä¸­æ–‡)è¿è¡Œ Star.bat/star.vbs</p><p>ç„¶å æç¤ºå®‰è£…è¯ä¹¦ â€“ å°±å…¥äº†æµè§ˆå™¨ â€“ ç‚¹å‡»çŠ¶æ€ â€“ å¦‚æœæœªè¿æ¥:</p><ul><li>è®¾ç½®ipv6(<strong>ä¹Ÿå¯ä»¥å…ˆé€ ä½œè¿™æ­¥éª¤</strong>)<ol><li>æ‰“å¼€ xx-Net/code/default/gae_proxy/local/ipv6_tunnel ä¸‹çš„enable_ipv6 æ‰“å¼€è‡ªåŠ¨è®¾ç½®</li></ol></li></ul><p>å¦‚æœçŠ¶æ€æ—¶é“¾æ¥é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨äº†</p><hr><p>å½“ç„¶ç”¨çš„æ˜¯å…±æœ‰çš„appid ä¼šæœ‰é™åˆ¶ å¯ä»¥è‡ªå·±é…ç½®Google appid: <a href="https://github.com/XX-net/XX-Net/wiki/how-to-create-my-appids">ç‚¹å‡»è¿™é‡Œæ˜¯å®˜æ–¹æ•™ç¨‹</a> æˆ‘æ²¡æœ‰ä¿¡ç”¨å¡å°±å…ˆå°†å°±äº†:sob:</p>]]></content>
      
      
      <categories>
          
          <category> build </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xx-net </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springäº‹åŠ¡</title>
      <link href="/2020/07/04/Spring%E4%BA%8B%E5%8A%A1/"/>
      <url>/2020/07/04/Spring%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><h2 id="äº‹åŠ¡è¯´æ˜"><a href="#äº‹åŠ¡è¯´æ˜" class="headerlink" title="äº‹åŠ¡è¯´æ˜"></a>äº‹åŠ¡è¯´æ˜</h2><blockquote><p>ä»€ä¹ˆæ˜¯äº‹åŠ¡</p></blockquote><p>äº‹åŠ¡å¼ä»£è¡¨å•ä¸ªå·¥ä½œå•å…ƒçš„ä¸€ç»„SQLè¯­å¥.  </p><p>æ‰€æœ‰è¿™äº›è¯­å¥éƒ½åº”è¯¥æˆåŠŸå®Œæˆ,  å¦åˆ™äº‹åŠ¡ä¼šè¿è¡Œå¤±è´¥.  </p><p>æˆ‘ä»¬åœ¨éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œå¤šæ¬¡æ›´æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨äº‹åŠ¡</p><blockquote><p>å››å¤§ç‰¹æ€§(ACID)</p></blockquote><ol><li><p>Atomicity:  åŸå­æ€§ æ¯ä¸ªäº‹ç‰©ä¸å¯åˆ†å‰²</p></li><li><p><strong>Consistency: ä¸€è‡´æ€§ :</strong> ä½¿ç”¨äº‹åŠ¡ æ•°æ®åº“å§‹ç»ˆä¿æŒä¸€è‡´çš„çŠ¶æ€</p><ul><li>å®Œæ•´çº¦æŸ</li></ul></li><li><p>Isolation: éš”ç¦»æ€§ äº‹ç‰©ä¹‹é—´ä¸å¯å¹²æ‰°</p><ul><li><p>é”è¡Œ</p><p>å¦‚æœå¤šä¸ªäº‹åŠ¡æƒ³è¦æ›´æ–°ç›¸åŒçš„æ•°æ®</p><p>å—å½±å“çš„è¡Œä¼šè¢«é”å®š</p><p>å› æ­¤åªæœ‰ä¸€ä¸ªäº‹åŠ¡å¯ä»¥æ›´æ–°è¡Œ</p></li></ul></li><li><p>Durability: æŒç»­æ€§  ä¸€æ—¦æäº¤ äº‹åŠ¡çš„æ›´æ”¹æ˜¯æ°¸ä¹…çš„</p></li></ol><blockquote><p>Mysqlå¯¹äº‹åŠ¡å¤„ç†</p></blockquote><p>mysqlä¼šå°è£…æˆ‘ä»¬å†™çš„sql å¦‚æœæ£€æŸ¥æ— è¯¯è‡ªåŠ¨æäº¤</p><p><img src="https://i.loli.net/2020/08/23/LaimKnoYh1dc2P5.png" alt="mysqlè‡ªåŠ¨æäº¤å±æ€§"></p><p>mysql innodbå¼•æ“å·²ç»é€šè¿‡MVCCã€é—´éš™é”&amp;ä¸´é”®é”è§£å†³äº†å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹çš„å¹»è¯»é—®é¢˜</p><h2 id="åˆ›å»ºäº‹åŠ¡"><a href="#åˆ›å»ºäº‹åŠ¡" class="headerlink" title="åˆ›å»ºäº‹åŠ¡"></a>åˆ›å»ºäº‹åŠ¡</h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span> <span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// sqlè¯­å¥...</span><span class="token keyword">Commit</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- æäº¤</span><span class="token keyword">RollBack</span> <span class="token comment" spellcheck="true">-- å›æ»š</span><span class="token comment" spellcheck="true">-- ä¿å­˜ç‚¹</span><span class="token keyword">SAVEPOINT</span> point_name<span class="token keyword">RollBack</span>  <span class="token keyword">to</span> point_name <span class="token comment" spellcheck="true">-- å›æ»šåˆ°ä¿å­˜ç‚¹</span></code></pre><h2 id="å¹¶å‘å’Œé”å®š"><a href="#å¹¶å‘å’Œé”å®š" class="headerlink" title="å¹¶å‘å’Œé”å®š"></a>å¹¶å‘å’Œé”å®š</h2><blockquote><p>åœ¨çœŸå®åœºæ™¯ä¸­è‚¯å®šä¼šæœ‰å¤šä¸ªç”¨æˆ·å»è®¿é—®ç›¸åŒçš„æ•°æ® è¿™å°±æ˜¯ å¹¶å‘ å¦‚æœæ­£åœ¨è®¿é—®è¢«ä¿®æ”¹çš„æ•°æ® é‚£å°±å›å‡ºç°é—®é¢˜</p></blockquote><ul><li>mysql é»˜è®¤å¹¶å‘å¤„ç† â€“ é”è¡Œ</li></ul><p>å½“ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹è¡Œæ²¡æœ‰ç»“æŸæ—¶    å¦ä¸€ä¸ªäº‹åŠ¡å†æ¬¡å¯¹å…¶ä¿®æ”¹ä¼šè¢«é”ä½å‘ç”Ÿè¶…æ—¶ </p><pre class=" language-sql"><code class="language-sql"><span class="token operator">></span> <span class="token number">1205</span> <span class="token operator">-</span> <span class="token keyword">Lock</span> wait timeout exceeded<span class="token punctuation">;</span> try restarting <span class="token keyword">transaction</span><span class="token comment" spellcheck="true">// è¶…è¿‡äº†é”å®šç­‰å¾…è¶…æ—¶ï¼›å°è¯•é‡æ–°å¯åŠ¨äº‹åŠ¡  -- äº‹åŠ¡ä¼šå¤±æ•ˆ</span></code></pre><h2 id="å¹¶å‘é—®é¢˜"><a href="#å¹¶å‘é—®é¢˜" class="headerlink" title="å¹¶å‘é—®é¢˜"></a>å¹¶å‘é—®é¢˜</h2><p><strong>Lost Update :</strong> å½“æœ‰ä¸¤ä¸ªäº‹åŠ¡ä¿®æ”¹/åˆ é™¤ä¸€ä¸ªæ•°æ®æ—¶, åæäº¤çš„ä¼šæŠŠå…ˆæäº¤çš„è¦†ç›–æ‰</p><p><strong>è„åº¦</strong>:è¯»å–åˆ°äº†<strong>å¦ä¸€ä¸ªäº‹åŠ¡æœªç»“æŸ</strong>çš„æ•°æ®(å›æ»šå‰ æˆ–è€…æ›´æ–°å‰)</p><p><code>ä¸¾ä¸ªä¾‹å­:</code>  <strong>Aäº‹åŠ¡</strong> å¢åŠ 20ç§¯åˆ† <strong>Bäº‹åŠ¡</strong> æ ¹æ®ç§¯åˆ†æ¥é€‰æ‹©æŠ˜æ‰£  â€“ å¦‚æœ Aäº‹åŠ¡åœ¨Bäº‹åŠ¡ç»“æŸå‰å›æ»šäº†é‚£ä¹ˆBäº‹åŠ¡çš„æ•°æ®å°±æ˜¯ä¸çœŸå®çš„ ä¹Ÿå°±æ˜¯å¾ˆç¬¨ä¸å­˜åœ¨çš„</p><p><strong>ä¸å¯é‡å¤è¯»</strong>:(ä¸ä¸€è‡´è¯») å†<strong>ä¸€æ¬¡äº‹åŠ¡</strong>ä¸­, ä¸¤æ¬¡æŸ¥è¯¢ä¸ä¸€è‡´,å¯èƒ½åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¸­æ›´æ”¹äº†æ•°æ®</p><p><strong>å¹»è¯»</strong>:  æœ‰æ•°æ®å˜åŒ–æ—¶æ²¡æœ‰æŸ¥è¯¢åˆ° â€“ äº‹åŠ¡æŸ¥è¯¢åæ·»åŠ , ä¿®æ”¹æˆ–åˆ é™¤çš„</p><p><code>ä¸¾ä¸ªä¾‹å­:</code> Aäº‹åŠ¡æŸ¥è¯¢ç§¯åˆ†å¤§äº100çš„ Bäº‹åŠ¡å°† <em>å°æ˜</em>  çš„ç§¯åˆ†åŠ åˆ°100 å…ˆAåB ä½†æ˜¯Aäº‹åŠ¡æŸ¥ä¸åˆ° å°æ˜</p><h2 id="å››ç§éš”ç¦»çº§åˆ«"><a href="#å››ç§éš”ç¦»çº§åˆ«" class="headerlink" title="å››ç§éš”ç¦»çº§åˆ«"></a>å››ç§éš”ç¦»çº§åˆ«</h2><blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span> æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«</code></pre></blockquote><ol><li><p>é»˜è®¤</p></li><li><p>Read UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰</p></li><li><p>Read Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰</p></li><li><p>Repeatable Readï¼ˆå¯é‡è¯»ï¼‰</p></li><li><p>Serializableï¼ˆå¯ä¸²è¡ŒåŒ–(å¯åºåˆ—åŒ–)ï¼‰ : é˜²æ­¢å¹»è¯» å½“Aäº‹åŠ¡å‘ç°æœ‰äº‹åŠ¡åœ¨ä¿®æ”¹æˆ‘è¦æŸ¥è¯¢çš„æ•°æ® å°±ä¼šç­‰å¾…</p></li></ol><p><img src="https://i.loli.net/2020/08/23/42nrMJzVkWZ7Fp6.png" alt="image.png"></p><img src="https://i.loli.net/2020/09/07/iMKPBzVfsqt9oC1.png" alt="image.png" style="zoom:80%;" /><pre class=" language-sql"><code class="language-sql"><span class="token keyword">set</span> <span class="token keyword">session</span> <span class="token operator">/</span> globel <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> çº§åˆ« <span class="token comment" spellcheck="true">-- è®¾ç½®çº§åˆ« Mysql é»˜è®¤Repeatable Read</span>   <span class="token keyword">session</span><span class="token punctuation">(</span>å½“å‰ä¼šè¯<span class="token punctuation">)</span> <span class="token operator">/</span> globel <span class="token punctuation">(</span>å…¨å±€<span class="token punctuation">)</span></code></pre><p>   äº‹åŠ¡å®ç°æŠ€æœ¯/åŸç†</p><p><img src="https://i.loli.net/2020/08/23/O1uMT6z3eIAVWS7.png" alt="image.png"></p><h3 id="äº‹åŠ¡çš„å®ç°åŸç†"><a href="#äº‹åŠ¡çš„å®ç°åŸç†" class="headerlink" title="äº‹åŠ¡çš„å®ç°åŸç†"></a>äº‹åŠ¡çš„å®ç°åŸç†</h3><ol><li>äº‹åŠ¡çš„<strong>åŸå­æ€§ é€šè¿‡undo log</strong> å®ç°<ul><li><del>undo log : æ“ä½œä»»ä½•æ•°æ®ä¹‹å‰,å°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªåœ°æ–¹ (Undo log).  ç„¶åè¿›è¡Œæ•°æ®ä¿®æ”¹. å¦‚æœå‡ºç°é”™è¯¯æˆ–è€…æ‰§è¡ŒRollBackè¯­å¥.  ç³»ç»Ÿç”¨å¤‡ä»½åœ¨undo log ä¸‹çš„æ•°æ®è¿›è¡Œå›æ»š(sqlæ‰§è¡Œç›¸åæ“ä½œdelect â€“ insetr update â€“ ç›¸åçš„update)</del> </li></ul></li><li>äº‹åŠ¡çš„<strong>æŒä¹…æ€§ é€šè¿‡redo log</strong> å®ç°<ul><li>å’Œundo log ç›¸å, redo æ˜¯è®°å½•æ˜¯æ–°æ•°æ®çš„å¤‡ä»½ ç³»ç»Ÿå´©æºƒæ—¶ å¯ä»¥æ ¹æ®redo æ¢å¤?</li></ul></li><li>äº‹åŠ¡çš„éš”ç¦»æ€§ é€šè¿‡(<strong>è¯»å†™é”+MVCC</strong>[å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶])æ¥å®ç°</li><li>==äº‹åŠ¡ä¸€è‡´æ€§é€šè¿‡ åŸå­æ€§, æŒä¹…æ€§, éš”ç¦»æ€§å®ç°!!!!!==</li></ol><ul><li>bin log (binary log)</li></ul><h3 id="éš”ç¦»æ€§å®ç°åŸç†-é”"><a href="#éš”ç¦»æ€§å®ç°åŸç†-é”" class="headerlink" title="éš”ç¦»æ€§å®ç°åŸç† : é”"></a>éš”ç¦»æ€§å®ç°åŸç† : <strong>é”</strong></h3><ol><li><p>Mysql åˆ†ä¸º:</p><ul><li>å…±äº«é”(Shared): ==é”è¡Œ== å°†æ•°æ®å¯¹è±¡å˜ä¸º<strong>åªè¯»</strong>å½¢å¼, ä¸èƒ½è¿›è¡Œæ›´æ–° ä¹Ÿæ˜¯<strong>è¯»å†™</strong>é”å®š. å¤šä¸ªäº‹åŠ¡å…±äº«ä½†æ˜¯ ä¸èƒ½ä¿®æ”¹</li><li>æ’å®ƒé”(Exclusive):  ==é”è¡Œ==   <strong>ä¸ä¸å…¶ä»–é”å…±å­˜</strong> å¦‚æœä¸€ä¸ªäº‹åŠ¡è·å–äº†æ’å®ƒé”. å…¶ä»–äº‹åŠ¡å°±ä¸èƒ½åœ¨è·å–é”äº†, åªæœ‰è·å–é”çš„äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹</li><li>è¿˜æœ‰ä¸ªè‡ªå¢é”(å¯¹äºè‡ªå¢åˆ—è‡ªå¢é•¿çš„ä¸€ä¸ªç‰¹æ®Šçš„è¡¨çº§é”)</li></ul></li><li><p>é”å¾—ç²’åº¦(ç²’åº¦è¶Šé«˜æ•ˆç‡ä½ä½†æ˜¯å®‰å…¨)</p><ul><li>è®°å½•</li><li>è¡¨</li><li>æ•°æ®åº“</li></ul></li><li><p>é”çš„å¹¶å‘æµç¨‹</p><ul><li>äº‹åŠ¡æ ¹æ®è‡ªå·±çš„è‰æœ€è·å–å¯¹åº”çš„é”</li><li>ç”³è¯·çš„è¯·æ±‚è¢«å‘ç»™ é”ç®¡ç†å™¨ (æ˜¯å¦å†²çª æ˜¯å¦å¯ä»¥è·å¾—)</li><li>è‹¥è¢«æˆäºˆé” åˆ™ç»§ç»­ å¦åˆ™ç­‰å¾… ç›´åˆ°å…¶ä»–çš„äº‹åŠ¡é‡Šæ”¾</li></ul></li></ol><h1 id="Springäº‹åŠ¡"><a href="#Springäº‹åŠ¡" class="headerlink" title="Springäº‹åŠ¡"></a>Springäº‹åŠ¡</h1><h3 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h3><p>ä¼ æ’­ç‰¹æ€§</p><h3 id="ç¼–ç¨‹å¼äº‹åŠ¡"><a href="#ç¼–ç¨‹å¼äº‹åŠ¡" class="headerlink" title="ç¼–ç¨‹å¼äº‹åŠ¡"></a>ç¼–ç¨‹å¼äº‹åŠ¡</h3><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p><p><a href="http://blog.codinglabs.org/articles/index-condition-pushdown.html" target="_blank" rel="noopener">http://blog.codinglabs.org/articles/index-condition-pushdown.html</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> æœªå®Œæˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springäº‹åŠ¡</title>
      <link href="/2020/07/04/%E4%BA%8B%E5%8A%A1/"/>
      <url>/2020/07/04/%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><h2 id="äº‹åŠ¡è¯´æ˜"><a href="#äº‹åŠ¡è¯´æ˜" class="headerlink" title="äº‹åŠ¡è¯´æ˜"></a>äº‹åŠ¡è¯´æ˜</h2><blockquote><p>ä»€ä¹ˆæ˜¯äº‹åŠ¡</p></blockquote><p>äº‹åŠ¡å¼ä»£è¡¨å•ä¸ªå·¥ä½œå•å…ƒçš„ä¸€ç»„SQLè¯­å¥.  </p><p>æ‰€æœ‰è¿™äº›è¯­å¥éƒ½åº”è¯¥æˆåŠŸå®Œæˆ,  å¦åˆ™äº‹åŠ¡ä¼šè¿è¡Œå¤±è´¥.  </p><p>æˆ‘ä»¬åœ¨éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œå¤šæ¬¡æ›´æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨äº‹åŠ¡</p><blockquote><p>å››å¤§ç‰¹æ€§(ACID)</p></blockquote><ol><li><p>Atomicity:  åŸå­æ€§ æ¯ä¸ªäº‹ç‰©ä¸å¯åˆ†å‰²</p></li><li><p><strong>Consistency: ä¸€è‡´æ€§ :</strong> ä½¿ç”¨äº‹åŠ¡ æ•°æ®åº“å§‹ç»ˆä¿æŒä¸€è‡´çš„çŠ¶æ€</p><ul><li>å®Œæ•´çº¦æŸ</li></ul></li><li><p>Isolation: éš”ç¦»æ€§ äº‹ç‰©ä¹‹é—´ä¸å¯å¹²æ‰°</p><ul><li><p>é”è¡Œ</p><p>å¦‚æœå¤šä¸ªäº‹åŠ¡æƒ³è¦æ›´æ–°ç›¸åŒçš„æ•°æ®</p><p>å—å½±å“çš„è¡Œä¼šè¢«é”å®š</p><p>å› æ­¤åªæœ‰ä¸€ä¸ªäº‹åŠ¡å¯ä»¥æ›´æ–°è¡Œ</p></li></ul></li><li><p>Durability: æŒç»­æ€§  ä¸€æ—¦æäº¤ äº‹åŠ¡çš„æ›´æ”¹æ˜¯æ°¸ä¹…çš„</p></li></ol><blockquote><p>Mysqlå¯¹äº‹åŠ¡å¤„ç†</p></blockquote><p>mysqlä¼šå°è£…æˆ‘ä»¬å†™çš„sql å¦‚æœæ£€æŸ¥æ— è¯¯è‡ªåŠ¨æäº¤</p><p><img src="https://i.loli.net/2020/08/23/LaimKnoYh1dc2P5.png" alt="mysqlè‡ªåŠ¨æäº¤å±æ€§"></p><p>mysql innodbå¼•æ“å·²ç»é€šè¿‡MVCCã€é—´éš™é”&amp;ä¸´é”®é”è§£å†³äº†å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹çš„å¹»è¯»é—®é¢˜</p><h2 id="äº‹åŠ¡å®ç°æŠ€æœ¯-åŸç†"><a href="#äº‹åŠ¡å®ç°æŠ€æœ¯-åŸç†" class="headerlink" title="äº‹åŠ¡å®ç°æŠ€æœ¯/åŸç†"></a>äº‹åŠ¡å®ç°æŠ€æœ¯/åŸç†</h2><p><img src="https://i.loli.net/2020/08/23/O1uMT6z3eIAVWS7.png" alt="image.png"></p><h3 id="äº‹åŠ¡çš„å®ç°åŸç†"><a href="#äº‹åŠ¡çš„å®ç°åŸç†" class="headerlink" title="äº‹åŠ¡çš„å®ç°åŸç†"></a>äº‹åŠ¡çš„å®ç°åŸç†</h3><ol><li>äº‹åŠ¡çš„<strong>åŸå­æ€§ é€šè¿‡undo log</strong> å®ç°<ul><li><del>undo log : æ“ä½œä»»ä½•æ•°æ®ä¹‹å‰,å°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªåœ°æ–¹ (Undo log).  ç„¶åè¿›è¡Œæ•°æ®ä¿®æ”¹. å¦‚æœå‡ºç°é”™è¯¯æˆ–è€…æ‰§è¡ŒRollBackè¯­å¥.  ç³»ç»Ÿç”¨å¤‡ä»½åœ¨undo log ä¸‹çš„æ•°æ®è¿›è¡Œå›æ»š(sqlæ‰§è¡Œç›¸åæ“ä½œdelect â€“ insetr update â€“ ç›¸åçš„update)</del> </li></ul></li><li>äº‹åŠ¡çš„<strong>æŒä¹…æ€§ é€šè¿‡redo log</strong> å®ç°<ul><li>å’Œundo log ç›¸å, redo æ˜¯è®°å½•æ˜¯æ–°æ•°æ®çš„å¤‡ä»½ ç³»ç»Ÿå´©æºƒæ—¶ å¯ä»¥æ ¹æ®redo æ¢å¤?</li></ul></li><li>äº‹åŠ¡çš„éš”ç¦»æ€§ é€šè¿‡(<strong>è¯»å†™é”+MVCC</strong>[å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶])æ¥å®ç°</li><li>==äº‹åŠ¡ä¸€è‡´æ€§é€šè¿‡ åŸå­æ€§, æŒä¹…æ€§, éš”ç¦»æ€§å®ç°!!!!!==</li></ol><ul><li>bin log (binary log)</li></ul><h3 id="éš”ç¦»æ€§å®ç°åŸç†-é”"><a href="#éš”ç¦»æ€§å®ç°åŸç†-é”" class="headerlink" title="éš”ç¦»æ€§å®ç°åŸç† : é”"></a>éš”ç¦»æ€§å®ç°åŸç† : <strong>é”</strong></h3><ol><li><p>Mysql åˆ†ä¸º:</p><ul><li>å…±äº«é”(Shared): ==é”è¡Œ== å°†æ•°æ®å¯¹è±¡å˜ä¸º<strong>åªè¯»</strong>å½¢å¼, ä¸èƒ½è¿›è¡Œæ›´æ–° ä¹Ÿæ˜¯<strong>è¯»å†™</strong>é”å®š. å¤šä¸ªäº‹åŠ¡å…±äº«ä½†æ˜¯ ä¸èƒ½ä¿®æ”¹</li><li>æ’å®ƒé”(Exclusive):  ==é”è¡Œ==   <strong>ä¸ä¸å…¶ä»–é”å…±å­˜</strong> å¦‚æœä¸€ä¸ªäº‹åŠ¡è·å–äº†æ’å®ƒé”. å…¶ä»–äº‹åŠ¡å°±ä¸èƒ½åœ¨è·å–é”äº†, åªæœ‰è·å–é”çš„äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹</li><li>è¿˜æœ‰ä¸ªè‡ªå¢é”(å¯¹äºè‡ªå¢åˆ—è‡ªå¢é•¿çš„ä¸€ä¸ªç‰¹æ®Šçš„è¡¨çº§é”)</li></ul></li><li><p>é”å¾—ç²’åº¦(ç²’åº¦è¶Šé«˜æ•ˆç‡ä½ä½†æ˜¯å®‰å…¨)</p><ul><li>è®°å½•</li><li>è¡¨</li><li>æ•°æ®åº“</li></ul></li><li><p>é”çš„å¹¶å‘æµç¨‹</p><ul><li>äº‹åŠ¡æ ¹æ®è‡ªå·±çš„è‰æœ€è·å–å¯¹åº”çš„é”</li><li>ç”³è¯·çš„è¯·æ±‚è¢«å‘ç»™ é”ç®¡ç†å™¨ (æ˜¯å¦å†²çª æ˜¯å¦å¯ä»¥è·å¾—)</li><li>è‹¥è¢«æˆäºˆé” åˆ™ç»§ç»­ å¦åˆ™ç­‰å¾… ç›´åˆ°å…¶ä»–çš„äº‹åŠ¡é‡Šæ”¾</li></ul></li></ol><h2 id="åˆ›å»ºäº‹åŠ¡"><a href="#åˆ›å»ºäº‹åŠ¡" class="headerlink" title="åˆ›å»ºäº‹åŠ¡"></a>åˆ›å»ºäº‹åŠ¡</h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span> <span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// sqlè¯­å¥...</span><span class="token keyword">Commit</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- æäº¤</span><span class="token keyword">RollBack</span> <span class="token comment" spellcheck="true">-- å›æ»š</span><span class="token comment" spellcheck="true">-- ä¿å­˜ç‚¹</span><span class="token keyword">SAVEPOINT</span> point_name<span class="token keyword">RollBack</span>  <span class="token keyword">to</span> point_name å›æ»šåˆ°ä¿å­˜ç‚¹</code></pre><h2 id="å¹¶å‘å’Œé”å®š"><a href="#å¹¶å‘å’Œé”å®š" class="headerlink" title="å¹¶å‘å’Œé”å®š"></a>å¹¶å‘å’Œé”å®š</h2><blockquote><p>åœ¨çœŸå®åœºæ™¯ä¸­è‚¯å®šä¼šæœ‰å¤šä¸ªç”¨æˆ·å»è®¿é—®ç›¸åŒçš„æ•°æ® è¿™å°±æ˜¯ å¹¶å‘ å¦‚æœæ­£åœ¨è®¿é—®è¢«ä¿®æ”¹çš„æ•°æ® é‚£å°±å›å‡ºç°é—®é¢˜</p></blockquote><ul><li>mysql é»˜è®¤å¹¶å‘å¤„ç† â€“ é”è¡Œ</li></ul><p>å½“ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹è¡Œæ²¡æœ‰ç»“æŸæ—¶    å¦ä¸€ä¸ªäº‹åŠ¡å†æ¬¡å¯¹å…¶ä¿®æ”¹ä¼šè¢«é”ä½å‘ç”Ÿè¶…æ—¶ </p><pre class=" language-sql"><code class="language-sql"><span class="token operator">></span> <span class="token number">1205</span> <span class="token operator">-</span> <span class="token keyword">Lock</span> wait timeout exceeded<span class="token punctuation">;</span> try restarting <span class="token keyword">transaction</span><span class="token comment" spellcheck="true">// è¶…è¿‡äº†é”å®šç­‰å¾…è¶…æ—¶ï¼›å°è¯•é‡æ–°å¯åŠ¨äº‹åŠ¡  -- äº‹åŠ¡ä¼šå¤±æ•ˆ</span></code></pre><h2 id="å››ç§éš”ç¦»çº§åˆ«"><a href="#å››ç§éš”ç¦»çº§åˆ«" class="headerlink" title="å››ç§éš”ç¦»çº§åˆ«"></a>å››ç§éš”ç¦»çº§åˆ«</h2><blockquote><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span> æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«</code></pre></blockquote><ol><li><p>é»˜è®¤</p></li><li><p>Read UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰</p></li><li><p>Read Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰</p></li><li><p>Repeatable Readï¼ˆå¯é‡è¯»ï¼‰</p></li><li><p>Serializableï¼ˆå¯ä¸²è¡ŒåŒ–(å¯åºåˆ—åŒ–)ï¼‰</p><p><img src="https://i.loli.net/2020/08/23/42nrMJzVkWZ7Fp6.png" alt="image.png"></p><p>è„åº¦:è¯»å–åˆ°äº†<strong>å¦ä¸€ä¸ªäº‹åŠ¡æœªç»“æŸ</strong>çš„æ•°æ®(å›æ»šå‰ æˆ–è€…æ›´æ–°å‰)</p><p>ä¸å¯é‡å¤è¯»: å†<strong>ä¸€æ¬¡äº‹åŠ¡</strong>ä¸­, ä¸¤æ¬¡æŸ¥è¯¢ä¸ä¸€è‡´,å¯èƒ½åœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¸­æ›´æ”¹äº†æ•°æ® </p><p>å¹»è¯»:  ä¸¤æ¬¡æŸ¥è¯¢,ç¬¬äºŒæ¬¡æŸ¥åˆ°äº†æ–°çš„è¡Œ(å¤šäº†ä¸€è¡Œ)</p></li></ol><pre class=" language-sql"><code class="language-sql"><span class="token keyword">set</span> <span class="token keyword">session</span> <span class="token operator">/</span> globel <span class="token keyword">transaction</span> <span class="token keyword">isolation level</span> çº§åˆ« <span class="token comment" spellcheck="true">// è®¾ç½®çº§åˆ« </span><span class="token keyword">session</span><span class="token punctuation">(</span>å½“å‰ä¼šè¯<span class="token punctuation">)</span> <span class="token operator">/</span> globel <span class="token punctuation">(</span>å…¨å±€<span class="token punctuation">)</span></code></pre><h3 id="Read-UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰"><a href="#Read-UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰" class="headerlink" title="Read UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰"></a><del>Read UNCOMMITTEDï¼ˆæœªæäº¤å†…å®¹è¯»ï¼‰</del></h3><h3 id="Read-Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰"><a href="#Read-Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰" class="headerlink" title="Read Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰"></a><del>Read Committedï¼ˆæäº¤å†…å®¹è¯»ï¼‰</del></h3><h3 id="Repeatable-Readï¼ˆå¯é‡è¯»ï¼‰"><a href="#Repeatable-Readï¼ˆå¯é‡è¯»ï¼‰" class="headerlink" title="Repeatable Readï¼ˆå¯é‡è¯»ï¼‰"></a><del>Repeatable Readï¼ˆå¯é‡è¯»ï¼‰</del></h3><h3 id="Serializableï¼ˆå¯ä¸²è¡ŒåŒ–-å¯åºåˆ—åŒ–-ï¼‰"><a href="#Serializableï¼ˆå¯ä¸²è¡ŒåŒ–-å¯åºåˆ—åŒ–-ï¼‰" class="headerlink" title="Serializableï¼ˆå¯ä¸²è¡ŒåŒ–(å¯åºåˆ—åŒ–)ï¼‰"></a><del>Serializableï¼ˆå¯ä¸²è¡ŒåŒ–(å¯åºåˆ—åŒ–)ï¼‰</del></h3><h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><ul><li>æŸä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„äº‹åŠ¡   è·å–äº†å…¶ä»–äº‹åŠ¡æ‰§è¡Œæ—¶å¿…è¦çš„é” ä¸”ä¸èƒ½é‡Šæ”¾      é‚£ä¹ˆå°±ä¼šå‘ç”Ÿæ­»é”</li></ul><h1 id="Springäº‹åŠ¡"><a href="#Springäº‹åŠ¡" class="headerlink" title="Springäº‹åŠ¡"></a>Springäº‹åŠ¡</h1><h3 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h3><p>ä¼ æ’­ç‰¹æ€§</p><h3 id="ç¼–ç¨‹å¼äº‹åŠ¡"><a href="#ç¼–ç¨‹å¼äº‹åŠ¡" class="headerlink" title="ç¼–ç¨‹å¼äº‹åŠ¡"></a>ç¼–ç¨‹å¼äº‹åŠ¡</h3><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p><p><a href="http://blog.codinglabs.org/articles/index-condition-pushdown.html" target="_blank" rel="noopener">http://blog.codinglabs.org/articles/index-condition-pushdown.html</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> æœªå®Œæˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸå‹æ¨¡å¼</title>
      <link href="/2020/07/02/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/07/02/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h1>]]></content>
      
      
      <categories>
          
          <category> ç±»åˆ« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>peç³»ç»Ÿç›˜è§£é”å¯†ç (å¼€å¯å®‰å…¨å¼•å¯¼åå¯†ç é”™è¯¯)</title>
      <link href="/2020/06/25/pe%E7%B3%BB%E7%BB%9F%E7%9B%98%E8%A7%A3%E9%94%81%E5%AF%86%E7%A0%81-%E5%BC%80%E5%90%AF%E5%AE%89%E5%85%A8%E5%BC%95%E5%AF%BC%E5%90%8E%E5%AF%86%E7%A0%81%E9%94%99%E8%AF%AF/"/>
      <url>/2020/06/25/pe%E7%B3%BB%E7%BB%9F%E7%9B%98%E8%A7%A3%E9%94%81%E5%AF%86%E7%A0%81-%E5%BC%80%E5%90%AF%E5%AE%89%E5%85%A8%E5%BC%95%E5%AF%BC%E5%90%8E%E5%AF%86%E7%A0%81%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="peç³»ç»Ÿç›˜è§£é”å¯†ç -å¼€å¯å®‰å…¨å¼•å¯¼åå¯†ç é”™è¯¯"><a href="#peç³»ç»Ÿç›˜è§£é”å¯†ç -å¼€å¯å®‰å…¨å¼•å¯¼åå¯†ç é”™è¯¯" class="headerlink" title="peç³»ç»Ÿç›˜è§£é”å¯†ç (å¼€å¯å®‰å…¨å¼•å¯¼åå¯†ç é”™è¯¯)"></a>peç³»ç»Ÿç›˜è§£é”å¯†ç (å¼€å¯å®‰å…¨å¼•å¯¼åå¯†ç é”™è¯¯)</h1><blockquote><blockquote><p>ç»å†å‘¢å°±æ˜¯ä¸ºäº†åˆ æ‰<strong>æŸåƒåœ¾ç®¡å®¶</strong>é¡½å›ºçš„æ®‹ç•™æ–‡ä»¶, ç™¾åº¦å¾ˆå¤šéƒ½è¯´å¯ä»¥æ›´æ”¹å®‰å…¨å¼•å¯¼; ç„¶åå°±ç™»é™†ä¸è¿›å»äº†:sob:</p></blockquote><ul><li>ç™»å½•çš„ç”¨æˆ·idå˜æˆäº†æˆ‘çš„å¾®è½¯è´¦æˆ·å;  è¾“å…¥ä»€ä¹ˆå¯†ç éƒ½ä¸å¯¹(è´´å§å¾ˆå¤šäººè¯´æ˜¯å¾®è½¯å¯†ç ; ä½†æ˜¯æ— æ³•è”ç½‘,ä¹Ÿæ²¡æ³•éªŒè¯å¯¹ä¸å¯¹)</li></ul><blockquote><p><strong>äºæ˜¯è´´å§é‡Œçš„ä¸€ä¸ªå¸–å­:</strong>  åšä¸»åå­—:<a href="https://tieba.baidu.com/p/6619675494?red_tag=3379245281" target="_blank" rel="noopener">å±±æœˆ<img src="https://tb1.bdstatic.com/tb/cms/nickemoji/3-34.png" alt="img"></a></p></blockquote><ul><li>æ‰¾å‡ºä¸€ä¸ªUç›˜ï¼ŒæŠŠUç›˜æ–‡ä»¶å¤‡ä»½</li><li>ç”¨å¦ä¸€å°ç”µè„‘ï¼Œæ’å…¥Uç›˜ï¼Œä¸‹è½½å¾®peç³»ç»Ÿåˆ°Uç›˜ï¼Œå…·ä½“å¯è§ç™¾åº¦ç»éªŒ<a href="https://jingyan.baidu.com/article/6fb756ec44a2cb241858fbfe.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/6fb756ec44a2cb241858fbfe.html</a></li><li>ä½ çš„é‚£å°å¿˜è®°å¯†ç çš„ç”µè„‘ï¼Œé‡å¯ï¼Œè¿›å…¥biosèœå•ï¼Œè¿›å…¥æ»¡å±å¹•è‹±æ–‡â€”ç„¶åé€‰æ‹©USB storage deviceï¼Œå›è½¦</li><li>è¿›å…¥å¾®peç³»ç»Ÿç•Œé¢ï¼Œç‚¹dism+ï¼Œï¼Œå‡ºç°ä»€ä¹ˆéƒ½ç‚¹æ¥å—ï¼Œç„¶åè¿›å…¥ä¸“å®¶æ¨¡å¼ï¼Œé€‰æ‹©<strong>å¦ä¸€ä¸ªç›˜</strong>ï¼Œâ€”â€”æ¢å¤åŠŸèƒ½ï¼Œå¼•å¯¼ä¿®å¤</li><li>ä½ ä¼šç¥å¥‡çš„å‘ç°â€”å®ƒèƒ½ç”¨PINç è¿›å…¥äº†</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®°å½•/è¸©å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¸©å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVAçš„JUC</title>
      <link href="/2020/06/05/JAVA%E7%9A%84JUC/"/>
      <url>/2020/06/05/JAVA%E7%9A%84JUC/</url>
      
        <content type="html"><![CDATA[<h1 id="JUC"><a href="#JUC" class="headerlink" title="JUC"></a>JUC</h1><h2 id="JUCæ˜¯å•¥-ä¸ºä»€ä¹ˆè¦ç”¨JUC"><a href="#JUCæ˜¯å•¥-ä¸ºä»€ä¹ˆè¦ç”¨JUC" class="headerlink" title="JUCæ˜¯å•¥  /  ä¸ºä»€ä¹ˆè¦ç”¨JUC"></a>JUCæ˜¯å•¥  /  ä¸ºä»€ä¹ˆè¦ç”¨JUC</h2><p><img src="C:%5CUsers%5C25778%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200903222641670.png" alt="image-20200903222641670"></p><blockquote><p>JUCæ˜¯åœ¨çº¿ç¨‹çš„åŸºç¡€ä¸Š ä¸ºäº†é«˜æ•ˆè§£å†³å¹¶å‘é—®é¢˜  å¹¶ä¸”å……åˆ†åˆ©ç”¨cpu</p></blockquote><p>å¹¶å‘: å¤šä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ª<strong>å…±åŒèµ„æº</strong> â€“ cpu, æ¨¡æ‹Ÿå‡ºæ¥å¤šä¸ªçº¿ç¨‹, åªè¦åˆ‡æ¢æ‰§è¡Œçš„<strong>å¿«</strong>  é‚£å°±æ˜¯ç‰›é€¼!!!!  (æœ¬è´¨æ˜¯äº¤æ›¿æ‰§è¡Œ) </p><p>å¹¶è¡Œ: å’Œä¸²è¡Œç›¸å å¤§å®¶å¹¶æ’ä¸€èµ·èµ° â€“  å¤šæ ¸cpu</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// javaä»£ç çœ‹ä¸€ä¸‹è‡ªå·±çš„ å¤„ç†å™¨æ•°é‡</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Runtime<span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><img src="https://i.loli.net/2020/08/26/nUcurRmtT4aFlHe.png" alt="image.png"></p><h2 id="çº¿ç¨‹çš„åŸºç¡€"><a href="#çº¿ç¨‹çš„åŸºç¡€" class="headerlink" title="çº¿ç¨‹çš„åŸºç¡€"></a>çº¿ç¨‹çš„åŸºç¡€</h2><p><a href="#">å¯ä»¥çœ‹è¿™é‡Œ</a></p><h2 id="LOCKé”"><a href="#LOCKé”" class="headerlink" title="LOCKé”"></a>LOCKé”</h2><p>ä¾‹å­:</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç”¨lockä»£æ›¿synchronized</span><span class="token keyword">private</span> Lock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä¸šåŠ¡é€»è¾‘</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å…³é—­é”</span><span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨è¿‡ç¨‹:</p><ol><li>åˆ›å»ºé”çš„å®ä¾‹</li><li>åŠ é”</li><li>finallyä¸­é‡Šæ”¾é”</li></ol><p>åˆ†ä¸ºå¯é‡å…¥é”/ è¯»é”å’Œå†™é”</p><p>å…¬å¹³é”</p><p>éå…¬å¹³é”</p><blockquote><p>Synchronizedå’ŒLock</p></blockquote><p><a href="https://www.bilibili.com/video/BV1B7411L7tE?p=6" target="_blank" rel="noopener">P6ã€Synchronizedå’ŒLockåŒºåˆ«</a> </p><h2 id="ç”Ÿäº§è€…-æ¶ˆè´¹è€…"><a href="#ç”Ÿäº§è€…-æ¶ˆè´¹è€…" class="headerlink" title="ç”Ÿäº§è€… / æ¶ˆè´¹è€…"></a>ç”Ÿäº§è€… / æ¶ˆè´¹è€…</h2><p>åœ¨javaçº¿ç¨‹ä¸­ åˆ©ç”¨ synchronized/wait/notify å®ç°äº†</p><blockquote><p>Condition ç²¾å‡†é€šçŸ¥å’Œå”¤é†’çº¿ç¨‹</p></blockquote><p>Condition: å’Œobj çš„wait notify notifyall æœ‰å¯¹åº”æ–¹æ³•</p><p>ä¸€ä¸ªCondition å®ä¾‹æœ¬è´¨ä¸Šç»‘å®šåˆ°ä¸€ä¸ªé”. </p><p>â€“ åˆ©ç”¨Condition å®ç°ç²¾å‡†å”¤é†’</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è®©ä¸‰ä¸ªçº¿ç¨‹ä¸€æ¬¡ç­‰å¾…å’Œå”¤é†’</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        DataClass dataClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                dataClass<span class="token punctuation">.</span><span class="token function">change1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                dataClass<span class="token punctuation">.</span><span class="token function">change2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                dataClass<span class="token punctuation">.</span><span class="token function">change3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// èµ„æºç±»</span><span class="token keyword">class</span> <span class="token class-name">DataClass</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Lock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> Condition condition1 <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ›å»ºç›‘è§†å™¨1</span>    <span class="token keyword">private</span> Condition condition2 <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ›å»ºç›‘è§†å™¨2</span>    <span class="token keyword">private</span> Condition condition3 <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ›å»ºç›‘è§†å™¨3</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">change1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ä¿®æ”¹æ•°æ®ä¸º1 é€šçŸ¥2å·ç›‘è§†å™¨</span>        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>number <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                condition1<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å’Œwaitç”¨å¤„ç›¸åŒ</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>number <span class="token operator">+</span> <span class="token string">"::"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            condition2<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// == notofy</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å…³é—­é”</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">change2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// ä¿®æ”¹nummber ä¸º2; é€šçŸ¥3å·ç›‘è§†å™¨ </span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">change3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// ä¿®æ”¹nummber ä¸º0; é€šçŸ¥1å·ç›‘è§†å™¨ </span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é”-é”æ˜¯å•¥-é”ä»€ä¹ˆ"><a href="#é”-é”æ˜¯å•¥-é”ä»€ä¹ˆ" class="headerlink" title="é”: é”æ˜¯å•¥, é”ä»€ä¹ˆ"></a>é”: é”æ˜¯å•¥, é”ä»€ä¹ˆ</h2><blockquote><p>å¯¹è±¡é”: </p></blockquote><p>å°±æ˜¯é”å¯¹è±¡: æ¯ä¸ªå¯¹è±¡ä¸€æŠŠé” </p><pre class=" language-java"><code class="language-java">æ¯å¯¹Aè¿›è¡Œä¸€æ¬¡å¯¹è±¡åˆ›å»º å°±æ–°è·å–ä¸€æŠŠé” æ‰€ä»¥ åŒä¸€ä¸ªå¯¹è±¡çš„é”ä¼šé˜»å¡<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç±»é”</p></blockquote><p>å°±æ˜¯é”å¯¹è±¡: æ¯ä¸ªå¯¹è±¡ä¸€æŠŠé” </p><pre class=" language-java"><code class="language-java">ä¸ç®¡æœ‰å¤šå°‘ä¸ªå¯¹è±¡ åªè¦æ˜¯ä½¿ç”¨ <span class="token keyword">static</span> <span class="token keyword">synchronized</span> é” é‚£å°±æ˜¯åŒä¸€æŠŠé” å°±ä¼šé˜»å¡    <span class="token comment" spellcheck="true">// æµ‹è¯•äº†ä¸€ä¸‹ synchronized static å’Œstatic synchronized æ˜¯ä¸€æ ·çš„ </span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç±»é”å’Œ å¯¹è±¡é”æ²¡æœ‰ç›´æ¥å…³ç³» å¹¶ä¸æ˜¯é€šä¸€æŠŠé”</p></blockquote><p>ç°åœ¨æœ‰å…¸å‹çš„å…«é”é—®é¢˜å¦‚æœç†è§£äº†å°±ä¼šå¾ˆç®€å•:</p><blockquote><p>ã€€    â‘ ä¸¤ä¸ªæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼Œæ ‡å‡†æ‰“å°ï¼Œ æ‰“å°? //one </p><p>ã€€ã€€â‘¡æ–°å¢ Thread.sleep() ç»™ one() ,æ‰“å°?//one</p><p>ã€€ã€€â‘¢æ–°å¢æ™®é€šæ–¹æ³• three() , æ‰“å°? //three one two</p><p>ã€€ã€€â‘£ä¸¤ä¸ªæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ª Dataå¯¹è±¡ï¼Œæ‰“å°? //two one</p><p>ã€€ã€€â‘¤ä¿®æ”¹ one() ä¸ºé™æ€åŒæ­¥æ–¹æ³•ï¼Œæ‰“å°? //two one</p><p>ã€€ã€€â‘¥ä¿®æ”¹ä¸¤ä¸ªæ–¹æ³•å‡ä¸ºé™æ€åŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªDataå¯¹è±¡? //one two</p><p>ã€€ã€€â‘¦ä¸€ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªéé™æ€åŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ª Dataå¯¹è±¡? //two one</p><p>ã€€ã€€â‘§ä¸¤ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼Œä¸¤ä¸ª Dataå¯¹è±¡? //one two</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>    Data date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>        date1<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ç¡çœ ä¸€ç§’</span>    TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>        date1<span class="token punctuation">.</span><span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">three</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è¯»å†™é”"><a href="#è¯»å†™é”" class="headerlink" title="è¯»å†™é”"></a>è¯»å†™é”</h2><blockquote><p>ReadWriteLock </p><p>è¯»æ—¶å¯ä»¥å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯», å†™çš„æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»å†™</p></blockquote><p>ç‹¬å é”: è¯»é”: åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”</p><p>å…±äº«é”: å¤šä¸ªçº¿ç¨‹å…±äº«çš„ä¸€ä¸ªé”</p><p>ä¾‹å­:</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è¯»å†™ä¸€ä¸ªç±»ä¼¼ç¼“å­˜çš„ä¸œè¥¿</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Cache cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// åˆ›å»º20ä¸ªçº¿ç¨‹å†™å…¥</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">final</span> <span class="token keyword">int</span> temp <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// lambda éœ€è¦finalä¼ é€’å˜é‡</span>            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> cache<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ›å»º10ä¸ªçº¿ç¨‹è¯»å–</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">final</span> <span class="token keyword">int</span> temp <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> cache<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">volatile</span> HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> cacacheMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> ReadWriteLock readWriteLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å†™æ“ä½œ ç‹¬å é” ç”¨å†™é”</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                readWriteLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Thread:"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"==å†™å…¥"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                cacacheMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Thread:"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"==æˆåŠŸ"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                readWriteLock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// è¯»æ“ä½œ å…±äº«çš„æ‰€ä»¥ç”¨è¯»é”</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            readWriteLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Thread:"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"==è¯»"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                cacacheMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Thread:"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"==æˆåŠŸè¯»"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                readWriteLock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å¹¶å‘ä¸‹çš„é›†åˆé—®é¢˜"><a href="#å¹¶å‘ä¸‹çš„é›†åˆé—®é¢˜" class="headerlink" title="å¹¶å‘ä¸‹çš„é›†åˆé—®é¢˜"></a>å¹¶å‘ä¸‹çš„é›†åˆé—®é¢˜</h2><h3 id="COWå†™æ—¶æ‹·è´"><a href="#COWå†™æ—¶æ‹·è´" class="headerlink" title="COWå†™æ—¶æ‹·è´"></a>COWå†™æ—¶æ‹·è´</h3><p>è¦äº†è§£ä¸€ä¸ªæ€æƒ³ å«åš COW å³ å†™æ—¶æ‹·è´ (copy - on - write)</p><blockquote><p>è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥;</p></blockquote><p>å½“ç„¶ä¹Ÿæœ‰ ç”¨è¯»å†™åˆ†ç¦»çš„æ‰‹æ³•è§£å†³</p><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><ul><li>ä¼—æ‰€å‘¨çŸ¥, ArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„æ‰€ä»¥å¦‚æœå¹¶å‘ä¿®æ”¹æˆ–è€…æ·»åŠ  å°±ä¼šäº§ç”Ÿ<strong>å¹¶å‘ä¿®æ”¹å¼‚å¸¸</strong>(ConcurrentModifyException) <code>java.util.ConcurrentModificationException</code></li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æµ‹è¯•å¼‚å¸¸çš„ä»£ç </span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>Integer i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 50ä¸ªçº¿ç¨‹å†™å…¥</span>    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// éšæœºä¸€ä¸ª3ä½çš„id</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è§£å†³åŠæ³•:</p><ul><li>ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆ vector:</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// vector åŠ äº†synchronized é”</span>æºç <span class="token operator">:</span><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">addElement</span><span class="token punctuation">(</span>E obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token function">ensureCapacityHelper</span><span class="token punctuation">(</span>elementCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    elementData<span class="token punctuation">[</span>elementCount<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>ç”¨ä¸€ä¸ªé›†åˆå·¥å…·ç±»å®ç°å®‰å…¨çº¿ç¨‹Collections.synchronizedXXX</li></ul><pre class=" language-java"><code class="language-java">List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> Collections<span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li>ä½¿ç”¨JUCçš„å®‰å…¨é›†åˆ CopyOnWriteAArrayLis();</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä½¿ç”¨äº†COW</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span>E e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> ReentrantLock lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">;</span>    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        Object<span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        Object<span class="token punctuation">[</span><span class="token punctuation">]</span> newElements <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        newElements<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        <span class="token function">setArray</span><span class="token punctuation">(</span>newElements<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ol><li>collectionsçš„çº¿ç¨‹å®‰å…¨æ–¹æ³•</li><li>cowSet</li></ol><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>setåº•å±‚å®ç°æ˜¯æ ¹æ®Hashmapå®ç°çš„ (keyå”¯ä¸€, value æ˜¯ä¸€ä¸ªå›ºå®šçš„å¯¹è±¡) mapå…·ä½“çš„å®ç°æ–¹å¼</p><p><a href="#">å…³äºHashmap</a></p><h2 id="å¹¶å‘ä½¿ç”¨-ConcurrentHashMap"><a href="#å¹¶å‘ä½¿ç”¨-ConcurrentHashMap" class="headerlink" title="å¹¶å‘ä½¿ç”¨ ConcurrentHashMap"></a>å¹¶å‘ä½¿ç”¨ ConcurrentHashMap</h2><blockquote><p>æŒ–å‘ ä¸ºä»€ä¹ˆå¥½ç”¨ å®ç°æ–¹å¼ å¹¶å‘å®‰å…¨æ–¹å¼</p></blockquote><h2 id="Callable"><a href="#Callable" class="headerlink" title="Callable"></a>Callable</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Callable</span><span class="token operator">&lt;</span>V<span class="token operator">></span> <span class="token punctuation">{</span>  V <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç±»ä¼¼äºRunnable å…¶å®ä¾‹éƒ½æ˜¯å¯èƒ½ç”±å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè®¾è®¡çš„.ä½†æ˜¯Callable æœ‰è¿”å›ç»“æœ&lt;è¿™ä¸ªTypeå°±æ˜¯è¿”å›ç±»å‹&gt; æœ‰ä¸€ä¸ªå¼‚å¸¸</p><ul><li>Threadæ²¡æœ‰Callableæ¥å£çš„ç›´æ¥å®ç° è¦é€šè¿‡Runnable çš„FutureTask å®ç°</li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CallableDEmo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ExecutionException<span class="token punctuation">,</span> InterruptedException <span class="token punctuation">{</span>        MYhread mYhread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MYhread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        FutureTask<span class="token operator">&lt;</span>String<span class="token operator">></span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>mYhread<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">,</span> <span class="token string">"222"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// get æ–¹æ³•å¯èƒ½é˜»å¡</span>        <span class="token comment" spellcheck="true">//     ä¼šæœ‰ç¼“å­˜</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">MYhread</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"====Back"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"back"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="ä¸‰ä¸ªè¾…åŠ©ç±»"><a href="#ä¸‰ä¸ªè¾…åŠ©ç±»" class="headerlink" title="ä¸‰ä¸ªè¾…åŠ©ç±»"></a>ä¸‰ä¸ªè¾…åŠ©ç±»</h3><blockquote><p>CountDownLatch</p></blockquote><p>ä¸€ä¸ªå€’è®¡æ•°å·¥å…·  </p><p> <code>æ„é€ æ–¹æ³•</code>æœ‰ä¸€ä¸ªint æ•°æ® </p><ul><li>countDown() è®¡æ•°å‡ä¸€ </li><li>await()  è°ƒç”¨æ­¤æ–¹æ³•ä¼šè®©è¯¥å½“å‰çº¿ç¨‹ç­‰å¾… è®¡æ•°å™¨ç›´åˆ°è®¡æ•°å™¨å½’é›¶ </li></ul><blockquote><p>CyclicBarrier</p></blockquote><p>å’Œä¸Šé¢çš„ç›¸å æ˜¯æ­£å‘è®¡æ•°</p><p>  <code>æ„é€ æ–¹æ³•</code>  1. int a 2, int a, Runnable çº¿ç¨‹</p><p>ä¹Ÿæœ‰awaitæ–¹æ³• ï¼š åŒä¸€ä¸ªçº¿ç¨‹å†…çš„æ–¹æ³•</p><blockquote><p>Semaphore ä¿¡å·é‡</p></blockquote><p>å¯ä»¥ç†è§£ä¸ºé™æµ æ„é€ æ–¹æ³• æœ‰çº¿ç¨‹æ•°</p><p> å¦‚æœä½ç½®æ•°é‡ä¸º3  çº¿ç¨‹æ•°ä¸º6å°±éœ€è¦æ’é˜Ÿ </p><p>acquire() è·å–/release() é‡Šæ”¾</p><p>åœ¨ semaphore.acquire() å’Œ semaphore.release()ä¹‹é—´çš„ä»£ç ï¼ŒåŒä¸€æ—¶åˆ»åªå…è®¸æŒ‡å®šä¸ªæ•°çš„çº¿ç¨‹è¿›å…¥ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…</p><hr><ul><li>CountDownLatch æ˜¯ä¸€æ¬¡æ€§çš„ï¼ŒCyclicBarrier æ˜¯å¯å¾ªç¯åˆ©ç”¨çš„</li><li>CountDownLatch å‚ä¸çš„çº¿ç¨‹çš„èŒè´£æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ‰çš„åœ¨å€’è®¡æ—¶ï¼Œæœ‰çš„åœ¨ç­‰å¾…å€’è®¡æ—¶ç»“æŸã€‚CyclicBarrier å‚ä¸çš„çº¿ç¨‹èŒè´£æ˜¯ä¸€æ ·çš„</li></ul><h2 id="å¹¶å‘é˜Ÿåˆ—"><a href="#å¹¶å‘é˜Ÿåˆ—" class="headerlink" title="å¹¶å‘é˜Ÿåˆ—"></a>å¹¶å‘é˜Ÿåˆ—</h2><h3 id="é˜»å¡é˜Ÿåˆ—"><a href="#é˜»å¡é˜Ÿåˆ—" class="headerlink" title="é˜»å¡é˜Ÿåˆ—"></a>é˜»å¡é˜Ÿåˆ—</h3><p><code>BlockingQueue</code></p><p><img src="https://i.loli.net/2020/09/27/3cyaRXPigpKCjA6.png" alt="é˜»å¡é˜Ÿåˆ—"></p><p>å››ç§ä¸åŒåº”ç”¨åœºåˆçš„API</p><table><thead><tr><th></th><th>æŠ›å‡ºå¼‚å¸¸</th><th>æœ‰è¿”å›å€¼</th><th>é˜»å¡</th><th>ç­‰å¾…é˜»å¡()</th></tr></thead><tbody><tr><td>æ·»åŠ </td><td>add</td><td>offer</td><td>put</td><td>offer(E e, long timeout, TimeUnit unit)</td></tr><tr><td>ç§»é™¤</td><td>remove</td><td>poll</td><td>take</td><td>poll(E e, long timeout, TimeUnit unit)</td></tr><tr><td>æ£€æµ‹é˜Ÿé¦–å…ƒç´ </td><td>element</td><td>peek</td><td>-</td><td>-</td></tr></tbody></table><blockquote><p> åŸç†(å¾…å®Œæˆ)</p></blockquote><h3 id="åŒæ­¥é˜Ÿåˆ—"><a href="#åŒæ­¥é˜Ÿåˆ—" class="headerlink" title="åŒæ­¥é˜Ÿåˆ—"></a>åŒæ­¥é˜Ÿåˆ—</h3><p><code>SynchronousQueue</code>   </p><ul><li>ä¸å­˜å‚¨æ•°æ® </li><li>æ·»åŠ ä¸€ä¸ªç­‰å¾…å–å‡ºä¸€ä¸ª</li></ul><h2 id="çº¿ç¨‹æ± -é‡è¦"><a href="#çº¿ç¨‹æ± -é‡è¦" class="headerlink" title="çº¿ç¨‹æ± (é‡è¦)"></a>çº¿ç¨‹æ± (é‡è¦)</h2><blockquote><p> æ± åŒ–æŠ€æœ¯(ä¸€ç§æ€æƒ³)</p></blockquote><p>ç¨‹åºè¿è¡Œä½¿ç”¨ç³»ç»Ÿçš„èµ„æº. å¯¹å…¶ä¼˜åŒ– å°±ä½¿ç”¨<strong>æ± åŒ–æŠ€æœ¯</strong></p><p>å°†èµ„æºåˆ›å»ºå¥½ éœ€è¦çš„åŒ–å°±æ¥å–. ç”¨å®Œä¹Ÿä¸é”€æ¯ è€Œæ˜¯æ”¾å›æ± å­ä¸­ </p><p>çº¿ç¨‹æ± , è¿æ¥æ± , å†…å­˜æ± , å¯¹è±¡æ± â€¦.</p><ul><li>ä¼˜ç‚¹å’Œå¥½å¤„</li></ul><ol><li>é™ä½èµ„æºçš„æ¶ˆè€—</li><li>æé«˜å“åº”çš„é€Ÿåº¦</li><li>æ–¹ä¾¿ç»Ÿä¸€ç®¡ç† â€¦â€¦</li></ol><p>==çº¿ç¨‹å¤ç”¨ , å¯ä»¥æ§åˆ¶æ›´å¤§çš„å¹¶å‘é‡ ,==</p><blockquote><p> çº¿ç¨‹æ± çš„  <code>å››(äº”)ä¸ªåˆ›å»ºæ–¹æ³•</code>, <code>ä¸ƒå¤§å‚æ•°</code>,<code>å››ç§ç­–ç•¥</code></p></blockquote><h3 id="ä¸‰ä¸ªæ–¹æ³•"><a href="#ä¸‰ä¸ªæ–¹æ³•" class="headerlink" title="ä¸‰ä¸ªæ–¹æ³•"></a>ä¸‰ä¸ªæ–¹æ³•</h3><p>çº¿ç¨‹æ± å·¥å…·ç±»: Exectors</p><ul><li><code>newCachedThreadPool</code>   <strong>çµæ´»çš„</strong>åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€æ±‚ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹</li><li><code>newFixedThreadPool(int nThreads)</code> åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œ<strong>*\</strong>è¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…**</li><li><code>newScheduledThreadPool</code> åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œ<strong>æ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ</strong></li><li><code>newSingleThreadExecutor</code> åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± </li></ul><p>åœ¨é˜¿é‡Œçš„å¼€å‘è€…æ‰‹å†Œä¸­æåˆ°çº¿ç¨‹æ± çš„åˆ›å»ºå»ºè®®</p><p><img src="https://i.loli.net/2020/09/28/8XBYQKzxUTm5fsq.png" alt="image.png"></p><h3 id="ä¸ƒä¸ªå‚æ•°"><a href="#ä¸ƒä¸ªå‚æ•°" class="headerlink" title="ä¸ƒä¸ªå‚æ•°"></a>ä¸ƒä¸ªå‚æ•°</h3><p>ä¸Šé¢å››ç§åˆ›å»ºæ–¹æ³•éƒ½æ˜¯ç”¨ThreadPoolExecutoråˆ›å»ºçš„ æ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨ThreadPoolExecutoræ¥åˆ›å»º</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token function">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>     <span class="token comment" spellcheck="true">// æ ¸å¿ƒçº¿ç¨‹å¤§å°</span>                          <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// æœ€å¤§æ ¸å¿ƒçº¿ç¨‹æ•°  </span>                          <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// è¶…æ—¶æ—¶é—´è®¾ç½®</span>                          TimeUnit unit<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// å•ä½</span>                          BlockingQueue<span class="token operator">&lt;</span>Runnable<span class="token operator">></span> workQueue<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// é˜»å¡é˜Ÿåˆ—</span>                          ThreadFactory threadFactory<span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">// çº¿ç¨‹å·¥å‚    </span>                          RejectedExecutionHandler handler<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// æ‹’ç»ç­–ç•¥</span></code></pre><ul><li>å›¾è§£ä¸€ä¸‹è¿™ä¸ƒä¸ªå‚æ•°</li></ul><p>è“è‰²æ­£å¸¸ä¸ä¼šæ‰“å¼€ è€Œéœ€è¦æ—¶æ‰ä¼šå¼€å¯</p><p><img src="https://i.loli.net/2020/09/29/8swyPAmX467x9Lg.png" alt="æ­£å¸¸çŠ¶æ€"></p><p><img src="https://i.loli.net/2020/09/29/lFGKJ1zEs6Nf2OR.png" alt="æ‹’ç»ç­–ç•¥"></p><p>å¦‚æœçº¿ç¨‹æ± å’Œé˜Ÿåˆ—æ»¡äº†å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥</p><h3 id="å››ç§æ‹’ç»ç­–ç•¥"><a href="#å››ç§æ‹’ç»ç­–ç•¥" class="headerlink" title="å››ç§æ‹’ç»ç­–ç•¥"></a>å››ç§æ‹’ç»ç­–ç•¥</h3><p>RejectedExecutionHandler æ‹’ç»ç­–ç•¥æ¥å£</p><ul><li>DiscardPolicy  é»˜è®¤çš„æ‹’ç»ç­–ç•¥ã€‚ç›´æ¥æŠ›å‡º java.util.concurrent.RejectedExecutionExceptionå¼‚å¸¸</li><li>CallerRunsPolicy  å°†ä»»åŠ¡è¿”è¿˜ç»™è°ƒç”¨è€…çº¿ç¨‹æ‰§è¡Œ</li><li>DiscardPolicy  ç›´æ¥æŠ›å¼ƒæ— æ³•å¤„ç†çš„ä»»åŠ¡ï¼Œä¸äºˆå¤„ç†ä¸æŠ›å¼‚å¸¸ã€‚å¦‚æœä¸šåŠ¡æ±‡æ€»<strong>å…è®¸ä»»åŠ¡ä¸¢å¤±</strong>ï¼Œè¿™æ˜¯æœ€å¥½çš„ç­–ç•¥</li><li>DiscardOldestPolicy  æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ï¼Œç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­å°è¯•å†æ¬¡æäº¤å½“å‰ä»»åŠ¡</li></ul><blockquote><p>çº¿ç¨‹æ± ä»£ç </p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadPoolTest</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> CORE_POLL_SIZE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_NUM_POLL_SIZE <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> Long KEEP_ALIVWTIME <span class="token operator">=</span> 20L<span class="token punctuation">;</span>    <span class="token keyword">private</span> BlockingQueue workQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> ThreadPoolExecutor <span class="token function">getThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> threadPoolExecutor<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> ThreadPoolExecutor threadPoolExecutor <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">ThreadPoolTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        ThreadPoolExecutor pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>                CORE_POLL_SIZE<span class="token punctuation">,</span>                MAX_NUM_POLL_SIZE<span class="token punctuation">,</span>                KEEP_ALIVWTIME<span class="token punctuation">,</span>                TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span>                workQueue<span class="token punctuation">,</span>                Executors<span class="token punctuation">.</span><span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>CallerRunsPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        threadPoolExecutor <span class="token operator">=</span> pool<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ThreadPoolTest threadPoolTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ThreadPoolExecutor threadPoolExecutor <span class="token operator">=</span> threadPoolTest<span class="token punctuation">.</span><span class="token function">getThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> finalI <span class="token operator">=</span> i<span class="token punctuation">;</span>            threadPoolExecutor<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰:"</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"==="</span> <span class="token operator">+</span> finalI<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        threadPoolExecutor<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="è°ƒä¼˜éƒ¨åˆ†"><a href="#è°ƒä¼˜éƒ¨åˆ†" class="headerlink" title="è°ƒä¼˜éƒ¨åˆ†"></a>è°ƒä¼˜éƒ¨åˆ†</h4><blockquote><p>å¦‚ä½•å®šä¹‰è¿™ä¸ªæœ€å¤§çš„çš„çº¿ç¨‹æ•°å‘¢</p></blockquote><ol><li>cpuå¯†é›†å‹ : å‡ æ ¸å°±ç”¨å‡ ä¸ªæœ€å¤§çº¿ç¨‹æ•° cpuåˆ©ç”¨ç‡æœ€å¤§</li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è·å–æœºå™¨æ ¸æ•°</span><span class="token keyword">int</span> processors <span class="token operator">=</span> Runtime<span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol><li>IOå¯†é›†å‹: å¤§äº number(ç¨‹åºä¸­ååˆ†æ¶ˆè€—IOçš„çº¿ç¨‹æ•°)çš„æ•°é‡ (å¯ä»¥æ˜¯numberçš„ä¸¤å€);</li></ol><h2 id="ForkJoin-å¤§æ•°æ®é‡-æœªå®Œæˆ"><a href="#ForkJoin-å¤§æ•°æ®é‡-æœªå®Œæˆ" class="headerlink" title="ForkJoin(å¤§æ•°æ®é‡)(æœªå®Œæˆ)"></a>ForkJoin(å¤§æ•°æ®é‡)(æœªå®Œæˆ)</h2><p>å°† å¤§ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå°ä»»åŠ¡ ç„¶åè¿›è¡Œå¤„ç†  â€“ é€’å½’</p><blockquote><p>å·¥ä½œçªƒå– åˆ©ç”¨(åŒç«¯é˜Ÿåˆ—)</p><p>A, B ä¸¤ä¸ªçº¿ç¨‹ Açº¿ç¨‹æ‰§è¡Œç»“æŸ </p><p>Bçº¿ç¨‹è¿˜æœ‰ä»»åŠ¡  Aå°±çªƒå–Bçš„ä»»åŠ¡å»å¤„ç†</p></blockquote><p>ä¾‹å­</p><ol><li>é€šè¿‡forkjoinpoolæ¥æ‰§è¡Œ </li><li>å°†ä»»åŠ¡ forkjoinpool.execute/forkjoinpool.submit(ForkJoinTask  task(ä»»åŠ¡))</li><li>ä»»åŠ¡ç±» è¦ç»§æ‰¿ ForkJoinTask(RecursiveTaskæ˜¯å…¶ä¸­ä¸€ä¸ªå­ç±»)</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">RecursiveTask</span><span class="token operator">&lt;</span>Long<span class="token operator">></span> <span class="token punctuation">{</span>       <span class="token keyword">long</span> temp <span class="token operator">=</span> 10000L<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸´ç•Œå€¼</span><span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> Long <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>end <span class="token operator">-</span> st<span class="token punctuation">)</span> <span class="token operator">&lt;</span> temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>            Long sum <span class="token operator">=</span> 0L<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> st<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> sum<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">long</span> l <span class="token operator">=</span> st <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> st<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            Demo d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>            d1<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Demo d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>            d2<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> d1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> d2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¸‰ç§æ–¹æ³•å®ç° 1 - 40äº¿çš„ç›¸åŠ </span><span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ExecutionException<span class="token punctuation">,</span> InterruptedException <span class="token punctuation">{</span>        <span class="token keyword">long</span> x <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> sum <span class="token operator">=</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> x1 <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"sum"</span> <span class="token operator">+</span> sum <span class="token operator">+</span> <span class="token string">"time:"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x1 <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">long</span> sum <span class="token operator">=</span> 0L<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> 40_0000_0000L<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> ExecutionException<span class="token punctuation">,</span> InterruptedException <span class="token punctuation">{</span>        ForkJoinPool pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Demo demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>0L<span class="token punctuation">,</span> 40_0000_0000L<span class="token punctuation">)</span><span class="token punctuation">;</span>        ForkJoinTask<span class="token operator">&lt;</span>Long<span class="token operator">></span> submit <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> submit<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// Stream å¹¶è¡Œæµ</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> LongStream<span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span>0L<span class="token punctuation">,</span> 40_0000_0000L<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Long<span class="token operator">:</span><span class="token operator">:</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ç»“æœ:</p><blockquote><p>æ•°æ®é‡è¶Šå¤§è¶Šèƒ½ä½“ç°å‡ºåŒºåˆ«</p><ol><li><p><strong>forå¾ªç¯ç›¸åŠ :</strong>  time:3427 </p></li><li><p><strong>ForkJoin:</strong>  time:13310 /time:10786(æ›´æ”¹äº†ä¸´ç•Œå€¼)  å’Œè¿™ä¸ªä¹Ÿæœ‰å…³ç³»</p></li><li><p>streamå¹¶è¡Œæµè®¡ç®—(å†…éƒ¨å®ç°çš„æ˜¯ForkJoin)time:7933 </p></li></ol></blockquote><p>è¿™é‡Œå‘ç° forå¾ªç¯ è¦æ¯”å…¶ä»–çš„å¿« : å…¶å®ForkJoin å’Œå¹¶è¡Œæµéƒ½æ˜¯å¹¶å‘çš„æ“ä½œ æ ¹æ®CPUçš„æ€§èƒ½å†³å®šçš„ ä½†æ˜¯å°±ç®—ä½ çš„ä»»åŠ¡æ‹†åˆ†äº† ç³»ç»Ÿæ€§èƒ½ä¸æ”¯æŒ å¹¶è¡Œæ“ä½œ  / æˆ–è€…è¯´æ²¡æœ‰é‚£ä¹ˆå¤šèµ„æºæ»¡è¶³ä½ çš„æ“ä½œ é‚£ä¹ˆé€Ÿåº¦å½“ç„¶ä¼šæ¯”å•çº¿ç¨‹çš„æ…¢</p><p>å¹¶ä¸æ˜¯æ‰€æœ‰æ“ä½œä¸­å¹¶å‘æ“ä½œä¸€å®šæ•ˆç‡é«˜</p><h2 id="JAVAå¼‚æ­¥é€šä¿¡"><a href="#JAVAå¼‚æ­¥é€šä¿¡" class="headerlink" title="JAVAå¼‚æ­¥é€šä¿¡"></a>JAVAå¼‚æ­¥é€šä¿¡</h2><p>åœ¨å¤šçº¿ç¨‹ä¸­ è·å–ç°æˆçš„è¿”å›å€¼ æˆ–è€…è¿”å›çŠ¶æ€(æˆåŠŸ å¤±è´¥ å¼‚å¸¸â€¦) (AJAXçš„æ–¹å¼å¾ˆåƒ)</p><ul><li>ä¸ºäº†å®ç° å›è°ƒ  / å¼‚æ­¥ç¼–ç¨‹</li></ul><p><a href="https://www.jianshu.com/p/6f3ee90ab7d3/" target="_blank" rel="noopener">CompletableFutureå‡ ä¸ªæ–¹æ³•</a></p><p>Future(çˆ¶)   new CompletableFuture()(å­ç±»);</p><p>runAsync(Runnable) æ— è¿”å›å€¼çš„å¼‚æ­¥è°ƒç”¨ </p><p>supplyAsync(Runnable) æœ‰è¿”å›å€¼</p>]]></content>
      
      
      <categories>
          
          <category> ç±»åˆ« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVAæ³¨è§£</title>
      <link href="/2020/06/05/JAVA%E6%B3%A8%E8%A7%A3/"/>
      <url>/2020/06/05/JAVA%E6%B3%A8%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h1><h2 id="åŸºæœ¬æ¦‚è¿°"><a href="#åŸºæœ¬æ¦‚è¿°" class="headerlink" title="åŸºæœ¬æ¦‚è¿°"></a>åŸºæœ¬æ¦‚è¿°</h2><blockquote><ul><li>Annotation(æ³¨è§£):<ol><li>ä½œç”¨:<ol><li>å¯¹ç¨‹åºä½œå‡ºè§£é‡Š(å’Œæ³¨é‡Š(comment)ä¸€æ ·)</li><li>å¯ä»¥è¢«å…¶ä»–ç¨‹åºè¯»å–(ç¼–è¯‘å™¨ç­‰)</li></ol></li><li>æ ¼å¼ â€“ @æ³¨é‡Šå(å‚æ•°)</li><li>ä½œç”¨äºpackage/class/method/fieldç­‰ä¸Š, ç»™ä»–ä»¬æ·»åŠ äº†é¢å¤–çš„è¾…åŠ©ä¿¡æ¯,å¯ä»¥é€šè¿‡åå°„æœºåˆ¶å¯¹è¿™äº›å…ƒæ•°æ®è¿›è¡Œè®¿é—®</li></ol></li></ul></blockquote><h2 id="éƒ¨åˆ†å¸¸è§æ³¨è§£"><a href="#éƒ¨åˆ†å¸¸è§æ³¨è§£" class="headerlink" title="éƒ¨åˆ†å¸¸è§æ³¨è§£"></a>éƒ¨åˆ†å¸¸è§æ³¨è§£</h2><blockquote><ol><li><strong>@Override:</strong> é‡å†™è¶…ç´¯çš„æ–¹æ³• </li><li><strong>@Deprecated:</strong> å®šä¹‰ä¸ºåºŸå¼ƒçš„,ä¸æ¨èä½¿ç”¨, æˆ–è€…æœ‰æ›´å¥½çš„é€‰æ‹©</li><li><strong>SuppressWarnings:</strong> ç”¨æ¥æŠ‘åˆ¶ç¼–è¯‘æ—¶ çš„è­¦å‘Šä¿¡æ¯(å¼ºè¿«ç—‡ç¦åˆ©??) æœ‰å‚æ•°:<ol><li>(â€œallâ€)/(â€œUncheckedâ€)/(value = {â€œuncheckedâ€,â€deprecationâ€})</li></ol></li></ol></blockquote><h2 id="å…ƒæ³¨è§£"><a href="#å…ƒæ³¨è§£" class="headerlink" title="å…ƒæ³¨è§£"></a>å…ƒæ³¨è§£</h2><blockquote><p>å…ƒæ³¨è§£(Meta-Annotation) ç”¨æ¥æ³¨è§£å…¶ä»–æ³¨è§£, javaæä¾›äº†å››ä¸ªæ ‡å‡†å…ƒæ³¨è§£</p><ul><li><p>è¿™äº›ç±»å‹å’Œæ”¯æŒçš„ç±»åœ¨(java.lang.annotation)åŒ…ä¸­</p><ol><li><strong>@Target:</strong> æè¿°ä½œç”¨èŒƒå›´</li><li><strong>@Retention:</strong> è¡¨ç¤ºä¿å­˜æ³¨é‡Šçš„çº§åˆ«, æè¿°æ³¨é‡Šçš„ç”Ÿå‘½å‘¨æœŸ(SOURCE&lt;CLASS&lt;<strong>RUNTIME</strong>)</li><li><strong>@Document:</strong> è¯´æ˜è¯¥æ³¨é‡Šè¢«åŒ…å«åœ¨javadocä¸­</li><li><strong>@Inherited:</strong> è¯´æ˜å­ç±»å¯ä»¥<strong>ç»§æ‰¿</strong>çˆ¶ç±»çš„æ³¨é‡Š</li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æè¿°ä½œç”¨åŸŸ(ElementTYpe)</span><span class="token comment" spellcheck="true">//    TYPE, //æ¥å£ã€ç±»ã€æšä¸¾ã€æ³¨è§£</span><span class="token comment" spellcheck="true">//    FIELD,//å­—æ®µã€æšä¸¾çš„å¸¸é‡</span><span class="token comment" spellcheck="true">//    METHOD,  //æ–¹æ³•</span><span class="token comment" spellcheck="true">//    PARAMETER,  //æ–¹æ³•å‚æ•°</span><span class="token comment" spellcheck="true">//    CONSTRUCTOR,   //æ„é€ å‡½æ•°</span><span class="token comment" spellcheck="true">//    LOCAL_VARIABLE,  //å±€éƒ¨å˜é‡</span><span class="token comment" spellcheck="true">//    ANNOTATION_TYPE, //æ³¨è§£</span><span class="token comment" spellcheck="true">//    PACKAGE   //åŒ…</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span> ElementType<span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç”Ÿå‘½å‘¨æœŸ(RetentionPolicy)</span><span class="token comment" spellcheck="true">//    SOURCE, // æºç </span><span class="token comment" spellcheck="true">//    CLASS,  // ç±»</span><span class="token comment" spellcheck="true">//    RUNTIME // è¿è¡Œæ—¶</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>value <span class="token operator">=</span> RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// åœ¨javaDocä¸­</span><span class="token annotation punctuation">@Documented</span><span class="token comment" spellcheck="true">// å­ç±»å¯ç»§æ‰¿</span><span class="token annotation punctuation">@Inherited</span>@<span class="token keyword">interface</span> <span class="token class-name">MyAnnotation</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre></li></ul></blockquote><h2 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h2><blockquote><p>ä½¿ç”¨<strong>@interface</strong>æ¥å£°æ˜è‡ªå®šä¹‰æ³¨è§£,<kbd>public @interface name{å†…å®¹}</kbd>  </p><ul><li>è‡ªåŠ¨ç»§æ‰¿Annotationæ¥å£</li><li>å¯¹äºå‚æ•°<ol><li>æ ¼å¼:  <strong>ç±»å‹ åç§°();</strong></li><li>å†…éƒ¨æ¯ä¸€ä¸ªæ–¹æ³•å…¶å®æ˜¯ä¸ªå‚æ•°  è¿”å›å€¼ç±»å‹å°±æ˜¯å‚æ•°ç±»å‹(åªèƒ½æ˜¯åŸºæœ¬ç±»)</li><li>å¯ä»¥é€šè¿‡defaultæ¥é»˜è®¤å‚æ•°</li><li>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æˆå‘˜, ä¸€èˆ¬å‘½åä¸ºValue</li><li>æ³¨è§£å…ƒç´ å¿…é¡»è¦æœ‰å€¼,é€šå¸¸ä½¿ç”¨é»˜è®¤ä¸º: ç©ºå­—ç¬¦ä¸²å’Œ0</li></ol></li></ul></blockquote><pre class=" language-java"><code class="language-java"><span class="token operator">/</span> å®šä¹‰ä½œç”¨åŸŸ<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>ElementType<span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span> ElementType<span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å®šä¹‰ç”Ÿå‘½å‘¨æœŸ</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>@<span class="token keyword">interface</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å‚æ•°æ ¼å¼: ç±»å‹ åå­—();</span>    <span class="token comment" spellcheck="true">// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°å»ºè®®ä½¿ç”¨value å› ä¸ºå¡«å†™å‚æ•°æ—¶å¯ä»¥çœç•¥(value = )</span>    String <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è®¾ç½®é»˜è®¤å€¼ å¦‚æœä¸º-1 åˆ™ä¸å­˜åœ¨</span>    String<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">tel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h2><p>å…ƒæ³¨è§£çµæ´»ä½¿ç”¨</p><p>é€šè¿‡åå°„æ¥åŠ¨æ€è·å–æ³¨è§£çš„å‚æ•° </p><pre class=" language-java"><code class="language-java">Class <span class="token class-name">userClass</span> <span class="token operator">=</span> User<span class="token punctuation">.</span>calss<span class="token punctuation">;</span>AnnotationName name<span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span>annotationName<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ³¨è§£ </tag>
            
            <tag> Javaæ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVAåå°„æœºåˆ¶</title>
      <link href="/2020/06/05/JAVA%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/"/>
      <url>/2020/06/05/JAVA%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h1><h2 id="åå°„æ¦‚è¿°"><a href="#åå°„æ¦‚è¿°" class="headerlink" title="åå°„æ¦‚è¿°"></a>åå°„æ¦‚è¿°</h2><h3 id="åŠ¨é™æ€è¯­è¨€"><a href="#åŠ¨é™æ€è¯­è¨€" class="headerlink" title="åŠ¨é™æ€è¯­è¨€"></a>åŠ¨é™æ€è¯­è¨€</h3><blockquote><ul><li>åŠ¨æ€è¯­è¨€<ol><li>è¿è¡Œæ—¶å¯ä»¥æ”¹å˜å…¶ç»“æ„çš„è¯­è¨€:Object-c, C#, JavaScript, PHP, Pythonç­‰</li></ol></li><li>é™æ€è¯­è¨€<ol><li>è¿è¡Œæ—¶ç»“æ„ä¸å¯å˜çš„è¯­è¨€:Java,C,C++</li></ol></li></ul><p>ä½†æ˜¯! Javaè™½ä¸æ˜¯åŠ¨æ€è¯­è¨€, ä½†å¯ä»¥ç§°ä¸º<strong>â€œå‡†åŠ¨æ€è¯­è¨€â€</strong>. å› ä¸ºJavaæœ‰ä¸€å®šçš„åŠ¨æ€æ€§,å¯ä»¥åˆ©ç”¨Javaçš„<strong>åå°„æœºåˆ¶</strong>è·å¾—åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§. å¯ä»¥è®©ç¼–ç¨‹æ›´çµæ´»</p></blockquote><h3 id="Reflection"><a href="#Reflection" class="headerlink" title="Reflection"></a>Reflection</h3><blockquote><p><strong>Reflection(åå°„)</strong> æ˜¯Javaè¢«è§†ä¸ºåŠ¨æ€è¯­è¨€çš„å…³é”®.åå°„æœºåˆ¶æ˜¯ç¨‹åºæ‰§è¡ŒæœŸé—´å€ŸåŠ©äºReflection APIè·å–åˆ°<strong>ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯,å¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§å’Œæ–¹æ³•</strong></p><p>åŠ è½½å®Œç±»ä¹‹å, åœ¨å †å†…å­˜çš„æ–¹æ³•å»ä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡(å¯¹äºæ¯ä¸ªç±»æ˜¯å”¯ä¸€ä¸€ä¸ª), è¿™ä¸ªå¯¹è±¡åŒ…å«äº†<strong>å®Œæ•´çš„ç±»çš„ç»“æ„ä¿¡æ¯</strong>. é€šè¿‡è¿™ä¸ªå¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„. è¿™ä¸ªå¯¹è±¡åƒä¸ªé•œå­, é€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°äº†ç±»çš„ç»“æ„ ,æ‰€ä»¥æˆ‘ä»¬å«åå°„<br><img src="https://i.loli.net/2020/06/06/1YROeXfwlsizrCS.png" alt="image.png"></p></blockquote><h3 id="JAVAåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹"><a href="#JAVAåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="JAVAåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹"></a>JAVAåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹</h3><blockquote><ul><li>ä¼˜ç‚¹: å¾ˆæ˜æ˜¾å®ƒå®ç°äº†åŠ¨æ€åˆ›å»ºå’Œç¼–è¯‘, å¤§å¤§å¢åŠ çµæ´»æ€§</li><li>ç¼ºç‚¹: å¯¹æ€§èƒ½æœ‰å½±å“,. å› ä¸ºåå°„æ˜¯ä¸€ä¸ªè§£é‡Šæ“ä½œ, å‘Šè¯‰JVM,æˆ‘ä»¬éœ€è¦åšä»€ä¹ˆæ¥å®Œæˆæ“ä½œ. è‚¯å®šæ…¢äºç›´æ¥æ“ä½œ</li></ul></blockquote><h2 id="1-ç±»åŠ è½½å’Œåˆå§‹åŒ–çš„"><a href="#1-ç±»åŠ è½½å’Œåˆå§‹åŒ–çš„" class="headerlink" title="1. ç±»åŠ è½½å’Œåˆå§‹åŒ–çš„"></a>1. ç±»åŠ è½½å’Œåˆå§‹åŒ–çš„</h2><blockquote><p>æƒ³è¦äº†è§£åå°„æœºåˆ¶å…ˆäº†è§£åˆ°åº•ç±»åŠ è½½æ˜¯æ€ä¹ˆè¿è¡Œçš„è¿˜æœ‰åˆå§‹åŒ–æ—¶JVMå‘ä»€ä¹ˆä»€ä¹ˆ</p></blockquote><h3 id="ç±»åŠ è½½å†…å­˜åˆ†æ"><a href="#ç±»åŠ è½½å†…å­˜åˆ†æ" class="headerlink" title="ç±»åŠ è½½å†…å­˜åˆ†æ"></a>ç±»åŠ è½½å†…å­˜åˆ†æ</h3><blockquote><ul><li><p>Jvmä¸­çš„å†…å­˜éƒ¨åˆ†:</p><ol><li><strong>å †:</strong> å­˜æ”¾newçš„å¯¹è±¡å’Œæ•°ç»„ (åƒåœ¾æ”¶é›†å™¨,ç›‘æ§çš„å°±æ˜¯è¿™éƒ¨åˆ†å¯¹è±¡)  <ol><li>å¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«, ä¸ä¼šå­˜æ”¾åˆ«çš„å¯¹è±¡å¼•ç”¨</li></ol></li><li><strong>æ ˆ:</strong> å­˜æ”¾åŸºæœ¬å˜é‡ç±»å‹(ä¼šåŒ…å«è¿™ä¸ªåŸºæœ¬ç±»å‹çš„å…·ä½“æ•°å€¼),å¼•ç”¨å¯¹è±¡çš„å˜é‡(å­˜çš„æ˜¯è¿™ä¸ªå¼•ç”¨åœ¨å †é‡Œçš„åœ°å€)</li><li><strong>æ–¹æ³•åŒº:</strong> å¯æ‚²çº¿ç¨‹å…±äº«/ åŒ…å«æ‰€æœ‰çš„calsså’Œstaticå˜é‡</li></ol></li><li><p>ç±»åŠ è½½çš„è¿‡ç¨‹</p><p>å½“ç¨‹åºä¸»åŠ¨ä½¿ç”¨æŸä¸ªç±», å¦‚æœè¯¥ç±»è¿˜æœªè¢«å¤¹åœ¨åˆ°å†…å­˜ä¸­, åˆ™ä¼šå‘ç”Ÿä¸‹é¢çš„æ­¥éª¤:</p><p><img src="https://i.loli.net/2020/06/07/hqkj6iWFR1vc9Ga.png" alt="ç±»åŠ è½½çš„è¿‡ç¨‹"></p><ol><li><strong>åŠ è½½:</strong> å°†classæ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜,å°†é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•å»çš„è¿è¡Œæ—¶æ•°æ®ç»“æ„,ç„¶åç”Ÿæˆä¸€ä¸ªjava.lang.Classå¯¹è±¡(å †).</li><li><strong>é“¾æ¥:</strong> å°†äºŒè¿›åˆ¶(å­—èŠ‚ç )ä»£ç åˆå¹¶åˆ°JVMè¿è¡ŒçŠ¶æ€ä¸­<ol><li>==éªŒè¯==:ç¡®ä¿åŠ è½½çš„ä¿¡æ¯ç¬¦åˆJVMè§„èŒƒ</li><li>==å‡†å¤‡==:æ­£å¼ä¸ºç±»å˜é‡(static)åˆ†é…å†…å­˜,å¹¶è®¾ç½®åˆå€¼â€“ Javaå¯¹è±¡å˜é‡çš„é»˜è®¤å€¼</li><li>==è§£æ==:è™šæ‹Ÿæœºå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨(å¸¸é‡å)æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨(åœ°å€)</li></ol></li><li><strong>åˆå§‹åŒ–:</strong> æ‰§è¡Œç±»æ„é€ å™¨çš„<clinit>()æ–¹æ³•çš„è¿‡ç¨‹: ä¸‹é¢ç»†è¯´</li></ol></li></ul></blockquote><h3 id="ç±»çš„åˆå§‹åŒ–-â€“-èµ‹åˆå€¼"><a href="#ç±»çš„åˆå§‹åŒ–-â€“-èµ‹åˆå€¼" class="headerlink" title="ç±»çš„åˆå§‹åŒ– â€“ èµ‹åˆå€¼"></a>ç±»çš„åˆå§‹åŒ– â€“ èµ‹åˆå€¼</h3><blockquote><ul><li><p>åˆå§‹åŒ–:  é¡ºåºæ˜¯: <strong><em>å…ˆé™æ€å¯¹è±¡ï¼Œåéé™æ€å¯¹è±¡ï¼Œä¸”é™æ€åˆå§‹åŒ–åŠ¨ä½œåªè¿›è¡Œä¸€æ¬¡</em></strong> </p><ol><li>ç±»æ„é€ å™¨<clinit>()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­<strong>æ‰€æœ‰</strong>çš„<strong>ç±»å˜é‡</strong>èµ‹å€¼å’Œ<strong>é™æ€</strong>ä»£ç å—çš„æ“ä½œ(ç±»æ„é€ å™¨æ˜¯æ„é€ ç±»çš„, ä¸æ˜¯æ„é€ è¯¥å¯¹è±¡çš„)</li><li>å¦‚æœåˆå§‹åŒ–æ—¶å‘ç°çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–,åˆ™åˆå§‹åŒ–çˆ¶ç±»</li><li>è™šæ‹Ÿæœºä¼šä¿è¯<clinit>()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ä¸­èƒ½æ­£ç¡®åŠ é”å’ŒåŒæ­¥</li></ol><blockquote><p>clinit åªæœ‰é™æ€æ‰ä¼šç”Ÿæ•ˆ è€Œä¸”åªæœ‰ä¸€æ¬¡ init åœ¨å®ä¾‹åŒ–æ—¶ç”Ÿæ•ˆ</p></blockquote><ul><li>å®ä¾‹åŒ–æ­¥éª¤ä¸ºï¼šå…ˆä¸ºå±æ€§åˆ†é…ç©ºé—´ï¼Œå†æ‰§è¡Œèµ‹é»˜è®¤å€¼ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œä»£ç å—æˆ–èµ‹åˆå§‹å€¼ï¼Œæœ€åæ‰§è¡Œæ„é€ æ–¹æ³•</li></ul></li><li><p>ç±»ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–:</p><ol><li>ç±»çš„ä¸»åŠ¨å¼•ç”¨(ä¸€å®šå‘ç”Ÿåˆå§‹åŒ–)<ol><li>ä¸€å®šåˆå§‹åŒ–mainæ–¹æ³•æ‰€åœ¨çš„ç±»</li><li>newå¯¹è±¡</li><li>é€šè¿‡ç±»è°ƒç”¨é™æ€æˆå‘˜(é™¤äº†final)å’Œé™æ€æ–¹æ³•</li><li>åå°„è°ƒç”¨(forName(â€œâ€))</li><li>å¦‚æœåˆå§‹åŒ–æ—¶å‘ç°çˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–,åˆ™åˆå§‹åŒ–çˆ¶ç±»</li></ol></li><li>ç±»çš„è¢«åŠ¨å¼•ç”¨(ä¸ä¼šå‘ç”Ÿåˆå§‹åŒ–)<ol><li>è®¿é—®ä¸€ä¸ªé™æ€åŸŸæ—¶, å¦‚æœæ²¡æœ‰å£°æ˜è¿™ä¸ªåŸŸçš„ç±»(æ¯”å¦‚å­ç±»è°ƒç”¨çˆ¶ç±»çš„é™æ€å˜é‡)å°±ä¸ä¼šåˆå§‹åŒ–</li><li>é€šè¿‡æ•°ç»„å®šä¹‰å¼•ç”¨ â€“ åªä¼šåˆ†é…ç©ºé—´ (ç±»A[] a = new ç±»A[len])</li><li>å¼•ç”¨å¸¸é‡ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ– ( å¸¸é‡åœ¨é“¾æ¥é˜¶æ®µå°±å­˜å…¥äº†å¸¸é‡æ± )</li></ol></li></ol></li></ul><p><img src="https://i.loli.net/2020/06/30/pJrK6LaXGIATNFd.png" alt="JVM.png"></p></blockquote><h3 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h3><blockquote><p>å¦‚æœéœ€è¦æŸ¥æ‰¾ä¸€ä¸ªclasså¯¹è±¡çš„æ—¶å€™ å…ˆæŸ¥æ‰¾å†…å­˜ä¸‰ç§åŠ è½½å™¨ä¸€æ¬¡æŸ¥æ‰¾ å¦‚æœæ²¡æœ‰ä»åº•å±‚åŠ è½½å™¨åŠ è½½ å¦‚æœéƒ½æ²¡æœ‰æŠ›å‡ºClassNotFoundException  æˆ–è€…è°ƒç”¨è‡ªå·±åŠ è½½å™¨çš„findClassæ–¹æ³•åŠ è£…</p><ol><li>å¥½å¤„: ç±»ä¸é‡å¤åŠ è½½</li><li>ä¸ä¼šäº§ç”Ÿæ ¸å¿ƒç±»è¢«åæ¥çš„è¦†ç›–</li></ol><p><img src="https://i.loli.net/2020/09/14/FouWQYTv6GM8zdh.png" alt="åŒäº²å§”æ´¾"></p></blockquote><blockquote><p>ç±»åŠ è½½å™¨å°±æ˜¯<strong>å°†classæ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­</strong>,å¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•å»çš„è¿è¡Œæ—¶çš„æ•°æ®ç»“æ„,åœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªjava.lang.classå¯¹è±¡,ä½œä¸ºè®¿é—®å…¥å£</p><p>ç±»ç¼“å­˜:  æ ‡å‡†JavaSEç±»åŠ è½½å™¨,å¯ä»¥æŒ‰è¦æ±‚æŸ¥æ‰¾ç±», ä¸€æ—¦æŸä¸ªç±»è¢«å¤¹åœ¨å°†æœ‰ä¸€æ®µæ—¶é—´ç¼“å­˜</p><ol><li><p>å¼•å¯¼ç±»åŠ è½½å™¨: åº•å±‚ç”±C++ç¼–å†™, javaè‡ªå¸¦çš„åŠ è½½å™¨, <strong>è´Ÿè´£javaæ ¸å¿ƒåº“(rt.jar)</strong>, è£…åœ¨æ ¸å¿ƒç±»åº“. è¿™ä¸ªæ— æ³•ç›´æ¥è·å–</p></li><li><p>æ‰©å±•ç±»åŠ è½½å™¨:è´Ÿè´£jre/lib/extä¸‹çš„jaråŒ…æˆ–è€…java.ext.dirsæŒ‡å®šç›®å½•çš„jaråŠ è½½</p><p><strong>sun.misc.Launcher$ExtClassLoader@1d4e2ba</strong></p><pre class=" language-java"><code class="language-java">  <span class="token comment" spellcheck="true">// ç³»ç»Ÿç±»çš„çˆ¶ç±»  æ‰©å±•ç±» </span>ClassLoader parent <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>ç³»ç»Ÿç±»åŠ è½½å™¨: æœ€å¸¸ç”¨çš„,è´Ÿè´£java-classpathæˆ–java.class.pathæ‰€æŒ‡å‘çš„ç›®å½•ä¸‹çš„ç±»ä¸jaråŒ…çš„åŠ è½½</p><p><strong>sun.misc.Launcher$AppClassLoader@dad5dc</strong></p><pre class=" language-java"><code class="language-java">   <span class="token comment" spellcheck="true">// è·å–ç³»ç»Ÿç±»åŠ è½½å™¨  </span>ClassLoader loader <span class="token operator">=</span> ClassLoader<span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><hr><p><kbd>ç³»ç»Ÿç±» -> æ‰©å±•ç±» -> å¼•å¯¼ç±»</kbd> ä»¥åŠè‡ªå®šä¹‰åŠ è½½å™¨</p></li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æŸ¥çœ‹ç³»ç»Ÿå†…ç±»åŠ è½½å™¨å¯ä»¥åŠ è½½çš„è·¯å¾„</span>  System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"java.class.path"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>   <img src="https://i.loli.net/2020/06/07/Dlpi7uRVcFm3MoT.png" alt="image.png"></p></blockquote><h2 id="Classå¯¹è±¡"><a href="#Classå¯¹è±¡" class="headerlink" title="Classå¯¹è±¡"></a>Classå¯¹è±¡</h2><blockquote><p>åœ¨Objectç±»ä¸‹æœ‰ä¸€ä¸ªgetClass()æ–¹æ³•,è¿”å›å€¼æ˜¯ä¸€ä¸ªClassç±».æ‰€æœ‰ç±»éƒ½é»˜è®¤ç»§æ‰¿Objectç±».<kbd>public final Class getClass()</kbd></p><p>æ˜¯Javaåå°„çš„æºå¤´, æ‰€ä»¥åå°„ç†è§£ä¸º: å¯ä»¥é€šè¿‡å¯¹è±¡åå°„æ‰¾åˆ°å¯¹åº”çš„ç±»</p><p> <img src="https://i.loli.net/2020/06/06/9fyt2kRnvHcCihs.png" alt="image.png"></p></blockquote><h4 id="è·å–Classç±»çš„æ–¹æ³•"><a href="#è·å–Classç±»çš„æ–¹æ³•" class="headerlink" title="è·å–Classç±»çš„æ–¹æ³•"></a>è·å–Classç±»çš„æ–¹æ³•</h4><blockquote><ol><li><p>å·²çŸ¥å…·ä½“ç±», é€šè¿‡classå±æ€§æ¥è·å–, è¯¥æ–¹æ³•<strong>æœ€ä¸ºå®‰å…¨å¯é </strong>,ç¨‹åºæ€§èƒ½æœ€é«˜</p><pre class=" language-java"><code class="language-java">  Class<span class="token operator">&lt;</span>Cat<span class="token operator">></span> c1 <span class="token operator">=</span> Cat<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></code></pre></li><li><p>å·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹,è°ƒç”¨å®ƒçš„getClassæ–¹æ³•è·å–Classå¯¹è±¡</p><pre class=" language-java"><code class="language-java">Cat cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Class <span class="token class-name">c3</span> <span class="token operator">=</span> cat<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li></ol><ol start="3"><li><p>å·²çŸ¥ä¸€ä¸ªç±»çš„<strong>é™å®šç±»å</strong>,ä¸”åœ¨ç±»è·¯å¾„ä¸‹, å¯ä»¥é€šè¿‡Classçš„é™æ€æ–¹æ³•forName()è·å–</p><pre class=" language-java"><code class="language-java">Class <span class="token class-name">c2</span> <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.sjs.Reflect.Cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><ol start="4"><li><p>å†…ç½®åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥è°ƒç”¨<strong>ç±»å.Type</strong></p><pre class=" language-java"><code class="language-java">Class<span class="token operator">&lt;</span>Integer<span class="token operator">></span> type <span class="token operator">=</span> Integer<span class="token punctuation">.</span>TYPE<span class="token punctuation">;</span></code></pre></li></ol><ol start="5"><li><p>è¿˜å¯ä»¥ç”¨ClassLoader</p><blockquote><p>åªè¦æ˜¯è·å–åˆ°<strong>åŒä¸€ä¸ªç±»çš„Classå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p><pre class=" language-java"><code class="language-java">        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c3<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æˆ‘ä»¬æŠŠä¸Šé¢çš„å¯¹è±¡ç”¨hashCode()è¾“å‡ºæ•°æ®ç›¸åŒ</p></blockquote></li></ol></blockquote><h4 id="Classç±»çš„å¸¸ç”¨æ–¹æ³•"><a href="#Classç±»çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Classç±»çš„å¸¸ç”¨æ–¹æ³•"></a>Classç±»çš„å¸¸ç”¨æ–¹æ³•</h4><blockquote><ol><li><strong>Class getSuperClass():</strong> è¿”å›å½“å‰ç±»çš„çˆ¶ç±»</li><li><strong>static ClassforName(String name):</strong> è¿”å›æŒ‡å®šç±»ånameçš„Classå¯¹è±¡</li><li><strong>Object newInstance():</strong> è°ƒç”¨ç¼ºçœæ„é€ å‡½æ•°,è¿”å›Classå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹</li><li><strong>getName():</strong> è¿”å›Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„å®ä½“(ç±», æ¥å£ç­‰)çš„åç§°</li><li><strong>Class[] getInterfaces():</strong> è¿”å›å½“å‰Classå¯¹è±¡çš„æ¥å£ </li><li><strong>ClassLoader getClassLoader():</strong> è¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨</li></ol></blockquote><h2 id="2-è·å–ç±»çš„è¿è¡Œæ—¶ç»“æ„"><a href="#2-è·å–ç±»çš„è¿è¡Œæ—¶ç»“æ„" class="headerlink" title="2. è·å–ç±»çš„è¿è¡Œæ—¶ç»“æ„"></a>2. è·å–ç±»çš„è¿è¡Œæ—¶ç»“æ„</h2><blockquote><p>é€šè¿‡åå°„å¯ä»¥è·å–è¿è¡Œæ—¶çš„ç±»çš„å®Œæ•´ç»“æ„</p><p>â€‹        åå°„åˆ›å»ºç±»çš„Classå¯¹è±¡<kbd>Class catCl = Class.forName("com.sjs.Reflect.Animal"); </kbd></p><ol><li><p>è·å–å±æ€§</p><pre class=" language-java"><code class="language-java">catCl<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è·å–æ‰€æœ‰publicå±æ€§</span>catCl<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–æ‰€æœ‰å±æ€§</span></code></pre></li><li><p>è·å–æ–¹æ³•</p><pre class=" language-java"><code class="language-java">catCl<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è·å–åŒ…æ‹¬çˆ¶ç±»çš„æ‰€æœ‰publicæ–¹æ³•</span>catCl<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–å…¶ä»–æƒé™çš„æ–¹æ³•</span>   System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>catCl<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•åå­—"</span><span class="token punctuation">,</span> å‚æ•°ç±»å‹<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è·å–æŒ‡å®šæ–¹æ³•</span></code></pre></li><li><p>è·å–æ„é€ å™¨</p><pre class=" language-java"><code class="language-java">   <span class="token comment" spellcheck="true">// è·å–æ„é€ å™¨</span>        catCl<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å– publicæ‰€æœ‰æ„é€ å™¨</span>        catCl<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å– publicæ‰€æœ‰æ„é€ å™¨</span></code></pre></li><li><p>ç­‰ç­‰,,,èƒ½è·å–åˆ°ç±»çš„å®Œæ•´ç»“æ„(æ¥å£,æ³¨è§£, çˆ¶ç±»â€¦â€¦â€¦)</p></li></ol></blockquote><h2 id="åŠ¨æ€åˆ›å»ºå¯¹è±¡-è°ƒç”¨è¿è¡Œæ—¶ç±»ä¸­çš„ç»“æ„"><a href="#åŠ¨æ€åˆ›å»ºå¯¹è±¡-è°ƒç”¨è¿è¡Œæ—¶ç±»ä¸­çš„ç»“æ„" class="headerlink" title="åŠ¨æ€åˆ›å»ºå¯¹è±¡,è°ƒç”¨è¿è¡Œæ—¶ç±»ä¸­çš„ç»“æ„"></a>åŠ¨æ€åˆ›å»ºå¯¹è±¡,è°ƒç”¨è¿è¡Œæ—¶ç±»ä¸­çš„ç»“æ„</h2><blockquote><ul><li><p>åŠ¨æ€åˆ›å»º:</p><pre class=" language-java"><code class="language-java">Animal aninmalIns <span class="token operator">=</span> <span class="token punctuation">(</span>Animal<span class="token punctuation">)</span> animal<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åå°„è·å¾—çš„ç±»å®ä¾‹åˆ›å»ºå®ä¾‹</span><span class="token comment" spellcheck="true">/*************************************************************************/</span> <span class="token comment" spellcheck="true">//è°ƒç”¨æŒ‡å®šæ„é€ å™¨åˆ›å»ºå¯¹è±¡</span>Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">=</span> animal<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”¨å‚æ•°æ¥ç¡®å®šæ„é€ æ–¹æ³•</span>constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è®¾ç½®è®¿é—®æƒé™æ‹¦æˆª(trueä¸æ‹¦æˆª) å› ä¸ºè¿™ä¸ªæ„é€ æ˜¯ç§æœ‰çš„</span>Object o <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"å‚æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>è°ƒç”¨è¿è¡Œæ—¶çš„æ–¹æ³•</p><pre class=" language-java"><code class="language-java">Animal animal1 <span class="token operator">=</span> <span class="token punctuation">(</span>Animal<span class="token punctuation">)</span> animal<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ›å»ºå‡ºå£°æ˜ç±»å®ä¾‹</span><span class="token comment" spellcheck="true">// è°ƒç”¨æ–¹æ³•</span><span class="token comment" spellcheck="true">// åˆ›å»ºå‡ºMethodå¯¹è±¡</span>Method setName <span class="token operator">=</span> animal<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"setName"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ–¹æ³•å‚æ•°åå­—å’Œç±»å‹</span>setName<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>animal1<span class="token punctuation">,</span> <span class="token string">"å‚æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å‚æ•°å¯¹è±¡æ˜¯å£°æ˜ç±»çš„å®ä¾‹</span></code></pre></li><li><p>è°ƒç”¨å±æ€§</p><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">// è®¿é—®å’Œä¿®æ”¹å±æ€§</span>Field name <span class="token operator">=</span> animal<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å±æ€§åç§°</span>name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”±äºæ˜¯ç§æœ‰ä¿®æ”¹æ‹¦æˆªæ–¹å¼</span>name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>animal1<span class="token punctuation">,</span> <span class="token string">"tuyi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// set å°†å¯¹è±¡å’Œå‚æ•°ä¼ å…¥</span></code></pre></li></ul></blockquote><blockquote><ul><li>classå¯¹è±¡å¯ä»¥åˆ›å»ºç±»çš„å¯¹è±¡, å¯ä»¥è®¿é—®æ‰€æœ‰æƒé™çš„æ–¹æ³•å’Œå±æ€§</li><li><strong>invoke(Object obj, Object args[])æ–¹æ³•</strong>  ç”¨åå°„åˆ›å»ºå‡ºMethodå¯¹è±¡,ç”¨æ­¤æ–¹æ³•è°ƒç”¨ ,å‚æ•°æ˜¯ç±»çš„å¯¹è±¡å’Œå‚æ•°</li><li><strong>setAccessible(boolen par)</strong> <ol><li>Method, Field, Constructorå¯¹è±¡éƒ½æœ‰setAccessible()æ–¹æ³•</li><li>æ˜¯ç”¨æ¥å¯åŠ¨æˆ–è€…ç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³</li><li>trueä¸ºå–æ¶ˆjavaè¯­è¨€è®¿é—®æ£€å¯Ÿ<ol><li><strong>æé«˜åå°„æ•ˆç‡</strong>, å¦‚æœå¿…é¡»ç”¨åå°„, è®¾ç½®ä¸ºtrue</li><li>å¯ä»¥è®¿é—®ç§æœ‰ç»“æ„</li></ol></li><li>falseåˆ™ä¸ºåå°„çš„å¯¹è±¡å¼€å¯Javaè¯­è¨€è®¿é—®æ£€å¯Ÿ</li></ol></li></ul></blockquote><h2 id="ç»ƒä¹ -é€šè¿‡æ³¨è§£å’Œåå°„å®Œæˆç®€å•çš„ç±»å’Œè¡¨ç»“æ„çš„æ˜ å°„å…³ç³»-ORM"><a href="#ç»ƒä¹ -é€šè¿‡æ³¨è§£å’Œåå°„å®Œæˆç®€å•çš„ç±»å’Œè¡¨ç»“æ„çš„æ˜ å°„å…³ç³»-ORM" class="headerlink" title="ç»ƒä¹ :é€šè¿‡æ³¨è§£å’Œåå°„å®Œæˆç®€å•çš„ç±»å’Œè¡¨ç»“æ„çš„æ˜ å°„å…³ç³»(ORM)"></a>ç»ƒä¹ :é€šè¿‡æ³¨è§£å’Œåå°„å®Œæˆç®€å•çš„ç±»å’Œè¡¨ç»“æ„çš„æ˜ å°„å…³ç³»(ORM)</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ³¨è§£ç±»</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>ElementType<span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token keyword">public</span> @<span class="token keyword">interface</span> <span class="token class-name">DBAnnotation</span> <span class="token punctuation">{</span>    String <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åº“å</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>ElementType<span class="token punctuation">.</span>FIELD<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RetentionPolicy<span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>@<span class="token keyword">interface</span> <span class="token class-name">FieldsSJS</span> <span class="token punctuation">{</span>    String <span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ—æ˜</span>    String <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ•°æ®ç±»å‹</span>    <span class="token keyword">int</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é•¿åº¦</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// pojoç±»</span><span class="token annotation punctuation">@DBAnnotation</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@FieldsSJS</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"int"</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@FieldsSJS</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"varChar"</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æµ‹è¯•ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ORMExercise</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ClassNotFoundException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span> InstantiationException <span class="token punctuation">{</span>        Class <span class="token class-name">studentDB</span> <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.sjs.Exercise.Student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s <span class="token operator">=</span> <span class="token punctuation">(</span>Student<span class="token punctuation">)</span> studentDB<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        DBAnnotation dbAnnotation <span class="token operator">=</span> <span class="token punctuation">(</span>DBAnnotation<span class="token punctuation">)</span> studentDB<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span>DBAnnotation<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰è¡¨æ˜¯: "</span> <span class="token operator">+</span> dbAnnotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Field<span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> studentDB<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Field field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>            FieldsSJS fieldsjs <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span>FieldsSJS<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç±»ä¸­çš„å‚æ•°æ˜¯:"</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"åˆ—åå­—:"</span> <span class="token operator">+</span> fieldsjs<span class="token punctuation">.</span><span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦:"</span> <span class="token operator">+</span> fieldsjs<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"ç±»å‹:"</span> <span class="token operator">+</span> fieldsjs<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="https://i.loli.net/2020/06/08/euOnThtcEdpokG4.png" alt="image.png"></p><p>clinitclinit</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OOPç¼–ç¨‹(é¢å‘å¯¹è±¡)åŸºç¡€</title>
      <link href="/2020/05/31/OOP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B-%E5%9F%BA%E7%A1%80/"/>
      <url>/2020/05/31/OOP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B-%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="OOPç¼–ç¨‹-é¢å‘å¯¹è±¡-åŸºç¡€"><a href="#OOPç¼–ç¨‹-é¢å‘å¯¹è±¡-åŸºç¡€" class="headerlink" title="OOPç¼–ç¨‹(é¢å‘å¯¹è±¡)åŸºç¡€"></a>OOPç¼–ç¨‹(é¢å‘å¯¹è±¡)åŸºç¡€</h1><h2 id="ç±»ä¸å®ä¾‹"><a href="#ç±»ä¸å®ä¾‹" class="headerlink" title="ç±»ä¸å®ä¾‹"></a>ç±»ä¸å®ä¾‹</h2><blockquote><ul><li><p>OOP: Object-Oriented Programming</p><ol><li>å¯¹è±¡: å¯¹è±¡æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å®ä½“,ç”¨ä¸€ç»„å¯è¯†åˆ«çš„ç‰¹æ€§å’Œè¡Œä¸ºæ¥æ ‡è¯†</li><li>ç±»: ç±»å°±æ˜¯å…·æœ‰ç›¸åŒå±æ€§å’ŒåŠŸèƒ½çš„å¯¹è±¡çš„æŠ½è±¡é›†åˆ</li><li>å®ä¾‹: ä¸€ä¸ªçœŸå®çš„å¯¹è±¡(å®ä¾‹åŒ–å°±æ˜¯åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹)</li></ol><blockquote><p>ç±»A name;             // å£°æ˜ä¸€ä¸ª <kbd>ç±»A</kbd>çš„å¯¹è±¡ å«name </p><p>name = new ç±»A();  // å°†nameå¯¹è±¡å®ä¾‹åŒ– </p></blockquote></li></ul></blockquote><h2 id="æ„é€ æ–¹æ³•-æ–¹æ³•é‡è½½"><a href="#æ„é€ æ–¹æ³•-æ–¹æ³•é‡è½½" class="headerlink" title="æ„é€ æ–¹æ³•/æ–¹æ³•é‡è½½"></a>æ„é€ æ–¹æ³•/æ–¹æ³•é‡è½½</h2><blockquote><ul><li>æ„é€ æ–¹æ³•â€”æ„é€ å‡½æ•°,å°±æ˜¯å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–. åœ¨è¢«newæ—¶è°ƒç”¨ <ol><li>æ‰€æœ‰ç±»éƒ½æœ‰ä¸ªé»˜è®¤æ— å‚æ•°æ„é€ æ–¹æ³•,,å¦‚æœä½ å®šä¹‰äº†æ„é€ æ–¹æ³•,åˆ™é»˜è®¤çš„å¤±æ•ˆ</li></ol></li><li>æ–¹æ³•é‡è½½æä¾›äº†åˆ›å»ºåŒåçš„å¤šä¸ªæ–¹æ³•çš„èƒ½åŠ›, éœ€è¦<strong>å‚æ•°ç±»å‹</strong>,<strong>å‚æ•°ä¸ªæ•°</strong>ä¸åŒ</li></ul></blockquote><h2 id="å°è£…-ç»§æ‰¿å’Œå¤šæ€"><a href="#å°è£…-ç»§æ‰¿å’Œå¤šæ€" class="headerlink" title="å°è£…,ç»§æ‰¿å’Œå¤šæ€"></a>å°è£…,ç»§æ‰¿å’Œå¤šæ€</h2><blockquote><ul><li><p>å°è£…: æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«å®ƒèƒ½è¿›è¡Œæ“ä½œæ‰€éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯, è¿™å°±æ˜¯å°è£…, æ‰€ä»¥å¯¹è±¡ä¸å¿…ä¾èµ–å…¶ä»–å¯¹è±¡æ¥å®Œæˆè‡ªå·±çš„æ“ä½œ,å¥½å¤„:</p><ol><li>è‰¯å¥½çš„å°è£…èƒ½é™ä½è€¦åˆ</li><li>ç±»å†…éƒ¨çš„å®ç°å¯ä»¥è‡ªç”±ä¿®æ”¹</li><li>ç±»æœ‰æ¸…æ™°çš„å¯¹å¤–æ¥å£</li></ol></li><li><p>ç»§æ‰¿: é¢å‘å¯¹è±¡ä¸­  <em>is - a</em>  çš„å…³ç³»,å¯ä»¥è¯´ä¸º<em>æ˜¯ä¸€ä¸ª</em> çš„å…³ç³» . (çŒ«ç±»ç»§æ‰¿åŠ¨ç‰©ç±»â€”çŒ«æ˜¯åŠ¨ç‰©)    ç»§æ‰¿å¯ä½¿å¾—ä¿®æ”¹å’Œæ‰©å±• ç»§æ‰¿è€Œæ¥çš„å®ç° æ¯”è¾ƒå®¹æ˜“</p><ol><li>å­ç±»æ‹¥æœ‰çˆ¶ç±»éprivateçš„å±æ€§å’ŒåŠŸèƒ½</li><li>å­ç±»å…·æœ‰è‡ªå·±çš„å±æ€§å’ŒåŠŸèƒ½</li><li>å­ç±»å¯ä»¥é€šè¿‡è‡ªå·±çš„æ–¹å¼å®ç°å¼—é›·å¾·åŠŸèƒ½(æ–¹æ³•é‡å†™)</li><li>protectedä¿®é¥°çš„åªå¯¹å­ç±»å…¬å¼€</li></ol></li><li><p>å¤šæ€: ä¸åŒçš„å¯¹è±¡å¯ä»¥æ‰§è¡Œç›¸åŒçš„åŠ¨ä½œ,ä½†æ˜¯è¦é€šè¿‡ä»–ä»¬è‡ªå·±çš„å®ç°ä»£ç æ‰§è¡Œ(å®ç°çš„ç»“æœä¸€æ ·,ä½†æ˜¯è¡Œä¸ºæ–¹å¼ä¸åŒ)</p><ol><li>å­ç±»ä»¥çˆ¶ç±»çš„èº«ä»½å‡ºç°</li><li>å­ç±»åœ¨å·¥ä½œæ—¶ä»¥è‡ªå·±çš„æ–¹å¼å®ç°</li><li>å­ç±»ä»¥çˆ¶ç±»çš„èº«ä»½å‡ºç°æ˜¯,å­ç±»ç‰¹æœ‰çš„å®è¡Œå’Œæ–¹æ³•ä¸å¯ä½¿ç”¨</li></ol><pre class=" language-java"><code class="language-java">çˆ¶ f1 <span class="token operator">=</span><span class="token keyword">new</span> å­ï¼ˆï¼‰ï¼›<span class="token comment" spellcheck="true">// æ¯ä¸ªå­ç±»é€šè¿‡è‡ªå·±çš„æ–¹å¼å®Œæˆ</span></code></pre></li></ul></blockquote><h2 id="é‡æ„"><a href="#é‡æ„" class="headerlink" title="é‡æ„"></a>é‡æ„</h2><blockquote><p> é‡æ„å°±æ˜¯åœ¨ä¸æ”¹å˜è½¯ä»¶ç³»ç»Ÿå¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œæ”¹å–„å®ƒçš„å†…éƒ¨ç»“æ„ã€‚å…·ä½“å®ç°æ–¹å¼ä¸åŒ</p></blockquote><h2 id="æŠ½è±¡ç±»-abstract"><a href="#æŠ½è±¡ç±»-abstract" class="headerlink" title="æŠ½è±¡ç±»(abstract)"></a>æŠ½è±¡ç±»(abstract)</h2><blockquote><ul><li>Javaå¯ä»¥æŠŠç±»å’Œæ–¹æ³•å£°æ˜ä¸ºabstract, å³æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»<ol><li>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</li><li>æŠ½è±¡æ–¹æ³•å¿…é¡»è¢«è‡ªç±»é‡å†™</li><li>æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨æŠ½è±¡ç±»ä¸­</li></ol></li><li>æŠ½è±¡ç±»æ‹¥æœ‰å°½å¯èƒ½å¤šçš„å…±åŒä»£ç ,å°½å¯èƒ½å°‘çš„æ•°æ®<kbd>J&DP</kbd><ol><li>æŠ½è±¡ç±»æä¾›ä¸€ä¸ªç»§æ‰¿çš„å‡ºå‘ç‚¹â€“ä¸€å®šä½¿ç”¨æ¥ç»§æ‰¿çš„</li><li>åœ¨ä¸€ä¸ªç»§æ‰¿å…³ç³»é‡Œ â€“ æ ‘å¶æ˜¯å…·ä½“ç±», æ ‘ææ˜¯æŠ½è±¡ç±»</li></ol></li></ul></blockquote><h2 id="æ¥å£-interface"><a href="#æ¥å£-interface" class="headerlink" title="æ¥å£(interface)"></a>æ¥å£(interface)</h2><blockquote><p>å®˜æ–¹è§£é‡Š:Javaæ¥å£æ˜¯ä¸€ç³»åˆ—æ–¹æ³•çš„å£°æ˜ï¼Œæ˜¯ä¸€äº›æ–¹æ³•ç‰¹å¾çš„é›†åˆï¼Œ<strong>ä¸€ä¸ªæ¥å£åªæœ‰æ–¹æ³•çš„ç‰¹å¾æ²¡æœ‰æ–¹æ³•çš„å®ç°ï¼Œå› æ­¤è¿™äº›æ–¹æ³•å¯ä»¥åœ¨ä¸åŒçš„åœ°æ–¹è¢«ä¸åŒçš„ç±»å®ç°ï¼Œè€Œè¿™äº›å®ç°å¯ä»¥å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼ˆåŠŸèƒ½ï¼‰</strong>ã€‚</p><ul><li><p>ç‰¹æ€§</p><ol><li>å®ç°æ¥å£å¿…é¡»å®ç°æ‰€æœ‰æ–¹æ³•å’Œå±æ€§</li><li>æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤æŠ½è±¡çš„</li><li>Javaåªæ”¯æŒå•ä¸€ç»§æ‰¿,ä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£,æ¥å£ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç±»å®ç°</li></ol></li><li><p>æ¥å£å›è°ƒ:</p><pre class=" language-java"><code class="language-java">æ¥å£ Interface <span class="token operator">=</span><span class="token keyword">new</span> å®ç°ï¼ˆï¼‰ï¼› <span class="token comment" spellcheck="true">// æ¥å£å¯¹è±¡å¯ä»¥è°ƒç”¨è¢«å®ç°ç±»ä¸­çš„æ–¹æ³•</span></code></pre></li><li><p>æ¥å£å’ŒæŠ½è±¡ç±»</p><ol><li>ç±»æ˜¯å¯¹å¯¹è±¡çš„æŠ½è±¡ ,æŠ½è±¡ç±»æ˜¯å¯¹å¯¹è±¡çš„æŠ½è±¡, æ¥å£æ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡</li><li>å¦‚æœè¡Œä¸ºè·¨è¶Šä¸åŒçš„ç±»â€”å¯ä»¥ç”¨æ¥å£; å¯¹äºä¸€äº›ç›¸ä¼¼çš„ç±»å¯¹è±¡â€“ç”¨ç»§æ‰¿æŠ½è±¡ç±»</li><li>å®ç°æ¥å£å’Œç»§æ‰¿æŠ½è±¡ç±»å¯ä»¥ä¸€èµ·ç”¨ä¸å†²çª</li><li>ä»è®¾è®¡è§’åº¦æ¥è¯´: æŠ½è±¡ç±»æ˜¯ä»å­ç±»ä¸­å‘ç°äº†å…¬å…±é€‰é¡¹,æ³›åŒ–å‡ºæ¥çš„(<strong>é‡æ„</strong>); è€Œæ¥å£æ˜¯é¢„å…ˆå®šä¹‰è®¾è®¡å‡ºæ¥çš„</li></ol></li></ul></blockquote><h2 id="å§”æ‰˜ä¸äº‹ä»¶"><a href="#å§”æ‰˜ä¸äº‹ä»¶" class="headerlink" title="å§”æ‰˜ä¸äº‹ä»¶"></a>å§”æ‰˜ä¸äº‹ä»¶</h2><blockquote><p>ä¸€èˆ¬æˆ‘ä»¬åœ¨å®ç°ä¸»è¦ä¸šåŠ¡ï¼Œä¸€äº›è¾…åŠ©åŠŸèƒ½ä¸€èˆ¬æ˜¯çˆ¶ç±»(ä¸€èˆ¬ç±»æˆ–æŠ½è±¡ç±»)ä¸­å®ç°å¥½äº†æˆ–è€…é€šè¿‡å§”æ‰˜å®ç°ï¼Œå¤§å¤šæ•°ä¸­ä¸€èˆ¬ä½¿ç”¨çˆ¶ç±»ï¼Œç»§æ‰¿çˆ¶ç±»éœ€è¦è€¦åˆåœ¨ä¸»ç±»ä¸­ï¼Œä½¿ç”¨çš„å§”æ‰˜çš„æ–¹å¼æ˜¯è§£è€¦ä¸»ç±»ï¼Œä½¿ä¸»ç±»ä¸çŸ¥é“è°å¸®æˆ‘åšäº†è¿™äº›äº‹ï¼Œä½†æ˜¯Javaä¸­æ²¡æœ‰å¯¹å§”æ‰˜è¿›è¡Œå°è£…ï¼Œåˆ™éœ€è¦å¼€å‘è€…è‡ªå·±å®ç°ã€‚(å¾…å®Œæˆ)</p></blockquote><h2 id="OOPç¼–ç¨‹çš„ä¸ƒå¤§åŸåˆ™"><a href="#OOPç¼–ç¨‹çš„ä¸ƒå¤§åŸåˆ™" class="headerlink" title="OOPç¼–ç¨‹çš„ä¸ƒå¤§åŸåˆ™"></a>OOPç¼–ç¨‹çš„ä¸ƒå¤§åŸåˆ™</h2><blockquote><ul><li><strong>å¼€é—­åŸåˆ™:</strong> å¯¹æ‰©å±•å¼€æ”¾,å¯¹ä¿®æ”¹å…³é—­(é¦–è¦éµå®ˆ)</li><li>*<em>é‡Œæ°æ›¿æ¢åŸåˆ™: *</em> ç»§æ‰¿å¿…é¡»ç¡®ä¿è¶…ç±»æ‹¥æœ‰çš„æ€§è´¨åœ¨å­ç±»ä¸­ä»»ç„¶æˆç«‹(å°½å¯èƒ½ä¸å»é‡å†™çˆ¶ç±»)</li><li><strong>ä¾èµ–å€’ç½®åŸåˆ™ï¼š</strong>æ‘†è„±é¢å‘è¿‡ç¨‹ä¸­é«˜å±‚ä¾èµ–åº•å±‚, æŠ½è±¡ä¾èµ–äºå…·ä½“. è€Œæ˜¯é¢å‘æ¥å£ç¼–ç¨‹</li><li><strong>å•ä¸€èŒè´£åŸåˆ™ï¼š</strong>æ§åˆ¶ç´¯çš„ç²’åº¦å¤§å°,å°†å¯¹è±¡è§£è€¦åˆ,é«˜å†…èš(ä¸€ä¸ªç±»çš„èŒè´£å°½é‡å•ä¸€)</li><li><strong>æ¥å£éš”ç¦»åŸåˆ™ï¼š</strong> ä¸ºæ¯ä¸ªç±»å»ºç«‹å±äºå®ƒä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£,ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£è¦å¥½ã€‚</li><li><strong>è¿ªç±³ç‰¹åŸåˆ™æˆ–æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼š</strong> åªä¸ç›´æ¥æœ‹å‹é€šä¿¡,æˆ–è€…é€šè¿‡æœ‹å‹ä¸é™Œç”Ÿäººä¼ é€’æ¶ˆæ¯</li><li><strong>åˆæˆæœç”¨åŸåˆ™:</strong>  å…³è”å…³ç³»ä¼˜äºç»§æ‰¿å…³ç³»ã€‚å°½é‡ä½¿ç”¨ <strong>åˆæˆ/èšåˆ</strong>(has - a)ã€å°½é‡ä¸ä½¿ç”¨ç»§æ‰¿(is - a)ã€‚</li></ul></blockquote><h1 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h1><p>è¦åšåˆ°ä½è€¦åˆ</p><p>èµ„æºæ—¶ç‹¬ç«‹çš„(åªæœ‰ å±æ€§å’Œæ–¹æ³•)</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
          <category> æŠ„ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOP/OOD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java8æ–°ç‰¹æ€§</title>
      <link href="/2020/05/31/Java8%E6%96%B0%E7%89%B9%E6%80%A7/"/>
      <url>/2020/05/31/Java8%E6%96%B0%E7%89%B9%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><p><img src="C:%5CUsers%5C25778%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200923231111293.png" alt="image-20200923231111293"></p><h1 id="Java8æ–°ç‰¹æ€§"><a href="#Java8æ–°ç‰¹æ€§" class="headerlink" title="Java8æ–°ç‰¹æ€§"></a>Java8æ–°ç‰¹æ€§</h1><h2 id="Lamdaè¡¨è¾¾å¼"><a href="#Lamdaè¡¨è¾¾å¼" class="headerlink" title="Lamdaè¡¨è¾¾å¼"></a>Lamdaè¡¨è¾¾å¼</h2><blockquote><p>Î»è¡¨è¾¾å¼:</p><p>æœ¬è´¨ä¸Šä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹:</p><pre class=" language-java"><code class="language-java"><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> expression<span class="token punctuation">[</span>è¡¨è¾¾å¼<span class="token punctuation">]</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> statement<span class="token punctuation">[</span>è¯­å¥<span class="token punctuation">]</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>statements<span class="token punctuation">}</span></code></pre><ul><li>ä½¿ç”¨åŸå› <ol><li>é¿å…åŒ¿åå†…éƒ¨ç±»è¿‡å¤š</li><li>ä»£ç çœ‹ä¸Šå»ç®€æ´</li><li>å»æ‰äº†å†—ä½™çš„ä»£ç ,ç•™ä¸‹æ ¸å¿ƒé€»è¾‘</li></ol></li><li>ä½¿ç”¨å‰æ:<ol><li>ä¸€å®šæ˜¯Function Interface(å‡½æ•°å¼æ¥å£) â€” Function Interfaceå®šä¹‰:  ä»»ä½•æ¥å£å¦‚æœåªåŒ…å«å”¯ä¸€ä¸€ä¸ªæŠ½è±¡æ–¹æ³•, é‚£ä¹ˆè¿™å°±æ˜¯ä¸ªå‡½æ•°å¼æ¥å£. ä¾‹å¦‚ Runnable</li></ol></li></ul></blockquote><p>ä¾‹å­:</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å†™ä¸€ä¸ªå‡½æ•°å¼æ¥å£</span><span class="token keyword">public</span> Interface <span class="token class-name">TestInterface</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testmethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ç”¨lamdaåˆ›å»ºæ¥å£å¯¹è±¡</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åŒ¿åå†…éƒ¨ç±»å®ç° ,(æˆ‘è§‰å¾—Lamdaè¡¨è¾¾å¼æ˜¯åŒ¿åå†…éƒ¨ç±»çš„ç®€åŒ–)</span>    <span class="token keyword">new</span> <span class="token class-name">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// é‡å†™æ–¹æ³•</span>         <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testmethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä»£ç .....    </span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">testmethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å½“ç„¶æœ‰å‚æ•°çš„å°±å¯ä»¥æ·»åŠ å‚æ•°</span><span class="token comment" spellcheck="true">/*----------------------------------------------------*/</span>      <span class="token comment" spellcheck="true">// Lamdaè¡¨è¾¾å¼</span>   <span class="token comment" spellcheck="true">//Interface test1 = (å‚æ•°)->{æ–¹æ³•ä½“};</span>     Interface <span class="token class-name">test1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// ä»£ç ....</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">testmethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="javaå››ä¸ªå‡½æ•°å¼æ¥å£"><a href="#javaå››ä¸ªå‡½æ•°å¼æ¥å£" class="headerlink" title="javaå››ä¸ªå‡½æ•°å¼æ¥å£"></a>javaå››ä¸ªå‡½æ•°å¼æ¥å£</h2><table><thead><tr><th></th><th>å‡½æ•°å¼æ¥å£</th><th>å‚æ•°ç±»å‹</th><th>è¿”å›å€¼</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>1</td><td>Consumer<T><br/>     æ¶ˆè´¹å‹æ¥å£</td><td>T(æ³›å‹)</td><td>void</td><td>å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œ</td></tr><tr><td>2</td><td>Supplier<T> <br>ä¾›ç»™å‹æ¥å£</td><td>æ— </td><td>T</td><td>å®‰å¾½ç±»å‹ä¸ºTçš„å¯¹è±¡</td></tr><tr><td></td><td>Function&lt;T, K&gt;<br>å‡½æ•°å‹</td><td>T</td><td>R</td><td>å‚æ•°æœ‰ä¸¤ä¸ªTå’ŒR â€“  R.apply(T t)</td></tr><tr><td>4</td><td>Prediction<T><br>åˆ¤æ–­æ–­å®šå‹æ¥å£</td><td>T</td><td>Boolen</td><td>ç¡®å®šç±»å‹ä¸ºTçš„å¯¹è±¡æ˜¯å¦æ»¡è¶³çº¦æŸ,å¹¶ä¸”è¿”å›Booleanå€¼</td></tr><tr><td>5</td><td>BiFunction&lt;T,U,R&gt;<br>å¯ä»¥ä¼ é€’ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å‹æ¥å£</td><td>T,U</td><td>R</td><td>å¯ä»¥ä¼ é€’ä¸¤ä¸ªå‚æ•°</td></tr><tr><td>6</td><td>UnaryOperator<T><br>Functionçš„å­æ¥å£</td><td>T</td><td>T</td><td>å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡è¿›è¡Œæ“ä½œ è¿”å› æ“ä½œåçš„T</td></tr><tr><td>7</td><td>BinaryOperator<T><br>BiFunctionå­æ¥å£</td><td>T, T</td><td>T</td><td>äºŒå…ƒè¿ç®—</td></tr><tr><td>8</td><td>BiConsumer&lt;T, U&gt;</td><td>T U</td><td>void</td><td></td></tr><tr><td>9</td><td>ToIntFunction<T><br>ToLongFunction<T><br>ToDoubleFunction<T></td><td>T</td><td>int<br>Long<br/>double</td><td>ä¼ å‚æ•°è¿”å›ä¸åŒç±»å‹æ•°å€¼</td></tr><tr><td>10</td><td>IntFunction<R><br/>LongFunction<R><br/>DoubleFunction<R></td><td>int<br/>Long<br/>double</td><td>R</td><td>ä¸åŒå‚æ•°ç±»å‹è¿”å›R</td></tr></tbody></table><h2 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h2><blockquote><p>è‹¥lambdaä½“ä¸­çš„æ–¹æ³•å†…å®¹è¢«å®ç°äº† å°±å¯ä»¥ç”¨<strong>æ–¹æ³•å¼•ç”¨</strong>çš„æ–¹å¼å®ç°</p></blockquote><ul><li>å¯¹è±¡::å®ä¾‹æ–¹æ³•å</li><li>ç±»::é™æ€æ–¹æ³•</li><li>ç±»::å®ä¾‹æ–¹æ³•</li></ul><p><strong>ä½¿ç”¨ æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„  ==æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼==  ä¸€å®šè¦å’Œå¯¹åº”æ¥å£ä¸­  ==æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼==ç›¸ç­‰</strong></p><p>æ„é€ æ–¹æ³•: ç±»A::new ä¼šæ ¹æ®æ¥å£çš„ è¿”å›å€¼å’Œå‚æ•° è‡ªåŠ¨åŒ¹é…æ„é€ å™¨</p><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">method</span><span class="token punctuation">(</span>StreamDemo<span class="token operator">:</span><span class="token operator">:</span>_TEST<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> String <span class="token function">_TEST</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ“ä½œ1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"000"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span>MyFunction s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"real"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>out<span class="token operator">:</span><span class="token comment" spellcheck="true">/*æ“ä½œ1000real*/</span></code></pre><h2 id="streamæµè®¡ç®—"><a href="#streamæµè®¡ç®—" class="headerlink" title="streamæµè®¡ç®—"></a>streamæµè®¡ç®—</h2><blockquote><p>æµå¼è®¡ç®—</p></blockquote><p>åœ¨é¡¹ç›®ä¸­æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ é›†åˆç­‰åœ°æ–¹. æ•°æ®çš„å¤„ç†å°±è¦äº¤ç»™æµæ¥è®¡ç®—</p><blockquote><p> æ“ä½œæ­¥éª¤</p></blockquote><ol><li>åˆ›å»ºStreamæµ</li></ol><p>æ ¹æ®æ•°æ®æº é›†åˆ æ•°ç»„ä¸­åˆ›å»º</p><ol start="2"><li>æ ¹æ®APIæ“ä½œæ•°æ®</li></ol><p>ä¸€ä¸ªæ“ä½œé“¾è¿›è¡Œé€‰æ‹©æ’åº,,,</p><ol start="3"><li>ç»“æŸ/ç»ˆæ­¢æ“ä½œ</li></ol><p>æ‰§è¡Œæ“ä½œäº†é“¾æ¡äº§ç”Ÿç»“æœ    å¯ä»¥ä½¿ç”¨java7çš„try-with-resources</p><p><a href="https://www.runoob.com/java/java8-streams.html" target="_blank" rel="noopener">APIçœ‹è¿™é‡Œ</a></p><p>ä¸¾ä¸ªğŸŒ°</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// id,age,name.major</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Student s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"sjs"</span><span class="token punctuation">,</span> <span class="token string">"jsj"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">"zs"</span><span class="token punctuation">,</span> <span class="token string">"dzx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">"ls"</span><span class="token punctuation">,</span> <span class="token string">"dzx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">"ww"</span><span class="token punctuation">,</span> <span class="token string">"xx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">"lb"</span><span class="token punctuation">,</span> <span class="token string">"dzx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Student s6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">"hhh"</span><span class="token punctuation">,</span> <span class="token string">"jsj"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Student<span class="token operator">></span> students <span class="token operator">=</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3<span class="token punctuation">,</span> s3<span class="token punctuation">,</span> s4<span class="token punctuation">,</span> s5<span class="token punctuation">,</span> s6<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ ¹æ®é›†åˆåˆ›å»ºä¸€ä¸ªæµå¹¶æ“ä½œ</span>        <span class="token comment" spellcheck="true">/*         * å»é‡         * æ‰¾åˆ°idæ˜¯å¶æ•°çš„         * age å¤§äº14çš„         * é€†åºæ’åˆ—         * */</span>        Stream<span class="token operator">&lt;</span>Student<span class="token operator">></span> stream <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> a<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">filter</span><span class="token punctuation">(</span>a <span class="token operator">-</span><span class="token operator">></span> a<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">map</span><span class="token punctuation">(</span>a <span class="token operator">-</span><span class="token operator">></span> a<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> b<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> a<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JDK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDK1.8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹æ¨¡å¼</title>
      <link href="/2020/05/31/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/05/31/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å•ä¾‹æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼</h1><p><strong><em>æ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜,ä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚</em></strong></p><h2 id="å•ä¾‹æ¨¡å¼-Singleton"><a href="#å•ä¾‹æ¨¡å¼-Singleton" class="headerlink" title="å•ä¾‹æ¨¡å¼(Singleton)"></a>å•ä¾‹æ¨¡å¼(Singleton)</h2><blockquote><p>ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹, å¹¶æä¾›ä¸€ä¸ªè®¿é—®çš„å…¨å±€è®¿é—®ç‚¹[^ DP]</p><p>ä¸ºäº†ä¸å®ä¾‹åŒ–å‡ºå¤šä¸ªå¯¹è±¡,è®©ç±»è‡ªèº«<strong>è´Ÿè´£</strong>ä¿å­˜ä»–çš„å”¯ä¸€å®ä¾‹. è¿™ä¸ªç±»å¯ä»¥ä¿è¯æ²¡æœ‰å…¶ä»–å®ä¾‹å¯ä»¥è¢«åˆ›å»º, å¹¶ä¸”ä»–å¯ä»¥æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„æ–¹æ³•</p><p><img src="https://i.loli.net/2020/06/02/epTE4LbXZkhvYFW.png" alt="å•ä¾‹æ¨¡å¼"></p><p>å•ä¾‹æ¨¡å¼å› ä¸ºSingletonç±»å°è£…äº†ä»–å”¯ä¸€çš„å®ç°ç±», å¯ä»¥ä¸¥æ ¼æ§åˆ¶å®¢æˆ·æ€æ ·è®¿é—®ä»¥åŠä½•æ—¶è®¿é—®å®ƒ.â€”å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®</p><p>ç¤ºä¾‹ä»£ç :</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// privateçš„å®ä¾‹å˜é‡</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"you win!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// ç§æœ‰çš„æ„é€ æ–¹æ³• è®©å…¶ä»–ç±»ä¸èƒ½è®¿é—®</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> null<span class="token punctuation">)</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¦‚æœå®ä¾‹ä¸ºç©ºåˆ™åˆ›å»º</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre></blockquote><h2 id="å¤šçº¿ç¨‹å•ä¾‹æ¨¡å¼"><a href="#å¤šçº¿ç¨‹å•ä¾‹æ¨¡å¼" class="headerlink" title="å¤šçº¿ç¨‹å•ä¾‹æ¨¡å¼"></a>å¤šçº¿ç¨‹å•ä¾‹æ¨¡å¼</h2><blockquote><p>åœ¨å¤šä¸ªçº¿ç¨‹ä¸­, å•ä¾‹æ¨¡å¼ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®Singletonç±», ä¼šå‡ºç°åˆ›å»ºäº†å¤šä¸ªå®ä¾‹çš„æƒ…å†µ.   æ‰€ä»¥æˆ‘ä»¬ç»™ä»–åŠ <strong>é”</strong></p></blockquote><h2 id="åŒé‡é”å®š"><a href="#åŒé‡é”å®š" class="headerlink" title="åŒé‡é”å®š"></a>åŒé‡é”å®š</h2><blockquote><p>å½“ç„¶åŠ é”åæ¯ä¸ªçº¿ç¨‹æƒ³è®¿é—®Singletonç±»éƒ½è¦ç­‰å¾…äº†, æ‰€ä»¥æˆ‘ä»¬ä¼˜åŒ–ä¸€ä¸‹ â€”  åŒé‡é”å®š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton intance<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// privateçš„å®ä¾‹å˜é‡</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Object synchronizedLOCK <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é”å¯¹è±¡</span>    <span class="token comment" spellcheck="true">//åªæœ‰staticçš„æˆå‘˜æ‰èƒ½åœ¨æ²¡æœ‰åˆ›å»ºå¯¹è±¡æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚ä¸”ç±»çš„é™æ€æˆå‘˜åœ¨ç±»ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶åˆå§‹åŒ–åå°±ä¸ä¼šå†è¢«åˆå§‹åŒ–ï¼Œä¿è¯äº†å•ä¾‹</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"you win!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// ç§æœ‰çš„æ„é€ æ–¹æ³• è®©å…¶ä»–ç±»ä¸èƒ½è®¿é—®</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getIntance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>intance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>synchronizedLOCK<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>intance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    intance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// å¦‚æœå®ä¾‹ä¸ºç©ºåˆ™åˆ›å»º</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> intance<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></blockquote><h2 id="é¥¿æ±‰-æ‡’æ±‰å•ä¾‹ç±»"><a href="#é¥¿æ±‰-æ‡’æ±‰å•ä¾‹ç±»" class="headerlink" title="é¥¿æ±‰/æ‡’æ±‰å•ä¾‹ç±»"></a>é¥¿æ±‰/æ‡’æ±‰å•ä¾‹ç±»</h2><blockquote><ul><li><p>é¥¿æ±‰</p><ol><li>é™æ€åˆå§‹åŒ–çš„æ–¹å¼åœ¨è‡ªå·±è¢«åŠ è½½æ—¶å°±å°†è‡ªå·±å®ä¾‹åŒ–</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHungry</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> SingletonHungry intance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingletonHungry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">SingletonHungry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Creat new !!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> SingletonHungry <span class="token function">getIntance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> intance<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>æ‡’æ±‰</p><ol><li>åœ¨ç¬¬ä¸€æ¬¡è¢«å¼•ç”¨æ—¶,æ‰ä¼šå°†è‡ªå·±å®ä¾‹åŒ–</li></ol></li><li><p>ä¼˜ç¼ºç‚¹: é¥¿æ±‰ç±»ä¸€åŠ è½½å°±å®ä¾‹å‡ºå¯¹è±¡, ä¼šæå‰å ç”¨ç³»ç»Ÿèµ„æº.     æ‡’æ±‰é¢ä¸´å¤šçº¿ç¨‹è®¿é—®çš„å•åœˆé—®é¢˜,è¦åŠ åŒé‡é”å®š. å…·ä½“ç”¨å“ªä¸ªå–å†³äºå®é™…éœ€æ±‚</p></li><li><p><strong>å…·ä½“ç”¨å“ªä¸ªå–å†³äºå®é™…éœ€æ±‚</strong></p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§è¯è®¾è®¡æ¨¡å¼ </category>
          
          <category> æŠ„ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GOF-23 </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç†æ¨¡å¼</title>
      <link href="/2020/05/31/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/05/31/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»£ç†æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼"></a>ä»£ç†æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼</h1><p><strong><em>æ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜,ä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚</em></strong></p><p>å•Šå“ˆ<a href="æˆ‘å¯çœŸèƒ½æ‹–">^ =.= </a> :expressionless:</p><h2 id="ä»£ç†æ¨¡å¼-Proxy"><a href="#ä»£ç†æ¨¡å¼-Proxy" class="headerlink" title="ä»£ç†æ¨¡å¼(Proxy)"></a>ä»£ç†æ¨¡å¼(Proxy)</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><blockquote><p><strong>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç† ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®(DP).</strong></p><ul><li>è§’è‰²:<ol><li>æŠ½è±¡è§’è‰²: ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°(çœŸå®å¯¹è±¡å’Œä»£ç†å¯¹è±¡çš„å…±åŒæ–¹æ³•)</li><li>çœŸå®è§’è‰²: è¢«ä»£ç†çš„è§’è‰²</li><li>ä»£ç†è§’è‰²: ä»£ç†çœŸæ˜¯è§’è‰² å½“ç„¶å¯ä»¥æ‰©å±•å…¶ä»–ä¸šåŠ¡</li><li>å®¢æˆ·ç«¯: å…·ä½“æ“ä½œ é€šè¿‡ä»£ç†ç±»è®¿é—®ä»£ç†å¯¹è±¡</li></ol></li><li>å¥½å¤„<ol><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„ä¸šåŠ¡æ›´çº¯ç²¹! å…¶ä»–çš„å…¬å…±ä¸šåŠ¡å’Œæ‰©å±•ä¸šåŠ¡ä¸ç”¨è€ƒè™‘</li><li>å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ â€“ å…¬å…±ä¸šåŠ¡äº¤ç»™ä»£ç†ç±»</li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶, æ–¹ä¾¿ç®¡ç† (è§£è€¦)</li></ol></li><li><strong>é™æ€ä»£ç†ç¼ºç‚¹</strong>æ˜¾ç„¶å¾ˆæ˜æ˜¾:  ä»£ç†åªèƒ½æœåŠ¡ä¸€ä¸ªç±», è¦æ˜¯æƒ³ä»£ç†å¾ˆå¤šç±»å°±è¦æ„å»ºå¤šä¸ªä»£ç†ç±» </li></ul></blockquote><blockquote><p><img src="https://i.loli.net/2020/09/14/RLpAM1TtmGndJFD.png" alt="ä»£ç†æ¨¡å¼å®ç°"></p><p>ä»£ç éƒ¨åˆ†</p><pre class=" language-java"><code class="language-java">            <span class="token comment" spellcheck="true">/* å…¬ç”¨æ¥å£ç±» */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å®šä¹‰ RealSubjectå’ŒProxyçš„å…¬å…±æ–¹æ³•</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>            <span class="token comment" spellcheck="true">/* ä»£ç†ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä¿å­˜ä¸€ä¸ªå¼•ç”¨ ä½¿å¾—ä»£ç†å¯ä»¥è®¿é—®å®ä½“ , ç»§æ‰¿äº†åŒä¸€ä¸ªæ¥å£ æ‰€ä»¥å¯ä»¥å®ç°çœŸå®å®ä½“çš„æ‰€æœ‰è¯·æ±‚</span>    <span class="token keyword">private</span> RealSubject realSubject<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç»„åˆå½¢å¼è·å–</span>    <span class="token comment" spellcheck="true">// åœ¨Springæ¡†æ¶ä¸­æ¨èä½¿ç”¨ setæ–¹æ³•æ¥è·å–å¯¹è±¡</span>    <span class="token annotation punctuation">@Override</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>realSubject <span class="token operator">==</span> null<span class="token punctuation">)</span> realSubject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        realSubject<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è°ƒç”¨çœŸå®çš„æ–¹æ³•</span>        <span class="token comment" spellcheck="true">// å½“ç„¶å¯ä»¥åŠ ç‚¹ä¸œè¥¿</span>        <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ‰©å±•çš„ä¸šåŠ¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¢åŠ äº†æ—¥å¿—æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>          <span class="token comment" spellcheck="true">/* çœŸå®å®ä½“ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä»£ç†ç±»ä»£ç†çš„çœŸå®å®ä½“</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®é™…çš„è¯·æ±‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token comment" spellcheck="true">// å®¢æˆ·ç«¯</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Proxy p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    p<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é€šè¿‡ä»£ç†è®¿é—®çœŸå®çš„æ–¹æ³•</span><span class="token punctuation">}</span></code></pre></blockquote><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><blockquote><ul><li><strong>è¿œç¨‹ä»£ç†</strong><ol><li>å°±æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„åœ°å€ç©ºé—´æä¾›æ®ä¸åŒä»£è¡¨.  è¿™æ ·å¯ä»¥éšè—ä¸€ä¸ªå¯¹è±¡å­˜åœ¨äºä¸åŒåœ°å€ç©ºé—´çš„äº‹å®</li></ol></li><li>è™šæ‹Ÿä»£ç†<ol><li>æ˜¯æ ¹æ®éœ€è¦åˆ›å»ºå¼€é”€å¾ˆå¤§çš„å¯¹è±¡. é€šè¿‡å®ƒå­˜æ”¾å®ä¾‹åŒ–éœ€è¦å¾ˆé•¿æ—¶é—´çš„å¯¹è±¡.</li></ol></li><li>å®‰å…¨ä»£ç†<ol><li>ç”¨æ¥æ§åˆ¶çœŸå®å¯¹è±¡è®¿é—®æ—¶çš„æƒé™.  </li></ol></li><li>åªèƒ½æŒ‡å¼•<ol><li>æ˜¯æŒ‡å½“è°ƒç”¨çœŸå®å¯¹è±¡æ—¶, ä»£ç†å¤„ç†å¦å¤–ä¸€äº›äº‹</li></ol></li></ul></blockquote><h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><blockquote><p>å½“ç„¶ä»¥ä¸Šæ˜¯é™æ€ä»£ç†çš„å®ç°</p><p><strong>é™æ€ä»£ç†ç¼ºç‚¹</strong>æ˜¾ç„¶å¾ˆæ˜æ˜¾:  ä»£ç†åªèƒ½æœåŠ¡ä¸€ä¸ªç±», è¦æ˜¯æƒ³ä»£ç†å¾ˆå¤šç±»å°±è¦æ„å»ºå¤šä¸ªä»£ç†ç±» </p><blockquote><ul><li>ç”¨åå°„æœºåˆ¶æ„å»ºåŠ¨æ€ä»£ç†</li><li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„</li><li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±» â€“ åŸºäºæ¥å£ â€“ åŸºäºç±»<ol><li>åŸºäºæ¥å£: JDKåŠ¨æ€ä»£ç†</li><li>åŸºäºç±»: cglib</li><li>javaå­—èŠ‚ç å®ç°: javasist</li></ol></li><li>éœ€è¦ Proxy å’ŒInvocationHandler ä¸¤ä¸ªç±»æ¥åˆ›å»ºåŠ¨æ€ä»£ç†ç±»</li></ul></blockquote><blockquote><p><strong>JDKåŠ¨æ€ä»£ç†</strong>: å’Œé™æ€ä»£ç†å…±åŒçš„æ˜¯éƒ½è¦æœ‰<strong>çœŸå®å®ä½“ç±»å’Œæ¥å£</strong></p></blockquote><p> å®ä½“ç±»å’Œæ¥å£:</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æ¥å£</span> <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å®šä¹‰ RealSubjectå’Œéœ€è¦è¢«ä»£ç†çš„æ–¹æ³•æ–¹æ³•</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// çœŸå®å®ä½“ç±»</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ä»£ç†ç±»ä»£ç†çš„çœŸå®å®ä½“</span>  <span class="token annotation punctuation">@Override</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®é™…çš„è¯·æ±‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p> åŠ¨æ€ä»£ç†å®ç°:</p><blockquote><p> <strong>InvocationHandler</strong>æ˜¯ä¸ªæ¥å£: åªæœ‰ä¸€ä¸ªinvokeæ–¹æ³•  æ­¤æ–¹æ³•åœ¨ç”Ÿæˆäº†ä¸€ä¸ª $Proxy.class æ–‡ä»¶ä¸­è¢«è°ƒç”¨â€“ (å…·ä½“æºç )[<a href="https://www.cnblogs.com/liuyun1995/p/8157098.html]" target="_blank" rel="noopener">https://www.cnblogs.com/liuyun1995/p/8157098.html]</a></p><p><strong>Proxy</strong>æä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»çš„é™æ€æ–¹æ³•</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åˆ›å»ºåŠ¨æ€ä»£ç†å·¥å…· -- å®ç°æ¥å£</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyProxyInvocationHandlerTemplate</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>     <span class="token keyword">private</span> Object target<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç›®æ ‡æ¥å£ -- æ”¹ä¸ºå¯å¤ç”¨çš„Objç±»</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTarget</span><span class="token punctuation">(</span>Object target<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>     <span class="token punctuation">}</span>     <span class="token keyword">public</span> Object <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// ä¸‰ä¸ªå‚æ•° 1. ç±»åŠ è½½å™¨ 2. åå°„å›å»æ¥å£ 3. InvocationHandler(å°±æ˜¯æœ¬èº«)</span>         <span class="token keyword">return</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>     <span class="token annotation punctuation">@Override</span>     <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>         <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ‰©å±•ä¸šåŠ¡</span>         Object o <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> o<span class="token punctuation">;</span>     <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">// æ‰©å±•ä¸šåŠ¡</span>      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><p> å®¢æˆ·ç«¯:</p><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//        p.method(); // é€šè¿‡ä»£ç†è®¿é—®çœŸå®çš„æ–¹æ³•</span>         <span class="token comment" spellcheck="true">// åŠ¨æ€ä»£ç†</span>         <span class="token comment" spellcheck="true">// å®ä¾‹åŠ¨æ€ä»£ç†å·¥å…·</span>         MyProxyInvocationHandlerTemplate template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyProxyInvocationHandlerTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// å®ä¾‹çœŸçœŸå®è§’è‰²</span>         RealSubject subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         template<span class="token punctuation">.</span><span class="token function">setTarget</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>         Subject sub <span class="token operator">=</span> <span class="token punctuation">(</span>Subject<span class="token punctuation">)</span> template<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆ›å»ºä»£ç†ç±»</span>         sub<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ‰§è¡Œå…¬å…±æ¥å£çš„æ–¹æ³•</span>         <span class="token comment" spellcheck="true">// ä¹Ÿä¼šæœ‰é™„åŠ ä¸šåŠ¡çš„è°ƒç”¨</span>     <span class="token punctuation">}</span></code></pre></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¤§è¯è®¾è®¡æ¨¡å¼ </category>
          
          <category> æŠ„ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GOF-23 </tag>
            
            <tag> ä»£ç†æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springçš„AOPå’ŒIOC</title>
      <link href="/2020/05/27/Spring%E7%9A%84AOP%E5%92%8CIOC/"/>
      <url>/2020/05/27/Spring%E7%9A%84AOP%E5%92%8CIOC/</url>
      
        <content type="html"><![CDATA[<h1 id="Springçš„IOCå’ŒAOP"><a href="#Springçš„IOCå’ŒAOP" class="headerlink" title="Springçš„IOCå’ŒAOP"></a>Springçš„IOCå’ŒAOP</h1><p>[toc]</p><h2 id="Springä»‹ç»"><a href="#Springä»‹ç»" class="headerlink" title="Springä»‹ç»"></a>Springä»‹ç»</h2><blockquote><p>Springæ¡†æ¶å³ä»¥<em>interface21<em>æ¡†æ¶ä¸ºåŸºç¡€,ç»è¿‡é‡æ–°è®¾è®¡,å¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µ,äº</em>2004<em>å¹´</em>3æœˆ24æ—¥</em>,å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚ä½œè€…: [Rod Johnson]([<a href="https://baike.baidu.com/item/Rod%20Johnson/1423612?fr=aladdin]" target="_blank" rel="noopener">https://baike.baidu.com/item/Rod%20Johnson/1423612?fr=aladdin]</a>(<a href="https://baike.baidu.com/item/Rod" target="_blank" rel="noopener">https://baike.baidu.com/item/Rod</a> Johnson/1423612?fr=aladdin))</p><p>==éå…¥ä¾µå¼, è½»é‡çº§æ¡†æ¶ â€“ æ”¯æŒäº‹åŠ¡==</p></blockquote><blockquote><p>Spring(å®¹å™¨/ä»£ç†ç±»æ¡†æ¶)  </p></blockquote><p> <img src="https://i.loli.net/2020/05/27/Pcl8ygk3zEiVHWY.png" alt="image.png"></p><ul><li><p>Springä¸ƒä¸ªæ¨¡å—</p><p><img src="https://i.loli.net/2020/06/28/jWdqFXVefgiDCH4.png" alt="image.png"></p></li></ul><h2 id="IOC-æ§åˆ¶åè½¬"><a href="#IOC-æ§åˆ¶åè½¬" class="headerlink" title="IOC(æ§åˆ¶åè½¬)"></a>IOC(æ§åˆ¶åè½¬)</h2><p>IOC â€“ Inversion of Control</p><blockquote><p>DIï¼šä¾èµ–æ³¨å…¥ï¼šå®ç°æ–¹å¼</p><p>IOCï¼šæ§åˆ¶åè½¬:==<strong>æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³</strong>==</p></blockquote><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><ol><li><p>ä½œç”¨: å€ŸåŠ©äºâ€œç¬¬ä¸‰æ–¹â€å®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦</p></li><li><p>ç†å¿µ: åº”ç”¨ç»„ä»¶<strong>ä¸åº”è¯¥è´Ÿè´£æŸ¥æ‰¾èµ„æºæˆ–è€…å…¶ä»–çš„å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</strong>, é…ç½®è¿™ä¸ªå…³ç³»çš„ç”±å®¹å™¨è´Ÿè´£, æŸ¥æ‰¾èµ„æºä»åº”ç”¨ç»„ä»¶çš„ä»£ç ä¸­æŠ½å–å‡ºæ¥(set); äº¤ç»™å®¹å™¨</p></li><li></li><li><p>IOCæ§åˆ¶:</p><ul><li><strong>è°æ§åˆ¶è°</strong>: iocå®¹å™¨æ§åˆ¶äº†å¯¹è±¡</li><li><strong>æ§åˆ¶ä»€ä¹ˆ</strong> : ä¸»è¦æ§åˆ¶äº†å¤–éƒ¨èµ„æºçš„è·å–,åˆ›å»º<pre><code>1. å¯¹è±¡ç”±Springåˆ›å»ºã€ç®¡ç†ã€è£…é…   2.  æ§åˆ¶çš„å†…å®¹ï¼šæ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼šä¼ ç»Ÿçš„ç”±ç¨‹åºæœ¬èº«å»åˆ›å»º, æ¡†æ¶ç”±Springæ¥åˆ›å»ºå’Œç®¡ç†</code></pre></li></ul></li><li><p><strong>IOCåè½¬</strong>ï¼š(æ­£è½¬ï¼šç¨‹åºè‡ªå·±åˆ›å»ºå¯¹è±¡)</p><ul><li><p><strong>åè½¬:</strong> ç”±å®¹å™¨å¸®æˆ‘ä»¬æŸ¥æ‰¾å’Œæ³¨å…¥äº†ä¾èµ–å¯¹è±¡, å¯¹è±¡åªæ˜¯è¢«åŠ¨åœ°æ¥å—</p></li><li><p><strong>åè½¬äº†å•¥:</strong> æŠŠä¾èµ–å¯¹è±¡çš„è·å–æ–¹å¼åè½¬äº†</p></li></ul><ol><li>å¯¹è±¡Aè·å¾—ä¾èµ–å¯¹è±¡Bçš„è¿‡ç¨‹,ç”±ä¸»åŠ¨è¡Œä¸ºå˜ä¸ºäº†è¢«åŠ¨è¡Œä¸ºï¼Œæ§åˆ¶æƒé¢ å€’è¿‡æ¥äº†ï¼Œè¿™å°±æ˜¯â€œæ§åˆ¶åè½¬â€  å®˜æ–¹ä¸€ç‚¹å°±æ˜¯åŸæ¥å¯¹è±¡é—´çš„å…³ç³»ç”±ç¨‹åºçŒ¿çš„éƒ¨åˆ†æ§åˆ¶; ç°åœ¨ç”±å®¹å™¨æ¡†æ¶æ¥åˆ›å»ºå’Œç®¡ç†</li></ol></li></ol><ul><li><p>ç”¨ä¸€ä¸ªç®€å•ä¾‹å­ç†è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆæœ‰IOC</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åœ¨æ­£å¸¸å¼€å‘ä¸­ æŠŠä¼ é€’çš„å¯¹è±¡ç”¨setæ¥å®ç°åŠ¨æ€åŒ– å¤§å¤§é™ä½äº†è€¦åˆåº¦</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDAO</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// åŸå…ˆæ˜¯ DAOå±‚æ¥åˆ›å»ºå¯¹è±¡å’Œä¾èµ–å…³ç³» è€¦åˆåº¦è¶…é«˜ ä¸€æ—¦éœ€è¦æ›´æ”¹ å°±è¦æ”¹æºç </span>    <span class="token comment" spellcheck="true">// MyDataBase dao = new DataBase();</span>    MyDataBase dao<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// æŠŠéœ€è¦çš„å¯¹è±¡ç”¨æ¥ä¼ é€’å å°±æ˜¯æœåŠ¡ç«¯ä¼ é€’å¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDao</span><span class="token punctuation">(</span>MyDataBase dao<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>dao <span class="token operator">=</span> dao<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é€šè¿‡"</span> <span class="token operator">+</span> dao<span class="token punctuation">.</span><span class="token function">thisName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"è·å–åˆ°äº†åå­—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ul><h3 id="IOCå®ç°"><a href="#IOCå®ç°" class="headerlink" title="IOCå®ç°"></a>IOCå®ç°</h3><p>mavenå¯¼å…¥:</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.3.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><img src="https://i.loli.net/2020/06/29/d6ZkSsux2f8Dwgv.png" alt="image.png"></p><ol><li><p>ä¼ ç»Ÿçš„è®¾è®¡æ¨¡å¼ ç”±ç¨‹åºæœ¬èº«newå‡ºå¯¹è±¡,ä¸»åŠ¨å»åˆ›å»ºä¾èµ–,è€¦åˆåº¦å¾ˆé«˜</p></li><li><p>å½“æœ‰äº†IOCå®¹å™¨å,åœ¨å®¢æˆ·ç«¯ç±»ä¸­ä¸å†ä¸»åŠ¨å»åˆ›å»ºè¿™äº›å¯¹è±¡äº†</p></li></ol><p><img src="https://i.loli.net/2020/06/29/9YnpjRGZdbw1DoL.png" alt="image.png"></p><ol><li>pojoç±»</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"new"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>String hello<span class="token punctuation">;</span><span class="token keyword">public</span> String <span class="token function">getHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> hello<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä¸€å®šè¦æœ‰setæ–¹æ³• Springé€šè¿‡setæ¥è·å–å¯¹è±¡</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHello</span><span class="token punctuation">(</span>String hello<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hello <span class="token operator">=</span> hello<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"Hello{"</span> <span class="token operator">+</span><span class="token string">"hello='"</span> <span class="token operator">+</span> hello <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">'}'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="2"><li><p>é…ç½®æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml">  <span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans          https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token comment" spellcheck="true">&lt;!-- åœ¨åŠ è½½é…ç½®æ–‡ä»¶æ—¶ å¯¹è±¡å°±å·²ç»newå‡º          å®¹å™¨åˆ›å»ºäº†å¯¹è±¡          id å°±åƒå¯¹è±¡å      --></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello Spring<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">  <span class="token comment" spellcheck="true">// å®¢æˆ·ç«¯åŠ è½½é…ç½®æ–‡ä»¶ è·å–éœ€è¦çš„Beanå³å¯</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>          ApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"ApplicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¯ä»¥åŠ è½½å¤šä¸ªXMLæ–‡ä»¶</span>          Hello hello <span class="token operator">=</span> <span class="token punctuation">(</span>Hello<span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hello<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span></code></pre><p><strong>åœ¨Springä¸­å¯¹è±¡ç”±å®¹å™¨åˆ›å»º, ç®¡ç†, è£…é…</strong></p></li></ol><h3 id="Springçš„BeanFactoryå®ç°ç”ŸæˆBean"><a href="#Springçš„BeanFactoryå®ç°ç”ŸæˆBean" class="headerlink" title="Springçš„BeanFactoryå®ç°ç”ŸæˆBean"></a>Springçš„BeanFactoryå®ç°ç”ŸæˆBean</h3><ul><li>Springæ˜¯ä¸€ä¸ªå¤§çš„Beanå·¥å‚, è´Ÿè´£Beançš„åˆ›å»ºå’Œæ³¨å…¥</li><li>Beanåˆ›å»ºæµç¨‹</li></ul><p><img src="https://i.loli.net/2020/07/05/G78ImnKQaSyFwVj.png" alt="image.png"></p><ol><li>ResourceLoader<strong>åŠ è½½é…ç½®æ–‡ä»¶</strong> </li><li><strong>BeanDefinitionReaderè§£æé…ç½®æ–‡ä»¶</strong>â€“ å°†<Bean> <strong>è§£æä¸ºBeanDefinitionå¯¹è±¡</strong>, å¹¶ä¿å­˜åˆ°BeanDefinitionRegistry</li><li>åˆ©ç”¨åå¤„ç†å™¨BeanFactoryPostProcessor<strong>å¯¹BeanDefinitionåŠ å·¥å¤„ç†</strong><ul><li>ä½¿ç”¨<Bean>æ ‡ç­¾è¿›è¡Œè§£æ.<strong>å°†å ä½ç¬¦æ›¿æ¢ä¸ºçœŸå®å€¼</strong></li><li>å¯¹æ‰€æœ‰çš„BeanDefinitionæ‰«æ,<strong>ç”¨åå°„æœºåˆ¶æ‰¾å‡ºæ‰€æœ‰çš„å±æ€§ç¼–è¾‘å™¨çš„Bean</strong>,æ³¨å†Œåˆ°PropertyEditorRegistry</li></ul></li><li>ä»BeanDefinitionRegistryä¸­å–å‡ºBeanDefinition, è°ƒç”¨InstantiationStrategy<strong>è¿›è¡Œå®ä¾‹åŒ–</strong></li><li>å®ä¾‹åŒ–æ—¶, åˆ©ç”¨BeanWrapperå¯¹Beanè®¾ç½®å±æ€§</li><li>åˆ©ç”¨åå¤„ç†å™¨BeanFactoryPostProcessor<strong>å¯¹å®Œæˆçš„Beanè¿›è¡ŒåŠ å·¥</strong> </li></ol><h3 id="Beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸ"></a>Beançš„ç”Ÿå‘½å‘¨æœŸ</h3><blockquote><p>iocå¯åŠ¨å…ˆäº§ç”Ÿä¸€ä¸ªBeanDedinition å æœ‰å¯èƒ½ä¼šè§¦å‘å®ä¾‹åŒ–</p><p>å¦‚æœæ˜¯åŸå‹æ¨¡å¼åœ¨getBeanæ—¶ä¼šå®ä¾‹åŒ–</p><p>å•ä¾‹æ¨¡å¼åœ¨åˆå§‹åŒ–å®ä¾‹åå›åˆ°å®¹å™¨ä¸­å¯»æ‰¾</p></blockquote><ol><li><strong>å®ä¾‹åŒ–beanå¯¹è±¡</strong></li><li><strong>è®¾ç½®å±æ€§(DIæ³¨å…¥)</strong></li><li><strong>è°ƒç”¨Beançš„åˆå§‹åŒ–æ–¹æ³•</strong></li><li><strong>ä½¿ç”¨Bean</strong></li><li><strong>å®¹å™¨å…³é—­å‰é”€æ¯Bean</strong></li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//Beançš„é”€æ¯æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroyStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Studentè¿™ä¸ªBeanï¼šé”€æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// é…ç½®:</span>destroy<span class="token operator">-</span>methodï¼šæŒ‡å®šé”€æ¯çš„æ–¹æ³• </code></pre><h3 id="BeanFactoryä¸ApplicationContextæ˜¯å¹²ä»€ä¹ˆçš„-åŒºåˆ«"><a href="#BeanFactoryä¸ApplicationContextæ˜¯å¹²ä»€ä¹ˆçš„-åŒºåˆ«" class="headerlink" title="BeanFactoryä¸ApplicationContextæ˜¯å¹²ä»€ä¹ˆçš„,åŒºåˆ«?"></a>BeanFactoryä¸ApplicationContextæ˜¯å¹²ä»€ä¹ˆçš„,åŒºåˆ«?</h3><table><thead><tr><th>BeanFactory</th><th>ApplicationContext</th></tr></thead><tbody><tr><td>éƒ½æ˜¯å®¹å™¨</td><td>éƒ½æ˜¯å®¹å™¨</td></tr><tr><td>é¡¶å±‚-åŸºç¡€æ¥å£,å®ç°äº†åŸºç¡€åŠŸèƒ½</td><td>å®¹å™¨çš„é«˜çº§å½¢æ€,å¢åŠ äº†ç‰¹æ€§,é¡¶çº§çˆ¶ç±»æ˜¯BeanFactory</td></tr></tbody></table><p>FactoryBeanæ˜¯ä¸€ä¸ªBean,ç”¨äºç”Ÿäº§ä¿®é¥°å…¶ä»–çš„Beanå®ä¾‹,å…¸å‹çš„æ˜¯AOPä»£ç†ç±»</p><h3 id="Springçš„IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#Springçš„IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="Springçš„IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>Springçš„IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h3><ol><li><p><strong>æ— å‚æ„é€ :</strong></p><ul><li>ä¸Šæ…¢çš„ä¾‹å­å°±æ˜¯</li></ul></li><li><p><strong>æœ‰å‚æ„é€ (3ä¸­æ–¹å¼)</strong></p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- é€šè¿‡æ„é€ å™¨å‚æ•°åå­—è·å– --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello Spring<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--é€šè¿‡æ„é€ å™¨å‚æ•°ç´¢å¼•--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello Spring<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- é€šè¿‡ç±»å‹ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>java.lang.String<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello Spring<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre></li><li><p><strong>å·¥å‚æ–¹å¼åˆ›å»º</strong></p><ol><li>é™æ€å·¥å‚</li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å·¥å‚ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactory</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Hello <span class="token function">getInstance</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml">é…ç½®æ–‡ä»¶<span class="token comment" spellcheck="true">&lt;!-- é™æ€å·¥å‚æ–¹æ³•--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>factory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.MyFactory<span class="token punctuation">"</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getInstance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello Factory<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><ol start="2"><li>åŠ¨æ€å·¥å‚</li></ol><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å·¥å‚ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactory</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span>  Hello <span class="token function">getInstance</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- åŠ¨æ€å·¥å‚æ–¹æ³•   ä¸é™æ€æ¯”å°‘äº†static --></span><span class="token comment" spellcheck="true">&lt;!--æ³¨å†Œå·¥å‚--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>factory<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.MyFactory<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token comment" spellcheck="true">&lt;!--å¯¹åº”å·¥å‚çš„å¯¹åº”æ–¹æ³•åˆ›å»ºå¯¹åº”çš„å¯¹è±¡--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>factory<span class="token punctuation">"</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getInstance<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Hello Dynamic Factory<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre></li></ol><h2 id="DI-ä¾èµ–æ³¨å…¥"><a href="#DI-ä¾èµ–æ³¨å…¥" class="headerlink" title="DI - ä¾èµ–æ³¨å…¥"></a>DI - ä¾èµ–æ³¨å…¥</h2><h3 id="æ„é€ å™¨æ³¨å…¥"><a href="#æ„é€ å™¨æ³¨å…¥" class="headerlink" title="æ„é€ å™¨æ³¨å…¥"></a>æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢æœ‰çš„å°±æ˜¯æ„é€ å™¨</p><h3 id="setæ³¨å…¥"><a href="#setæ³¨å…¥" class="headerlink" title="setæ³¨å…¥"></a>setæ³¨å…¥</h3><ul><li>ä¾èµ–æ³¨å…¥<ol><li>ä¾èµ–: beanå¯¹è±¡çš„<strong>åˆ›å»º</strong>ä¾èµ–å®¹å™¨</li><li>æ³¨å…¥: beançš„æ‰€æœ‰å±æ€§ç”±å®¹å™¨æ³¨å…¥</li></ol></li></ul><blockquote><p>æ³¨å…¥é…ç½®</p></blockquote><ul><li>æ‰€æœ‰ç±»å‹</li></ul><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Address<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>people<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.People<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--æ™®é€š--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>me<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å¼•ç”¨å¯¹è±¡--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--set--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>12345<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>123422<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--map--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>game<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1å·<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lol<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2å·<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ow<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--Properties--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>other<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>key<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>secend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hahah<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- results in a setSomeList(java.util.List) call --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>someList<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>a list element followed by a reference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myDataSource<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><h3 id="æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="æ‹“å±•æ–¹å¼æ³¨å…¥"></a>æ‹“å±•æ–¹å¼æ³¨å…¥</h3><ul><li>c/på‘½åæ–¹å¼æ³¨å…¥</li></ul><ol><li>pæ ‡ç­¾å°±æ˜¯å’Œ propertyç›¸åŒåŠŸèƒ½</li></ol><pre class=" language-xml"><code class="language-xml"> xmlns:p="http://www.springframework.org/schema/p"</code></pre><ol start="2"><li>æ‰€ä»¥cæ ‡ç­¾å°±æ˜¯å’Œæ„é€ å™¨å‚æ•°constructor-argç›¸åŒåŠŸèƒ½é…ç½®åœ¨æ ‡ç­¾å†…</li></ol><pre class=" language-xml"><code class="language-xml">xmlns:c="http://www.springframework.org/schema/c"</code></pre><p>é…ç½®:</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>people<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.People<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>haha<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">p:</span>address-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><h2 id="Springé…ç½®"><a href="#Springé…ç½®" class="headerlink" title="Springé…ç½®"></a>Springé…ç½®</h2><pre class=" language-xml"><code class="language-xml">Springæ ¸å¿ƒé…ç½®å¤´<span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><ul><li>å¼•å…¥é…ç½®æ–‡ä»¶ â€“ å°†å¤šä¸ªé…ç½®æ–‡ä»¶å¼•å…¥åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</li></ul><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ApplicationContext1.xml<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>import</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ApplicationContext2.xml<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>import</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ApplicationContext3.xml<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>import</span><span class="token punctuation">></span></span></code></pre><ul><li>Beané…ç½®</li></ul><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- idå¯¹è±¡åå­— classæƒé™å®šå  name åˆ«åé…ç½®(ç©ºæ ¼/,/;)å½“åˆ†éš”ç¬¦ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Hello<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello2,23 12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--åˆ«åå¯ä»¥ç”¨è¿™é…ç½®--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>alias</span><span class="token punctuation">></span></span></code></pre><h3 id="Beanä½œç”¨åŒºåŸŸ"><a href="#Beanä½œç”¨åŒºåŸŸ" class="headerlink" title="Beanä½œç”¨åŒºåŸŸ"></a>Beanä½œç”¨åŒºåŸŸ</h3><p>å®˜æ–¹æ–‡æ¡£æœ‰å…­ä¸ª:</p><table><thead><tr><th align="left">Scope</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#beans-factory-scopes-singleton" target="_blank" rel="noopener">singleton(å•ä¾‹)</a></td><td align="left">(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#beans-factory-scopes-prototype" target="_blank" rel="noopener">prototype(åŸå‹)</a></td><td align="left">Scopes a single bean definition to any number of object instances.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#beans-factory-scopes-request" target="_blank" rel="noopener">request</a></td><td align="left">Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#beans-factory-scopes-session" target="_blank" rel="noopener">session</a></td><td align="left">Scopes a single bean definition to the lifecycle of an HTTP <code>Session</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/core.html#beans-factory-scopes-application" target="_blank" rel="noopener">application</a></td><td align="left">Scopes a single bean definition to the lifecycle of a <code>ServletContext</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr><tr><td align="left"><a href="https://docs.spring.io/spring/docs/5.2.7.RELEASE/spring-framework-reference/web.html#websocket-stomp-websocket-scope" target="_blank" rel="noopener">websocket</a></td><td align="left">Scopes a single bean definition to the lifecycle of a <code>WebSocket</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td></tr></tbody></table><p> åé¢å››ä¸ªåœ¨webä¸­æ‰ä¼šç”¨åˆ°</p><ul><li>å•ä¾‹Singleton</li></ul><p><img src="https://i.loli.net/2020/07/02/u5reoLZBkP6asGA.png" alt="image.png"></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>accountService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.something.DefaultAccountService<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>singleton<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><ul><li>åŸå‹</li></ul><p><img src="https://i.loli.net/2020/07/02/dAIstZrxTL8m1Ru.png" alt="image.png"></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>accountService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.something.DefaultAccountService<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prototype<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><h3 id="Beanè‡ªåŠ¨è£…é…"><a href="#Beanè‡ªåŠ¨è£…é…" class="headerlink" title="Beanè‡ªåŠ¨è£…é…"></a>Beanè‡ªåŠ¨è£…é…</h3><ul><li>byNameå’ŒbyType</li></ul><pre class=" language-xml"><code class="language-xml">        <span class="token comment" spellcheck="true">&lt;!--å†™ä¸¤ä¸ªç±»: äººç±»æ‹¥æœ‰çŒ« --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cat1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Cat<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cat<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shout<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>neo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--    è‡ªåŠ¨è£…é…: autowire:        byType: æ‰¾åˆ°å¯¹åº”çš„ç±»        byName: æ‰¾åˆ°å¯¹åº”çš„idå’Œname--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>human<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs.Human<span class="token punctuation">"</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>byName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sjs<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><h3 id="Springæ³¨è§£"><a href="#Springæ³¨è§£" class="headerlink" title="Springæ³¨è§£"></a>Springæ³¨è§£</h3><p>The introduction of annotation-based configuration raised the question of whether this approach is â€œbetterâ€ than XML.(å®˜æ–¹æ¨èä½¿ç”¨æ³¨è§£)</p><ul><li>æ³¨è§£å¼€å‘</li><li>1.å¸¦å…¥çº¦æŸ</li><li>==2.åªéœ€è¦å¤šåŠ ä¸€ä¸ª &lt;context:annotation-config/&gt;==</li></ul><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans        https://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><ul><li><p>@Autowired</p><p>å‚æ•°(required = â€œfalse è¡¨ç¤ºå¯ä»¥ä¸ºnullâ€)   <em>é€‰æ‹©æ€§å¡«å†™</em> </p><p>å…ˆé€šè¿‡byNameæ–¹å¼è·å–  å¦‚æœæ²¡æœ‰åˆ™é€šè¿‡ byType (å¦‚æœæœ‰ä¸¤ä¸ªç›¸åŒçš„æ³¨å…¥é…ç½® byNameä¼šå¼‚å¸¸)</p><p>ç›´æ¥åŠ åˆ°å¯¹åº”çš„å±æ€§æˆ–è€…setæ–¹æ³•ä¸Š</p><p>å¦‚æœè‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOC(Spring)å®¹å™¨ä¸­å­˜åœ¨, ä¸”åå­—å¯¹åº” å°±å¯ä»¥ä¸å†™setæ–¹æ³•(ç”¨åå°„æœºåˆ¶è·å–å¯¹åº”çš„å±æ€§ç»“æ„)</p></li><li><p>@Qualifier(value = â€œå‚æ•°åå­—â€) é…ç½®ä¸€ä¸ªåˆ«å</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"cat1"</span><span class="token punctuation">)</span><span class="token keyword">private</span> Cat cat<span class="token punctuation">;</span></code></pre></li><li><p>@Resource(æ˜¯javaè‡ªå¸¦çš„)</p><p>å‚æ•°å¯ä»¥é…ç½®åå­—(name= â€œå‚æ•°åå­—â€)</p><p>å…ˆé€šè¿‡byNameæ–¹å¼è·å–  å¦‚æœæ²¡æœ‰åˆ™é€šè¿‡ byType </p></li></ul><h2 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h2><blockquote><p>ä¸€å®šè¦å¼•å…¥aopåŒ… å’Œé…ç½®è‡ªåŠ¨æ‰«æ</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- æ‰«æpackageä¸‹æ‰€æœ‰æ–‡ä»¶ --></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.sjs<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/></span></span></code></pre></blockquote><ul><li><p><strong>bean</strong></p><ol><li><p>@Componentæ³¨è§£è¡¨ç¤ºæ³¨å…¥åˆ°Springä¸­ ç›¸å½“äº    <code>&lt;bean id=&quot;&quot; name=&quot;&quot;/&gt;</code></p></li><li><p>@Componentçš„è¡ç”Ÿæ³¨è§£, åœ¨webå¼€å‘ä¸­,çš„MVCä¸‰å±‚æ¶æ„</p><ul><li>DAOå±‚: @Repository</li><li>Controllerå±‚: @Controller</li><li>Serviceå±‚: @Service</li></ul><blockquote><p>æ³¨è§£åŠŸèƒ½ç›¸åŒ</p></blockquote></li></ol></li><li><p><strong>å±æ€§æ³¨å…¥</strong></p></li></ul><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç›¸å½“äº &lt;property name="" value=""/></span><span class="token keyword">private</span> String name<span class="token punctuation">;</span></code></pre><ul><li><p><strong>è‡ªåŠ¨è£…é…</strong></p><ul><li><p>@Autowired</p><p>å‚æ•°(required = â€œfalse è¡¨ç¤ºå¯ä»¥ä¸ºnullâ€)   <em>é€‰æ‹©æ€§å¡«å†™</em> </p><p>å…ˆé€šè¿‡byNameæ–¹å¼è·å–  å¦‚æœæ²¡æœ‰åˆ™é€šè¿‡ byType (å¦‚æœæœ‰ä¸¤ä¸ªç›¸åŒçš„æ³¨å…¥é…ç½® byNameä¼šå¼‚å¸¸)</p><p>ç›´æ¥åŠ åˆ°å¯¹åº”çš„å±æ€§æˆ–è€…setæ–¹æ³•ä¸Š</p><p>å¦‚æœè‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOC(Spring)å®¹å™¨ä¸­å­˜åœ¨, ä¸”åå­—å¯¹åº” å°±å¯ä»¥ä¸å†™setæ–¹æ³•(ç”¨åå°„æœºåˆ¶è·å–å¯¹åº”çš„å±æ€§ç»“æ„)</p></li><li><p>@Qualifier(value = â€œå‚æ•°åå­—â€) é…ç½®ä¸€ä¸ªåˆ«å</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"cat1"</span><span class="token punctuation">)</span><span class="token keyword">private</span> Cat cat<span class="token punctuation">;</span></code></pre></li><li><p>@Resource(æ˜¯javaè‡ªå¸¦çš„)</p><p>å‚æ•°å¯ä»¥é…ç½®åå­—(name= â€œå‚æ•°åå­—â€)</p><p>å…ˆé€šè¿‡byNameæ–¹å¼è·å–  å¦‚æœæ²¡æœ‰åˆ™é€šè¿‡ byType </p></li></ul></li><li><p><strong>ä½œç”¨åŸŸ</strong></p></li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å•ä¾‹ åŸå‹ ... </span><span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"Singleton"</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span></code></pre><ul><li><strong>å°ç»“</strong></li></ul><blockquote><p>Xmlä¸æ³¨è§£:</p></blockquote><ul><li>xmlæ–¹ä¾¿ç»´æŠ¤,æ¯”è¾ƒä¸‡èƒ½ é€‚ç”¨ä»»ä½•åœºåˆ</li><li>æ³¨è§£ é’ˆå¯¹è‡ªå·±çš„ç±», ç»´æŠ¤å¤æ‚</li></ul><blockquote><p>å®è·µ</p></blockquote><ul><li>xmlç”¨æ¥ç®¡ç†bean</li><li>æ³¨è§£åªè´Ÿè´£å®Œæˆæ³¨å…¥</li><li>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­,åªè¦æ³¨æ„ä¸€ä¸ªé—®é¢˜: å¼€å¯æ³¨è§£æ”¯æŒé…ç½®(é…ç½®æ–‡ä»¶ å’Œ æ‰«æåŒ…)</li></ul><h3 id="javaConfigå®ç°é…ç½®"><a href="#javaConfigå®ç°é…ç½®" class="headerlink" title="javaConfigå®ç°é…ç½®"></a>javaConfigå®ç°é…ç½®</h3><ul><li>ç”±äºæœ‰javaConfigé…ç½®å¯ä»¥å®ç°ä¸ç”¨é…ç½®æ–‡ä»¶, å…¨äº¤ç»™JAVAæ¥åš!</li><li>javaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®, åœ¨Spring4ä¹‹å, æˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½(è·å–ConfigContext)</li></ul><p><img src="https://i.loli.net/2020/07/04/HPgrKlqpuFb58GQ.png" alt="ApplicationContext.png"></p><ul><li>æµ‹è¯•ä¾‹å­</li></ul><p>é…ç½®ç±»:å¯ä»¥å®Œå…¨æ›¿ä»£Bean.xml</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// è¿™ä¸ªç±»å›ç”±Springå®¹å™¨æ‰˜ç®¡ @Configurationçš„å®ç°æœ‰@Component </span><span class="token comment" spellcheck="true">// @Configuration ä»£è¡¨é…ç½®ç±» å’ŒApplicationContext.xmlç›¸åŒ</span><span class="token comment" spellcheck="true">// å®Œå…¨ä½¿ç”¨é…ç½®ç±»åªéœ€è¦annotationConfigä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨, é€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½!</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.sjs.POJO"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//@Import(OtherConfig.class)  å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ å’Œ xmlä¸­çš„importä¸€è‡´</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SongConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ–¹æ³•åä¸º id name è‡ªåŠ¨æ³¨å…¥æ–¹å¼By_TYPE</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"getUser"</span><span class="token punctuation">,</span> autowire <span class="token operator">=</span> Autowire<span class="token punctuation">.</span>BY_TYPE<span class="token punctuation">)</span>    <span class="token keyword">public</span> User <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> Cat <span class="token function">getCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çŒ«æ¥å•¦!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>POç±»</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Userç±»</span><span class="token annotation punctuation">@Component</span> <span class="token comment" spellcheck="true">// ç»„ä»¶</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"sjs"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Cat cat<span class="token punctuation">;</span>    <span class="token keyword">public</span> Cat <span class="token function">getCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> cat<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCat</span><span class="token punctuation">(</span>Cat cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cat <span class="token operator">=</span> cat<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Catç±»</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"mao"</span><span class="token punctuation">)</span>    String name<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æµ‹è¯•ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä¸éœ€è¦é…ç½®æ–‡ä»¶</span>    ApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span>SongConfig<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    User user <span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"getUser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç»“æœ:</p><p>â€‹    hahaha<br>â€‹    çŒ«æ¥å•¦!<br>â€‹    Cat{name=â€™maoâ€™}<br>â€‹    User{name=â€™sjsâ€™}</p></blockquote><h2 id="AOPä»£ç†-é¢å‘åˆ‡é¢"><a href="#AOPä»£ç†-é¢å‘åˆ‡é¢" class="headerlink" title="AOPä»£ç†-é¢å‘åˆ‡é¢"></a>AOPä»£ç†-é¢å‘åˆ‡é¢</h2><p>AOP -Aspect Oriented Programming</p><blockquote><p>äº†è§£Springçš„AOPå®ç°ä¸å¾—ä¸è¯´åˆ° javaçš„åå°„æœºåˆ¶å’Œ åŠ¨æ€<a href="[https://sunxinan12138.github.io/2020/05/31/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/](https://sunxinan12138.github.io/2020/05/31/ä»£ç†æ¨¡å¼/)">ä»£ç†æ¨¡å¼</a> </p><ul><li>åŸºæœ¬æ¦‚å¿µ<ol><li>é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯.</li><li>AOPæ˜¯OOPçš„å»¶ç»­, æ˜¯è½¯ä»¶å¼€å‘çš„çƒ­ç‚¹, ä¹Ÿæ˜¯SPringæ¡†æ¶çš„é‡è¦å†…å®¹. å‡½æ•°å¼ç¼–ç¨‹çš„è¡ç”Ÿæ³›å‹. ;åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘å„ä¸ªéƒ¨é—¨è¿›è¡Œéš”ç¦»,æ˜¯é€»è¾‘é—´è€¦åˆåº¦é™ä½, æé«˜é‡ç”¨æ€§,æé«˜å¼€å‘æ•ˆç‡</li></ol></li></ul></blockquote><blockquote><p>æ­£å¸¸ç¼–ç¨‹<img src="https://i.loli.net/2020/05/28/rQZ36jmDFYCR5NI.png" alt="image.png"></p></blockquote><blockquote><p>é¢å‘åˆ‡é¢: åœ¨ä¸€ä¸ªåŠŸèƒ½(ç±»)ä¸­åˆ‡å…¥å¦ä¸€ä¸ªåŠŸèƒ½<img src="https://i.loli.net/2020/06/26/rOYqRu3ZHSNVeMc.png" alt="image.png"></p><p><img src="https://i.loli.net/2020/06/27/zMpQPvU64AdBYw8.png" alt="image.png"></p></blockquote><h3 id="Springä¸­AOPçš„ä½œç”¨"><a href="#Springä¸­AOPçš„ä½œç”¨" class="headerlink" title="Springä¸­AOPçš„ä½œç”¨"></a>Springä¸­AOPçš„ä½œç”¨</h3><blockquote><p>*<em>æä¾›å£°æ˜å¼æœåŠ¡: *</em> å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p><ul><li>æ¨ªåˆ‡å…³æ³¨ç‚¹: è·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½. â€“ ä¸ä¸šåŠ¡é€»è¾‘æ— å…³  ä½†æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„éƒ¨åˆ†â€“ æ—¥å¿—, å®‰å…¨, ç¼“å­˜â€¦.</li><li>åˆ‡é¢(ASPECT): æ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ â€“ æ˜¯ä¸€ä¸ªç±»(Log)</li><li>é€šçŸ¥(Advice): åˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œ, å³, ä»–æ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•(æ—¥å¿—æ–¹æ³•)</li><li>ç›®æ ‡(Target): è¢«é€šçŸ¥å¯¹è±¡.</li><li>ä»£ç†(Proxy): å‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ååˆ›å»ºçš„å¯¹è±¡</li><li>åˆ‡å…¥ç‚¹(PointCut): åˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„â€åœ°ç‚¹â€çš„å®šä¹‰</li><li>è¿æ¥ç‚¹(JoinPoint): ä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹</li></ul><p><img src="C:%5CUsers%5C25778%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200627195527701.png" alt="image-20200627195527701"></p></blockquote><h3 id="AOPé‡è¦æ€§ï¼š"><a href="#AOPé‡è¦æ€§ï¼š" class="headerlink" title="AOPé‡è¦æ€§ï¼š"></a>AOPé‡è¦æ€§ï¼š</h3><p>aopå°†å…¬å…±ä¸šåŠ¡ï¼ˆæ—¥å¿—ï¼Œå®‰å…¨ï¼‰å’Œé¢†åŸŸä¸šåŠ¡ç»“åˆã€‚å…¬å…±ä¸šåŠ¡å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œç¨‹åºçŒ¿æ›´ä¸“æ³¨ä¸é¢†åŸŸä¸šåŠ¡ æœ¬è´¨åŠ¨æ€ä»£ç†</p><h3 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h3><blockquote><p><a href="[https://sunxinan12138.github.io/2020/06/05/JAVA%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/](https://sunxinan12138.github.io/2020/06/05/JAVAåå°„æœºåˆ¶/)">åå°„æœºåˆ¶</a> éœ€è¦äº†è§£ä¸€ä¸‹</p></blockquote><ul><li>å“ªäº›æ–¹æ³•ä¸èƒ½è¢«AOPå¢å¼º</li></ul><ol><li>åŸºäºJDKä»£ç†ï¼Œé™¤publicå¤–çš„å…¶ä»–æ‰€æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬public staticä¹Ÿä¸èƒ½è¢«å¢å¼º</li><li>åŸºäºCGLIBä»£ç†ï¼Œç”±äºå…¶é€šè¿‡ç”Ÿæˆç›®æ ‡ç±»å­ç±»çš„æ–¹å¼æ¥å¢å¼ºï¼Œå› æ­¤ä¸èƒ½è¢«å­ç±»ç»§æ‰¿çš„æ–¹æ³•éƒ½ä¸èƒ½è¢«å¢å¼ºï¼Œprivateã€staticã€final æ–¹æ³•</li></ol><h4 id="ä½¿ç”¨SpringåŸç”Ÿæ¥å£æ–¹å¼-å’ŒJDKåŠ¨æ€ä»£ç†æ¨¡å¼å¾ˆåƒ"><a href="#ä½¿ç”¨SpringåŸç”Ÿæ¥å£æ–¹å¼-å’ŒJDKåŠ¨æ€ä»£ç†æ¨¡å¼å¾ˆåƒ" class="headerlink" title="ä½¿ç”¨SpringåŸç”Ÿæ¥å£æ–¹å¼(å’ŒJDKåŠ¨æ€ä»£ç†æ¨¡å¼å¾ˆåƒ)"></a>ä½¿ç”¨SpringåŸç”Ÿæ¥å£æ–¹å¼(å’ŒJDKåŠ¨æ€ä»£ç†æ¨¡å¼å¾ˆåƒ)</h4><ol><li><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.SpringAOP.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span> // è¢«åˆ‡å…¥çš„ä¸šåŠ¡ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.SpringAOP.MyLog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span> // åˆ‡å…¥çš„ä¸šåŠ¡ <span class="token comment" spellcheck="true">&lt;!-- é…ç½®çš„(..) æ‹¬å·æ˜¯æ–¹æ³• .. ä»»æ„å‚æ•°--></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>     <span class="token comment" spellcheck="true">&lt;!-- åˆ‡å…¥ç‚¹  expression: (è¿”å›ç±»å‹  åˆ‡å…¥çš„ä½ç½®(åŒ….ç±».æ–¹æ³•(å‚æ•°ç±»å‹)))--></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pointcut<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>execution(* com.SpringAOP.UserServiceImpl.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>pointcut</span><span class="token punctuation">></span></span>     <span class="token comment" spellcheck="true">&lt;!-- å“ªä¸ªç±»åˆ‡å…¥å“ªä¸ªåˆ‡å…¥ç‚¹(log) --></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pointcut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>advisor</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ—¥å¿—ç±»</p></li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLog</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span>Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> Object o<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="3"><li>è½½å…¥é…ç½®æ–‡ä»¶</li></ol><pre class=" language-java"><code class="language-java">ApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"aopConfig.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åŠ è½½xmlæ–¹å¼</span>UserService userService <span class="token operator">=</span> <span class="token punctuation">(</span>UserService<span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Springè°ƒç”¨</span>userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li>Springçš„äº”ç§Advice</li></ul><table><thead><tr><th>é€šçŸ¥ç±»å‹</th><th align="left">è¿æ¥ç‚¹</th><th>æ¥å£</th></tr></thead><tbody><tr><td>å‰ç½®é€šçŸ¥</td><td align="left">æ–¹æ³•å‰</td><td>aop.MethodBeforeAdvice</td></tr><tr><td>åç½®é€šçŸ¥</td><td align="left">æ–¹æ³•å</td><td>aop.AfterReturnAdvice</td></tr><tr><td>ç¯ç»•é€šçŸ¥</td><td align="left">æ–¹æ³•å‰å</td><td>intercept.MethodInterceptor</td></tr><tr><td>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥</td><td align="left">æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</td><td>aop.ThrowsAdvice</td></tr><tr><td>å¼•ä»‹é€šçŸ¥</td><td align="left">ç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å±æ€§</td><td>aop.IntroductionInterceptor</td></tr></tbody></table><h4 id="ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°"><a href="#ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°"></a>ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°</h4><ol><li>å…ˆè‡ªå®šä¹‰ä¸€ä¸ªç±»</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDiyLog</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// è‡ªå®šä¹‰ç±»å½“åšåˆ‡é¢</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">befor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¯ç»•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="2"><li>é…ç½®æ–‡ä»¶</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- Spring æ³¨å…¥Bean --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.SpringAOP.MyDiyLog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.SpringAOP.UserServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  aop é…ç½® --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--  é…ç½®åˆ‡é¢çš„ref  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pointcut<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>execution(* com.SpringAOP.UserServiceImpl.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>pointcut</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>befor<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pointcut<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>around<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pointcut<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></code></pre><h4 id="ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°"><a href="#ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°" class="headerlink" title="ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°"></a>ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°</h4><ol><li>é…ç½®æ–‡ä»¶:</li></ol><pre class=" language-xml"><code class="language-xml">   <span class="token comment" spellcheck="true">&lt;!-- ä¸‰: æ³¨è§£ --></span><span class="token comment" spellcheck="true">&lt;!-- ä¸¤ç§æ–¹å¼     1. jdkè‡ªå·±çš„(false)(é»˜è®¤å°±æ˜¯è¿™ä¸ª)     2. cglib(true) --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>annotationLog<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.AnnotationMethod.MyLogAnnotation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">></span></span></code></pre><ol start="2"><li>æ³¨è§£éƒ¨åˆ†</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLogAnnotation</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.SpringAOP.UserServiceImpl.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">befor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"befor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ol start="3"><li><p>å…¶ä»–çš„ç›¸æ¯”ç¬¬ä¸€ç§æ²¡æœ‰å˜åŒ–</p></li><li><h3 id="å…­ç§å¢å¼ºç±»å‹"><a href="#å…­ç§å¢å¼ºç±»å‹" class="headerlink" title="å…­ç§å¢å¼ºç±»å‹"></a>å…­ç§å¢å¼ºç±»å‹</h3><ol><li>@Before å‰ç½®å¢å¼ºï¼Œç›¸å½“äºBeforeAdvice</li><li>@AfterReturning åç½®å¢å¼ºï¼Œç›¸å½“äºAfterReturningAdvice</li><li>@Around ç¯ç»•å¢å¼ºï¼Œç›¸å½“äºMethodInterceptor</li><li>@AfterThrowing æŠ›å‡ºå¢å¼ºï¼Œç›¸å½“äºThrowsAdvice</li><li>@AfterFinalå¢å¼ºï¼Œä¸ç®¡æŠ›å‡ºå¼‚å¸¸è¿˜æ˜¯æ­£å¸¸é€€å‡ºï¼Œéƒ½ä¼šæ‰§è¡Œï¼Œæ²¡æœ‰å¯¹åº”çš„å¢å¼ºæ¥å£ï¼Œä¸€èˆ¬ç”¨äºé‡Šæ”¾èµ„æº</li><li>@DeclareParents å¼•ä»‹å¢å¼ºï¼Œç›¸å½“äºIntroductionInterceptor</li></ol></li></ol><blockquote><p><a href="#">Springäº‹åŠ¡è¿ç”¨</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> æœªå®Œæˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹</title>
      <link href="/2020/05/25/%E7%BA%BF%E7%A8%8B/"/>
      <url>/2020/05/25/%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿ç¨‹Thread"><a href="#çº¿ç¨‹Thread" class="headerlink" title="çº¿ç¨‹Thread"></a>çº¿ç¨‹Thread</h1><p>[toc]</p><blockquote><p>Threadéš¶å±äºjava.langåŒ…ä¸‹çš„ç±» ,javaè¯­è¨€çš„JVMå…è®¸ç¨‹åºè¿è¡Œå¤šä¸ªçº¿ç¨‹</p><p>Thread:æ¯ä¸ªçº¿ç¨‹é€šè¿‡ç‰¹å®šThreadå¯¹è±¡çš„run()æ–¹æ³•æ¥å®Œæˆæ“ä½œ,ç»å¸¸æŠŠ</p></blockquote><h2 id="ç¨‹åº-çº¿ç¨‹å’Œè¿›ç¨‹"><a href="#ç¨‹åº-çº¿ç¨‹å’Œè¿›ç¨‹" class="headerlink" title="ç¨‹åº,çº¿ç¨‹å’Œè¿›ç¨‹"></a>ç¨‹åº,çº¿ç¨‹å’Œè¿›ç¨‹</h2><ul><li><p><strong>ç¨‹åº(Program):</strong>ä¸ºäº†å®Œæˆç‰¹å®šä»»åŠ¡, ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤é›†åˆ. å³<kbd>ä¸€æ®µé™æ€ä»£ç </kbd>,é™æ€å¯¹è±¡</p></li><li><p><strong>è¿›ç¨‹(process):</strong>æ˜¯æŒ‡ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹, æˆ–æ˜¯<kbd>æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åº</kbd>. åŠ¨æ€è¿‡ç¨‹: æœ‰å®ƒè‡ªèº«çš„äº§ç”Ÿ, å­˜åœ¨å’Œæ¶ˆäº¡çš„è¿‡ç¨‹.</p><blockquote><p>å¦‚: è¿è¡Œä¸­çš„è½¯ä»¶qq æµè§ˆå™¨ç­‰</p><p>ç¨‹åºæ˜¯é™æ€çš„,è¿è¡Œçš„è¿›ç¨‹æ˜¯åŠ¨æ€çš„</p></blockquote></li><li><p><strong>çº¿ç¨‹(Thread):</strong>è¿›ç¨‹ç»†åŒ–ä¸€äº›ä¸ºçº¿ç¨‹,æ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„</p><blockquote><p>å½“çƒ­ç¨‹åºåœ¨åŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªæ‰§è¡Œè·¯å¾„, ä¹Ÿå°±æ˜¯æ”¯æŒå¤šçº¿ç¨‹</p></blockquote></li></ul><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><blockquote><p>javaä¸­çº¿ç¨‹åˆ†ä¸º:<strong>å®ˆæŠ¤çº¿ç¨‹(daemon)</strong>å’Œ<strong>ç”¨æˆ·çº¿ç¨‹</strong></p><blockquote><p>è™šæ‹Ÿæœºå¿…é¡»ä¿è¯ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•,å®ˆæŠ¤çº¿ç¨‹ä¸éœ€è¦ç­‰å¾…: å¦‚åå°è®°å½•æ—¥å¿—,å†…å­˜ç›‘æ§,gcåƒåœ¾å›æ”¶ç­‰</p></blockquote><p>å®ˆæŠ¤çº¿ç¨‹è®¾ç½®: thread.setDemon(trueä¸ºå®ˆæŠ¤çº¿ç¨‹)</p></blockquote><pre><code>1.çº¿ç¨‹å°±æ˜¯ç‹¬ç«‹æ‰§è¡Œçš„è·¯å¾„2.åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå³ä½¿æ²¡æœ‰åˆ›å»ºçº¿ç¨‹ï¼Œä¹Ÿä¼šæœ‰å¤šä¸ªçº¿ç¨‹(javg gcçº¿ç¨‹ï¼Œä¸»çº¿ç¨‹)3.main()ç§°ä¸ºä¸»çº¿ç¨‹ ï¼Œä¸ºç³»ç»Ÿçš„å…¥å£ï¼Œç”¨äºæ‰§è¡Œæ•´ä¸ªç¨‹åº4.åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¼€äº†å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹çš„è¿è¡Œç”±è°ƒåº¦å™¨å®‰æ’è°ƒåº¦ï¼Œè°ƒåº¦å™¨æ˜¯ä¸æ“ä½œç³»ç»Ÿ5.ç´§å¯†ç›¸å…³çš„ï¼Œå…ˆåé¡ºåºæ˜¯ä¸èƒ½äººä¸ºå¹²é¢„çš„6.å¯¹åŒä¸€ä»½èµ„æºæ“ä½œæ—¶ï¼Œä¼šå­˜åœ¨èµ„æºæŠ¢å¤ºé—®é¢˜ï¼Œè¦åŠ å…¥å¹¶å‘æ§åˆ¶7.çº¿ç¨‹ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œcpuè°ƒåº¦æ—¶é—´ï¼Œå¹¶å‘æ§åˆ¶å¼€é”€8.æ¯ä¸ªçº¿ç¨‹åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­äº¤äº’ï¼Œå†…å­˜æ§åˆ¶ä¸å½“ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´</code></pre><h2 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><blockquote><p>åœ¨JDKä¸­Thread.Stateæšä¸¾è¡¨ç¤ºäº†çº¿ç¨‹çš„å…­ç§çŠ¶æ€</p><p>getState():è·å–çŠ¶æ€:hamburger:</p></blockquote><ul><li><strong>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æºç , çœ‹ä¸€ä¸‹çº¿ç¨‹çš„å‡ ä¸ªçŠ¶æ€</strong></li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// javaä¸­hreadçš„å†…éƒ¨æšä¸¾</span> <span class="token keyword">public</span> <span class="token keyword">enum</span> State <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// çº¿ç¨‹è¢«å£°æ˜å¹¶ä¸”åˆ›å»ºå, å°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚</span>        NEW<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// å¯è¿è¡Œçš„çŠ¶æ€, ä¸€èˆ¬æ‰§è¡Œäº†star() åœ¨è™šæ‹Ÿæœºä¸­æ‰§è¡Œç­‰å¾…åˆ†é…èµ„æº (å¦‚æœæ‰§è¡Œäº†ä¼šæ‰§è¡Œrunæ–¹æ³•)</span>        RUNNABLE<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// é˜»å¡äº† </span>        BLOCKED<span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">// ç­‰å¾…</span>        WAITING<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// ä¹Ÿæ˜¯ç­‰å¾… ä½†æ˜¯æœ‰ç­‰å¾…æ—¶é—´çš„ç­‰å¾…</span>        TIMED_WAITING<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//çº¿ç¨‹ç»“æŸ ç»ˆæ­¢</span>        TERMINATED<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>â€‹                                                            å¦‚å›¾</p><p><img src="https://i.loli.net/2020/05/27/sQ7TN4wSIAkUCFp.png" alt="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ"></p><h2 id="çº¿ç¨‹çš„ä¸‰ç§åˆ›å»ºæ–¹å¼"><a href="#çº¿ç¨‹çš„ä¸‰ç§åˆ›å»ºæ–¹å¼" class="headerlink" title="çº¿ç¨‹çš„ä¸‰ç§åˆ›å»ºæ–¹å¼"></a>çº¿ç¨‹çš„ä¸‰ç§åˆ›å»ºæ–¹å¼</h2><blockquote><p><strong>Junit4å•å…ƒæµ‹è¯•çº¿ç¨‹å¼‚å¸¸</strong>: å…·ä½“åŸå› ä¸å¤ªäº†è§£ä½†æ˜¯å’Œjunitçš„å®ç°æœ‰å…³(è®°åˆ°å°æœ¬æœ¬â€“ä¸‹æ¬¡åœ¨äº†è§£)</p></blockquote><h3 id="ä¸€-ç»§æ‰¿Threadç±»"><a href="#ä¸€-ç»§æ‰¿Threadç±»" class="headerlink" title="ä¸€ . ç»§æ‰¿Threadç±»"></a>ä¸€ . ç»§æ‰¿Threadç±»</h3><blockquote><p>é‡å†™run()æ–¹æ³• ,å¹¶ä¸”ç”¨thread.start()å¯åŠ¨çº¿ç¨‹</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadBuild</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ThreadTest threadTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        threadTest<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¯åŠ¨çº¿ç¨‹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ThreadTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å†™runæ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// çº¿ç¨‹å‘½å</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è·å–å½“å‰çº¿ç¨‹å + å˜é‡</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>ç¨‹åºä¸­åˆ›å»ºäº†ä¸€ä¸ª <strong>çº¿ç¨‹1</strong> çº¿ç¨‹ åœ¨ä¸»çº¿ç¨‹ä¸­å¯åŠ¨ çº¿ç¨‹é—´æ˜¯ç‹¬ç«‹æ‰§è¡Œçš„ ,å¦‚å›¾:</p><p><img src="/images/Thread.png" alt="æ‰§è¡Œæ–¹å¼å›¾è§£"></p><p>æ‰€ä»¥ä¼šçœ‹åˆ°å¹¶è¡Œäº¤æ›¿æ‰§è¡Œçš„æƒ…å†µ:</p><p><img src="/images/%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C.png" alt="å¹¶æ²¡æœ‰é¡ºåº"></p></blockquote><p>åœ¨Threadä¸­æœ‰ä»¥ä¸‹ä»£ç ä¿è¯äº†Start()æ–¹æ³•ä¸èƒ½é‡å¤è°ƒç”¨:<img src="/images/start.png" alt="startçš„æºç "></p><h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ :"></a>ç»ƒä¹ :</h4><blockquote><p> ç”¨å¤šçº¿ç¨‹å†™å›¾ç‰‡å¤åˆ¶/ç”¨çº¿ç¨‹å®ç°3ä¸ªå”®ç¥¨çª—å£(<strong>è¦è€ƒè™‘äº§ç”Ÿèµ„æºå†²çª</strong>)(ä»£ç emmmmå°±ä¸ç²˜äº†)</p></blockquote><h3 id="äºŒ-å®ç°Runnableæ¥å£"><a href="#äºŒ-å®ç°Runnableæ¥å£" class="headerlink" title="äºŒ. å®ç°Runnableæ¥å£"></a>äºŒ. å®ç°Runnableæ¥å£</h3><blockquote><p>å®ç°Runnableæ¥å£å¹¶ä¸”é‡å†™run()æ–¹æ³•</p><p>ç”±äºThreadç±»ä¸ºä¸€ä¸ªä»£ç†ç±» ä»£ç†äº†Runnable</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// å®ç°æ¥å£çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼</span>        ThreadTest threadTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Runnableæ¥å£å®ç°ç±»å¯¹è±¡</span>        <span class="token comment" spellcheck="true">// å°†æ­¤å¯¹è±¡ä½œä¸ºå½¢å‚æ”¾å…¥ Threadçš„æ„é€ æ–¹æ³•ä¸­ å¹¶åˆ›é€ å¯¹è±¡</span>        Thread thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>threadTest<span class="token punctuation">)</span><span class="token punctuation">;</span>         Thread thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>threadTest<span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"1Thread"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å‘½å</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¯åŠ¨çº¿ç¨‹</span>           thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// lamdbaè¡¨è¾¾å¼ï¼ˆ1.8æ–°ç‰¹æ€§ï¼‰</span>     <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"runæ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><ol><li><p>Thread æœ¬èº«å°±å®ç°äº†Runnableæ¥å£</p></li><li><p>å®ç°æ–¹å¼ä¼˜äºç»§æ‰¿æ–¹å¼</p><ol><li>é¿å…äº†javaä¸­å•ç»§æ‰¿çš„å±€é™æ€§</li><li>åœ¨æ“ä½œåŒä¸€ä»½èµ„æºä¸­,æ›´é€‚åˆä½¿ç”¨å®ç°æ–¹å¼<ol><li>ä¸€ä¸ªå¯¹è±¡çš„èµ„æºç»™å¤šä¸ªçº¿ç¨‹ä½¿ç”¨</li></ol></li></ol></li></ol></blockquote><h3 id="ä¸‰-å®ç°Callableæ¥å£"><a href="#ä¸‰-å®ç°Callableæ¥å£" class="headerlink" title="ä¸‰. å®ç°Callableæ¥å£"></a>ä¸‰. å®ç°Callableæ¥å£</h3><blockquote><p>é‡å†™çš„call()æ–¹æ³• </p><p>éœ€è¦æ‰§è¡ŒæœåŠ¡å’Œå…³é—­æœåŠ¡(ExecutorServiceçš„å¯¹è±¡ )<br><kbd>ExecutorService service = Executors.newFixedThreadPool(3);</kbd></p><p>æäº¤æ‰§è¡Œ submit(çº¿ç¨‹å¯¹è±¡)<br><kbd>Future f1 = service.submit(c);</kbd></p><p>è·å–è¿”å›å€¼ è®°å¾—ç»“æŸæœåŠ¡<br><kbd>String s1 = (String) f1.get();</kbd><kbd>service.shutdown();</kbd></p></blockquote><h2 id="Threadç±»å¸¸ç”¨æ–¹æ³•"><a href="#Threadç±»å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Threadç±»å¸¸ç”¨æ–¹æ³•"></a>Threadç±»å¸¸ç”¨æ–¹æ³•</h2><blockquote><ol><li><p>start(): å¯åŠ¨çº¿ç¨‹å¹¶æ‰§è¡Œå“åº”çš„run()æ–¹æ³•</p></li><li><p>run():å­çº¿ç¨‹è¦æ‰§è¡Œçš„ä»£ç </p></li><li><p>currentThread(): é™æ€çš„,è°ƒç”¨å½“å‰çš„çº¿ç¨‹</p></li><li><p>getName()/setName(): è·å–å’Œè®¾ç½®çº¿ç¨‹åå­—</p></li><li><p>yield():  è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹æ”¾å¼ƒå½“å‰cpuçš„æ‰§è¡Œæƒï¼Œç¤¼è®©åˆ«çš„çº¿ç¨‹ï¼ˆæˆ‘è®©äº†ä½†æ˜¯ï¼Œä½ ä»¬æŠ¢ä¸æŠ¢å¾—åˆ°é‚£ä¸å½’æˆ‘ç®¡ï¼‰</p></li><li><p>join(): åœ¨Açº¿ç¨‹ä¸­è°ƒç”¨B.join()æ–¹æ³•. ï¼ˆæ’å…¥Açº¿ç¨‹ä¸­ï¼‰ </p><blockquote><p><strong>è¡¨ç¤º</strong>: Açº¿ç¨‹åœæ­¢,ç›´åˆ°Bçº¿ç¨‹æ‰§è¡Œå®Œæ¯• Açº¿ç¨‹åœ¨æ‰§è¡Œåé¢çš„ä»£ç </p><blockquote><p> ==sleep()å’Œyield()æ–¹æ³•==</p><ul><li><p>sleepä¸è€ƒè™‘ä¼˜å…ˆçº§/yieldåŒä¼˜å…ˆçº§</p></li><li><p>sleep åæ˜¯é˜»å¡/yieldæ˜¯å°±ç»ªçŠ¶æ€</p></li><li><p>sleepæœ‰å¼‚å¸¸ /è€Œä¸”ä¸ä¼šé‡Šæ”¾çº¿ç¨‹ â€“ éƒ½ä¸ä¼šé‡Šæ”¾æ ‡å¿—é”</p></li><li><p>sleepæ¯”yieldæœ‰æ›´å¥½çš„ç§»æ¤æ€§</p><p>wait(): å½“å‰çº¿ç¨‹ç­‰å¾…æ‰§è¡Œwaitçš„çº¿ç¨‹(è¦åŠ åŒæ­¥é” è°ç­‰å°±é”è°)</p></li><li><p>å’Œnotify()/notifyAll() ä¸€èµ·ç”¨</p></li><li><p>å¿…é¡»åœ¨synchronizedä¸­ä½¿ç”¨</p></li><li><p>waitä¼šé‡Šæ”¾æ ‡å¿—é”/sleepå’Œyieldä¸ä¼š</p></li><li><p>sleepæ˜¯Threadçš„ / waitæ˜¯Objectçš„</p></li><li><p>sleepæœ‰å¼‚å¸¸éœ€è¦æ•è·</p></li></ul></blockquote></blockquote></li><li><p>isAlive(): åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å­˜æ´»</p></li><li><p>sleep(long time): å½“å‰çº¿ç¨‹ç¡çœ timeæ¯«ç§’(1000ms = 1s)</p><ol><li>ä¸ä¼šé‡Šæ”¾çº¿ç¨‹</li></ol></li><li><p>çº¿ç¨‹é€šä¿¡ä¸­wait()</p></li><li><p>notify()ï¼šé‡Šæ”¾ä¼˜å…ˆçº§é«˜çš„ç­‰å¾…çš„çº¿ç¨‹</p></li><li><p>notifyAll()ï¼šé‡Šæ”¾æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</p></li><li><p>è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§</p><blockquote><p>getPriority(): è¿”å›å½“å‰çº¿ç¨‹ä¼˜å…ˆçº§</p><p>setPriority(int newPriority): æ”¹å˜å½“å‰çº¿ç¨‹ä¼˜å…ˆçº§ : <kbd>æ­£å¸¸ä¸º5,æœ€å¤§10,æœ€å°æ˜¯1</kbd></p></blockquote></li></ol></blockquote><h2 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h2><blockquote><blockquote><p><strong>ä¿è¯çº¿ç¨‹å®‰å…¨</strong></p></blockquote><ul><li>å°½é‡é¿å…<strong>å…±äº«</strong>èµ„æºçš„å­˜å–å†²çª, å¦‚æœå¿…é¡»æœ‰å…±äº«èµ„æº, é‚£å°±è®¾è®¡ä¸€ä¸ªè§„åˆ™(é”)æ¥ä¿è¯, åŒæ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®èµ„æº  è€Œä¸”<strong>ä¸€ä¸ªå®¢æˆ·</strong>çš„è®¡ç®—å·¥ä½œç”±<strong>ä¸€ä¸ªçº¿ç¨‹</strong>è§£å†³</li></ul></blockquote><blockquote><p>çº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆ:</p><table><thead><tr><th></th><th>çº¿ç¨‹ä¸å®‰å…¨</th><th>å¯¹åº”çº¿ç¨‹å®‰å…¨</th></tr></thead><tbody><tr><td>1</td><td>ArrayList</td><td>CopyOnWriterArrayLis/vector</td></tr><tr><td>2</td><td>HashMap</td><td>HashTable</td></tr><tr><td>3</td><td>StringBuilder</td><td>StringBuffer</td></tr></tbody></table><ol><li>Servlet/Controllerçº¿ç¨‹ä¸å®‰å…¨çš„</li></ol></blockquote><blockquote><p>åˆšæ‰çš„çª—å£ä¹°ç¥¨ç¨‹åºå°±ä¼šå‡ºç°å®‰å…¨é—®é¢˜</p><p>åŸå› :ç”±äºå¤šä¸ªçº¿ç¨‹åœ¨æ“ä½œå…±äº«çš„æ•°æ®æ—¶,åœ¨å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æœªæ‰§è¡Œå®Œæ¯•æ—¶,å¦ä¸€ä¸ªçº¿ç¨‹è¿›å…¥,å¯¼è‡´å…±äº«æ•°æ®å‡ºç°é—®é¢˜</p></blockquote><p><img src="https://i.loli.net/2020/05/28/EhVquDZ5Bwpit4g.png" alt="çº¿ç¨‹å®‰å…¨å‡ºç°çš„åŸå› .png"></p><ul><li><p>å¦‚ä½•è§£å†³çº¿ç¨‹å®‰å…¨çš„é—®é¢˜? </p><blockquote><p>æƒ³åŠæ³•çƒ­é‚£ä¸ªä¸€ä¸ªçº¿ç¨‹æ“ä½œæ•°æ®å®Œæ¯•å,å…¶ä»–çº¿ç¨‹æ‰èƒ½æ“ä½œ</p></blockquote></li><li><p>javaä¸­å®ç°çº¿ç¨‹å®‰å…¨,çº¿ç¨‹åŒæ­¥æœºåˆ¶:</p><blockquote></blockquote><ul><li><p>ä¸€ åŒæ­¥ä»£ç å—</p><blockquote><p>synchronizedå…³é”®å­— â€” è¦æœ‰ä¸€ä¸ªå¯¹è±¡å……å½“åŒæ­¥ç›‘è§†å™¨(ç¼ºç‚¹:ä¼šå½±å“æ•ˆç‡)</p><p>åŒæ­¥ç›‘è§†å™¨:ç”±ä¸€ä¸ªç±»çš„å¯¹è±¡å……å½“.å½“ä¸€ä¸ªçº¿ç¨‹è·å–ç›‘è§†å™¨,å°±æ‰§è¡Œä»£ç .(é€šä¸€æŠŠé”çš„å¯¹è±¡ä¸€å®šæ˜¯åŒä¸€ä¸ªå¯¹è±¡) â€” <strong>é”</strong></p></blockquote><p><img src="https://i.loli.net/2020/05/28/dEHqCfLVynIOJQP.png" alt="synchronized.png"></p></li></ul></li></ul><pre><code>å®ç°ä»£ç :```java public  void run() {        while (true) {            synchronized (this) { // ç”¨æœ¬ç±»çš„å¯¹è±¡ä¸ºåŒæ­¥ç›‘è§†å™¨                if (ticket &gt; 0) { // å¦‚æœæœ‰ç¥¨ ä¿®æ”¹å˜é‡                    try {                        Thread.sleep(10); // å‡è®¾ç¡çœ                     } catch (InterruptedException e) {                        e.printStackTrace();                    }                    System.out.println(Thread.currentThread().getName() + &quot;:&quot; + ticket);                    ticket--;                }            }        }  }```</code></pre><ul><li><p>äºŒ åŒæ­¥æ–¹æ³•</p><blockquote><p>ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ­¤æ–¹æ³•</p><p>ç”¨synchronizedä¿®é¥°æ–¹æ³•: <kbd>public synchronized void method()</kbd>å«åŒæ­¥æ–¹æ³•</p><p>åŒæ­¥ç›‘è§†å™¨å¯¹è±¡é»˜è®¤ä¸ºå½“å‰å¯¹è±¡</p></blockquote></li></ul><ul><li>åœ¨å•ä¾‹æ¨¡å¼ä¸­ â€“ <a href="https://sunxinan12138.github.io/2020/05/31/å•ä¾‹æ¨¡å¼/" target="_blank" rel="noopener">é”çš„é—®é¢˜(åŒé‡é”å®š)</a></li></ul><h4 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h4><blockquote><ul><li>æ¦‚å¿µ: ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒ,éƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æº,å°±å½¢æˆäº†æ­»é”</li><li>è§£å†³åŠæ³•: <ul><li>ç®—æ³•, åŸåˆ™</li><li>å°½é‡å‡å°‘åŒæ­¥èµ„æºçš„å®šä¹‰</li></ul></li></ul></blockquote><h4 id="LOCKé”"><a href="#LOCKé”" class="headerlink" title="LOCKé”"></a>LOCKé”</h4><blockquote><ul><li>ä»JDk5.0å¼€å§‹, JAVAæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€“é€šè¿‡æ˜¾å¼å®šä¹‰åŒæ­¥é”å¯¹è±¡æ¥å®ç°åŒæ­¥. åŒæ­¥é”ä½¿ç”¨Lockå¯¹è±¡å……å½“</li><li>Java.util.concurrent.locks.Lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·. é”æä¾›äº†å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®, æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹Lockå¯¹è±¡åŠ é”, çº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰ç¡¬è·å¾—Lockå¯¹è±¡</li><li>ReentrantLock(å¯é‡å…¥é”)ç±»å®ç°äº†Lock, å®ƒæ‹¥æœ‰ä¸synchronizedç›¸åŒçš„å¹¶å‘æ€§,åœ¨å®ç°çº¿ç¨‹å®‰å…¨æ§åˆ¶ä¸­,æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ReentrantLock, å¯ä»¥æ˜¾å¼åŠ é”,é‡Šæ”¾é”</li></ul></blockquote><blockquote><p><strong>Lockä¸synchronizedçš„å¯¹æ¯”</strong></p><ul><li>Lockæ˜¯æ˜¾å¼é”(éœ€è¦æ‰‹åŠ¨å¼€å…³)  synchronizedæ˜¯éšå¼é”,è‡ªåŠ¨é‡Šæ”¾</li><li>Lockåªæ˜¯é”ä»£ç å—</li><li>ä½¿ç”¨Lock, JVMè°ƒåº¦çº¿ç¨‹èŠ±è´¹æ—¶é—´å°‘,æ€§èƒ½å¥½. è€Œä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§(æä¾›æ›´å¤šçš„å­ç±»)</li><li>ä¼˜å…ˆçº§:<ul><li>Lock &gt; åŒæ­¥ä»£ç å—&gt;åŒæ­¥æ–¹æ³•</li></ul></li></ul></blockquote><pre class=" language-java"><code class="language-java"> <span class="token keyword">private</span> <span class="token keyword">final</span> ReentrantLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// å®˜æ–¹å»ºè®®ç”¨Tryï¼Œcatchï¼Œ finally</span>            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åŠ é”</span>               <span class="token comment" spellcheck="true">// éœ€è¦åŠ é”çš„ä»£ç åŒº</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è§£é”</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="çº¿ç¨‹é€šä¿¡"><a href="#çº¿ç¨‹é€šä¿¡" class="headerlink" title="çº¿ç¨‹é€šä¿¡"></a>çº¿ç¨‹é€šä¿¡</h2><blockquote><p>å…³é”®å­—:wait(), notify()å’Œ notifyAll() â€“ çº¿ç¨‹è°ƒåº¦çš„æ–¹æ³•</p><ul><li><p>wait(): ä»¤å½“å‰çº¿ç¨‹æŒ‚èµ·cpu/åŒæ­¥èµ„æºå™¨, ä½¿åˆ«çš„çº¿ç¨‹å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å…¬å…±èµ„æº,å½“å‰çº¿ç¨‹ä¼šåœ¨æ’é˜Ÿç­‰å¾…çŠ¶æ€.</p></li><li><p>notify():å”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…åŒæ­¥èµ„æºçš„çš„<strong>ä¼˜å…ˆçº§æœ€é«˜</strong>çš„çº¿ç¨‹ â€“ ç»“æŸç­‰å¾…</p></li><li><p>notifyAll(): å”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…åŒæ­¥èµ„æºçš„çš„<strong>æ‰€æœ‰</strong>çº¿ç¨‹ â€“ ç»“æŸç­‰å¾…</p></li></ul><p>æ³¨æ„: è¿™ä¸‰ä¸ªæ–¹æ³•ä¸ºjava.lang.Objectä¸‹çš„ è€Œä¸”åªæœ‰åœ¨synchronizedæ–¹æ³•æˆ–ä»£ç å—ä¸­æ‰ä¼šä½¿ç”¨.</p></blockquote><h2 id="å†™ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…ç»ƒä¹ -ä¸æ˜¯OOçš„Pattern"><a href="#å†™ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…ç»ƒä¹ -ä¸æ˜¯OOçš„Pattern" class="headerlink" title="å†™ä¸ªç”Ÿäº§è€…/æ¶ˆè´¹è€…ç»ƒä¹ (ä¸æ˜¯OOçš„Pattern)"></a>å†™ä¸ªç”Ÿäº§è€…/æ¶ˆè´¹è€…ç»ƒä¹ (ä¸æ˜¯OOçš„Pattern)</h2><p><img src="https://i.loli.net/2020/06/01/jQAPyZdFRN1Ye4w.png" alt="image.png"></p><blockquote><p>åˆ†æ:</p><pre class=" language-markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> æ˜¯å¦è€ƒè™‘çº¿ç¨‹<span class="token list punctuation">2.</span> æ˜¯å¦æ¶‰åŠå…±äº«æ•°æ®<span class="token list punctuation">3.</span> å¦‚æœæœ‰å…±äº«æ•°æ® è€ƒè™‘çº¿ç¨‹å®‰å…¨/åŒæ­¥çš„é—®é¢˜<span class="token list punctuation">4.</span> æ˜¯å¦æœ‰çº¿ç¨‹é€šä¿¡</code></pre></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ç®¡åŸæ³•</span><span class="token comment" spellcheck="true">// ç”Ÿäº§è€…åšä¸œè¥¿ æ¶ˆè´¹è€…ä¹° (é€šä¿¡:ç”Ÿäº§åˆ°20 åœæ­¢ç”Ÿäº§ 0å¼€å§‹ç”Ÿäº§åœæ­¢è´­ä¹°)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">P2CTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// ä¸»çº¿ç¨‹</span>        Clerk clerk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Clerk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Producer producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>clerk<span class="token punctuation">)</span><span class="token punctuation">;</span>        Consumer consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>clerk<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>producer<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>producer<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread c3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c3<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Clerk</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// åº—å‘˜ å…¬å…±éƒ¨åˆ†</span>    <span class="token keyword">int</span> product<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç”Ÿäº§åˆ°20 åœæ­¢ç”Ÿäº§ 0å¼€å§‹ç”Ÿäº§åœæ­¢è´­ä¹°</span>    <span class="token comment" spellcheck="true">// åŒæ­¥æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">addProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">>=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// å¦‚æœä½œæ»¡äº† åœæ­¢åˆ¶ä½œ</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æš‚åœåˆ¶ä½œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            product <span class="token operator">+=</span> num<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ·»åŠ åˆ¶ä½œæ•°é‡</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ç”Ÿäº§äº†: "</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"====ç°åœ¨è¿˜æœ‰"</span> <span class="token operator">+</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// å¦‚æœæœ‰å­˜è´§å°±é‡Šæ”¾é” è®©ç”¨æˆ·è´­ä¹°</span>                <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">buyProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æš‚åœè´­ä¹°"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            product <span class="token operator">-=</span> num<span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"è´­ä¹°äº†äº†: "</span> <span class="token operator">+</span> num <span class="token operator">+</span> <span class="token string">"====ç°åœ¨è¿˜æœ‰"</span> <span class="token operator">+</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// å¦‚æœæ•°é‡ä¸è¶³é‡Šæ”¾ç”Ÿäº§è€…æ¥åˆ¶ä½œ</span>                <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// ç”Ÿäº§è€…</span>    Clerk clerk<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Producer</span><span class="token punctuation">(</span>Clerk clerk<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clerk <span class="token operator">=</span> clerk<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            clerk<span class="token punctuation">.</span><span class="token function">addProduct</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// æ¶ˆè´¹è€…</span>    Clerk clerk<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Consumer</span><span class="token punctuation">(</span>Clerk clerk<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clerk <span class="token operator">=</span> clerk<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            clerk<span class="token punctuation">.</span><span class="token function">buyProduct</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>å‡ºç°çš„é—®é¢˜</p></blockquote><p>åœ¨ç­‰å¾…ä¸­æ¨èä½¿ç”¨wait å¦‚æœä½¿ç”¨ if å°†ä¼šæœ‰è‚¯èƒ½å‡ºç°è™šå‡å”¤é†’é—®é¢˜:</p><ul><li><p>çº¿ç¨‹å¯ä»¥å”¤é†’ä½†æ˜¯ä¸ä¼šè¢«é€šçŸ¥, ä¸­æ–­æˆ–è€…è¶…æ—¶,å³æ‰€è°“çš„è™šå‡å”¤é†’. å‘ç”Ÿæ¦‚ç‡è™½ç„¶è¿˜å¾ˆå°, ä½†æ˜¯ç¨‹åºå¿…é¡»é€šè¿‡æµ‹è¯•åº”è¯¥ä½¿çº¿ç¨‹è¢«å”¤é†’çš„æ¡ä»¶æ¥é˜²èŒƒ, å¹¶ä¸”å¦‚æœæ¡ä»¶ä¸æ»¡è¶³åˆ™ç»§ç»­ç­‰å¾….  </p></li><li><p>ç­‰å¾…åº”è¯¥æ€»æ˜¯å‡ºç°åœ¨å¾ªç¯ä¸­</p></li><li><p>åŸå› :</p><blockquote><p>æœ¬è´¨åœ¨äº  if å’Œwhile çš„åŒºåˆ«  : ifä¸­æŒ‚èµ·äº† å¦‚æœè¢«å”¤é†’ä¼šç»§ç»­æ‰§è¡Œä½†æ˜¯è¿™ä¸ªå”¤é†’æœ‰å¯èƒ½ä¸æ­£ç¡®</p></blockquote><ol><li>ä¸¤ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å‘ç°å‰©ä½™0 äºæ˜¯å”¤é†’ç”Ÿäº§è€… è‡ªå·±<strong>æŒ‚èµ·</strong>;(ifåˆ¤æ–­)</li><li>ç”Ÿäº§è€…ç”Ÿäº§ä¸€ä¸ª å”¤é†’æ‰€æœ‰æ¶ˆè´¹è€… ä¸¤ä¸ªæ¶ˆè´¹è€… ä¸ç®¡è°å…ˆè·å¾—é” éƒ½æ˜¯ç»§ç»­if æ‰§è¡Œ </li><li>ä½†æ˜¯ å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è¿‡å ä¸‹ä¸€ä¸ªåº”è¯¥æŒ‚èµ·ä½†æ˜¯æ²¡æœ‰äº†åˆ¤æ–­ æ‰€ä»¥è¢«è™šå‡å”¤é†’äº† </li></ol></li><li><p>è§£å†³ æŠŠç­‰å¾…æ”¾åˆ°whileä¸­ è®©ä»–å¾ªç¯åˆ¤æ–­</p></li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*if (product >= 20) {     wait();}*/</span>ä¿®æ”¹ä¸º<span class="token operator">:</span><span class="token keyword">synchronized</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>product <span class="token operator">>=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        obj<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ---------------</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><blockquote><ul><li>å°†çº¿ç¨‹æ”¾å…¥æ± å­,æ–¹ä¾¿ä½¿ç”¨å’Œç®¡ç†,ä¹Ÿé¿å…äº†é”€æ¯é€ æˆçš„æµªè´¹</li><li>3.Javaçº¿ç¨‹æ± ï¼ˆå·¥å…·ï¼‰</li><li>çº¿ç¨‹æ± æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯æ ¸å¿ƒçº¿ç¨‹æ± ThreadPoolExecutorã€‚</li><li>ExecutorService:çº¿ç¨‹æ± æ¥å£</li><li>Executors(Runable æ¥å£):å·¥å…·ç±»,çº¿ç¨‹æ± å·¥å‚</li></ul></blockquote><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">//çº¿ç¨‹æ± ï¼šå†…å«äº†ä¸€äº›çº¿ç¨‹æ•°é‡ï¼Œä»¥åŠæ‹’ç»ç­–ç•¥ï¼Œé˜»å¡é˜Ÿåˆ—...å†…å®¹ã€‚</span>    <span class="token keyword">public</span> <span class="token function">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>       <span class="token comment" spellcheck="true">//æ ¸å¿ƒçº¿ç¨‹æ•°,å·¥ä½œçš„</span>                              <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//æœ€å¤§çº¿ç¨‹æ•°</span>                              <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æœ€å¤§æ´»è·ƒæ—¶é—´ï¼Œå¦‚æœè¶…è¿‡æœ€å¤§æ´»è·ƒæ—¶é—´ï¼Œä¸å·¥ä½œçš„çº¿ç¨‹è¢«å›æ”¶ï¼ˆä¼˜å…ˆå›æ”¶éæ ¸å¿ƒçº¿ç¨‹ï¼‰</span>                              TimeUnit unit<span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//æ—¶é—´å•ä½</span>                              BlockingQueue<span class="token operator">&lt;</span>Runnable<span class="token operator">></span> workQueue<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//é˜»å¡é˜Ÿåˆ—</span>                              ThreadFactory threadFactory<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//çº¿ç¨‹å·¥å‚ï¼Œåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</span>                              RejectedExecutionHandler handler<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//æ‹’ç»ç­–ç•¥</span>                              <span class="token punctuation">}</span></code></pre><blockquote><ol><li><p>å‡è®¾çº¿ç¨‹æ± ä¸­æœ‰20ä¸ªçº¿ç¨‹ï¼Œ10ä¸ªæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå½“æœ‰10ä¸ªä»»åŠ¡æ¥ä¸´ï¼Œä¼˜å…ˆä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ¥å·¥ä½œï¼Œå¦‚æœåˆæ¥1ä¸ªä»»åŠ¡:</p><ol><li>ç¬¬ä¸€ï¼Œåˆ›å»ºä¸€ä¸ªéæ ¸å¿ƒçº¿ç¨‹å·¥ä½œ</li><li>ç¬¬äºŒï¼Œè¿›å…¥é˜»å¡é˜Ÿåˆ—</li><li>é˜»å¡é˜Ÿåˆ—å…±æœ‰4ç§ï¼šS&gt;L&gt;A:<ol><li>SynchronousQueue:åŒæ­¥é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å·¥ä½œã€‚</li><li>LinkedBlockingQueue:é“¾è¡¨é˜»å¡é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—ï¼Œç›´æ¥æ’é˜Ÿï¼ŒæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œæ‰§è¡Œï¼Œå…ˆæ’é˜Ÿï¼Œå…ˆæ‰§è¡Œã€‚</li><li>ArrayBlockingQueue:æ•°ç»„é˜»å¡é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—ï¼Œç›´æ¥æ’é˜Ÿï¼ŒæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„è§„åˆ™è¿›è¡Œæ‰§è¡Œï¼Œå…ˆæ’é˜Ÿï¼Œå…ˆæ‰§è¡Œã€‚</li><li>DelayQueue:å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—ï¼Œå…ˆæ’é˜Ÿï¼Œä½†æ˜¯ä¸ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰åˆ°å»¶è¿Ÿæ—¶é—´åˆ°äº†ï¼Œå†æ‰§è¡Œã€‚</li></ol></li></ol></li><li><p>æ‹’ç»ç­–ç•¥ä¹Ÿæœ‰4ç§ï¼šå½“æœ‰ä»»åŠ¡æ¥ä¸´æ—¶ï¼Œå¦‚æœè¶…è¿‡äº†çº¿ç¨‹æ± çš„è§„å®šçº¿ç¨‹æ•°ï¼Œå¯ä»¥é€‰æ‹©ä»»åŠ¡æ‰§è¡Œçš„ç­–ç•¥ã€‚</p><ol><li>ç›´æ¥ä¸¢å¼ƒï¼ˆDiscardPolicyï¼‰</li><li>é˜Ÿåˆ—ä¸­æœ€è€çš„ä»»åŠ¡ï¼ˆDiscardOldestPolicyï¼‰</li><li>æŠ›å‡ºå¼‚å¸¸ï¼ˆAbortPolicyï¼‰ï¼Œé»˜è®¤ç­–ç•¥</li><li>å°†ä»»åŠ¡åˆ†é…è°ƒç”¨çº¿ç¨‹æ¥æ‰§è¡Œï¼ˆCallerRunsPolicyï¼‰</li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadPoolDemo</span> <span class="token punctuation">{</span></code></pre></li></ol><pre><code>   //å®šä¹‰æ ¸å¿ƒçº¿ç¨‹æ•°   private static final int MAX_CORE = 4;   //å®šä¹‰æœ€å¤§çº¿ç¨‹æ•°   private static final int MAX_THREAD_NUM = 10;   //å®šä¹‰æ´»è·ƒæ—¶é—´,å•ä½æ¯«ç§’   private static final long MAX_ACTIVE_TIME = 3000;   //å®šä¹‰é˜»å¡é˜Ÿåˆ—   private static LinkedBlockingQueue&lt;Runnable&gt; workQueue = new LinkedBlockingQueue&lt;&gt;();   //å®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå™¨   private static ThreadPoolExecutor threadPoolExecutor;   //é™æ€ä»£ç å—   static {       //å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹æ± æ‰§è¡Œå™¨       ThreadPoolExecutor executor = new ThreadPoolExecutor(MAX_CORE,               MAX_THREAD_NUM,               MAX_ACTIVE_TIME,               TimeUnit.MILLISECONDS,               workQueue               );       //å…è®¸æ ¸å¿ƒçº¿ç¨‹è¶…æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿåœ¨é”€æ¯ä¹‹å†…       executor.allowCoreThreadTimeOut(true);       //å°†åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹æ± æ‰§è¡Œå™¨èµ‹å€¼ç»™æˆå‘˜å˜é‡       threadPoolExecutor = executor;   }   public static void main(String[] args) {     /*threadPoolExecutor = new ThreadPoolExecutor(MAX_CORE,             MAX_THREAD_NUM,             MAX_ACTIVE_TIME,             TimeUnit.MILLISECONDS,             workQueue);*/     for(int i = 1;i &lt;= 20;i++){         Runnable r =  new Runnable(){             public void run(){                 try{                     Thread.sleep(1000);                 }catch (Exception e){                     e.printStackTrace();                 }                 for(int i = 1;i &lt;= 10;i++){                     System.out.println(&quot;i = &quot; + i);                 }             }         };         threadPoolExecutor.execute(r);     }   }</code></pre><p>   }</p><pre><code></code></pre></blockquote><pre class=" language-java"><code class="language-java">ExecutorService service <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ•°é‡</span>service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SJSThread</span><span class="token punctuation">)</span><span class="token punctuation">;</span>service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SJSThread</span><span class="token punctuation">)</span><span class="token punctuation">;</span>service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SJSThread</span><span class="token punctuation">)</span><span class="token punctuation">;</span>service<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç»“æŸçº¿ç¨‹è¿æ¥æ± </span></code></pre><h2 id="åŒæ­¥-å¼‚æ­¥"><a href="#åŒæ­¥-å¼‚æ­¥" class="headerlink" title="åŒæ­¥/å¼‚æ­¥"></a>åŒæ­¥/å¼‚æ­¥</h2><blockquote><ul><li><strong>å¼‚æ­¥: (éé˜»å¡)</strong><ol><li>å½“ç¨‹åºæ­£åœ¨æ‰§è¡Œä¸€ä¸ªè¾ƒé•¿æ—¶é—´çš„ç¨‹åº, ä¸ç­‰å¾…ä»–çš„è¿”å›,å°±æ˜¯å¼‚æ­¥</li><li>å¼‚æ­¥æ•ˆç‡é«˜.</li></ol></li><li><strong>åŒæ­¥:(é˜»å¡)</strong><ol><li>å½“ç¨‹åºä¸­å­˜åœ¨ç«äº‰èµ„æº,  æˆ–è€…æ­£åœ¨è¯»å–çš„æ•°æ®å¯èƒ½è¢«ä¿®æ”¹ å°±ä½¿ç”¨åŒæ­¥å­˜å–</li><li>å¦‚æœæœ‰å…¬å…±æ•°æ®å°±è¦ç”¨åŒæ­¥æ–¹æ³•</li><li>æ•°æ®åº“çš„æ’å®ƒé”</li></ol></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿ç¨‹çš„åŸºç¡€ </tag>
            
            <tag> çº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•çš„å·¥å‚æ¨¡å¼</title>
      <link href="/2020/05/23/%E7%AE%80%E5%8D%95%E7%9A%84%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/05/23/%E7%AE%80%E5%8D%95%E7%9A%84%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€å•çš„å·¥å‚æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼"><a href="#ç®€å•çš„å·¥å‚æ¨¡å¼-å¤§è¯è®¾è®¡æ¨¡å¼" class="headerlink" title="ç®€å•çš„å·¥å‚æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼"></a>ç®€å•çš„å·¥å‚æ¨¡å¼ - å¤§è¯è®¾è®¡æ¨¡å¼</h1><p><strong><em>æ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜,ä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚</em></strong></p><blockquote><p>å…ˆäº†è§£é¢å‘å¯¹è±¡è®¾è®¡</p></blockquote><blockquote><p>å½“ä½ éœ€è¦å®ä¾‹åŒ–å“ªä¸ªç±»,æˆ–è€…æœªæ¥ä¼šä¸ä¼šå¢åŠ å®ä¾‹åŒ–å¯¹è±¡,æ‰€ä»¥è€ƒè™‘ç”¨ä¸€ä¸ªå•ç‹¬çš„ç±»æ¥åšè¿™ä¸ªåˆ›é€ å®ä¾‹åŒ–çš„è¿‡ç¨‹â€“<kbd>å·¥å‚</kbd> </p></blockquote><blockquote><p>è€¦åˆåº¦é™ä½ æ¯ä¸ªå®ä¾‹æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ åšåˆ°äº†<strong>å®¹æ˜“ç»´æŠ¤,æ‰©å±•å’Œå¤ç”¨</strong></p></blockquote><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­:"></a>ä¾‹å­:</h2><p><img src="/images/SimpleFactory.png" alt="ç®€å•çš„å·¥å‚æ¨¡å¼"><br>1.POç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>sjs<span class="token punctuation">.</span>SimpleFactory<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>    <span class="token keyword">double</span> numberA<span class="token punctuation">;</span>    <span class="token keyword">double</span> numberB<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> numberA<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberA<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>numberA <span class="token operator">=</span> numberA<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> numberB<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberB<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>numberB <span class="token operator">=</span> numberB<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getReasult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">double</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>2.åŠ å‡ä¹˜é™¤ç±»(å°è£…ç±»ç»§æ‰¿åŸºç±»)</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>sjs<span class="token punctuation">.</span>SimpleFactory<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Add</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å†™getResultæ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getReasult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>numberA <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span>numberB<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å†™getResultæ–¹æ³•</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getReasult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>numberA <span class="token operator">-</span> <span class="token keyword">super</span><span class="token punctuation">.</span>numberB<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3.ç®€å•å·¥å‚ç±»</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>sjs<span class="token punctuation">.</span>SimpleFactory<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationFactory</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å½“ä½ è¾“å…¥è¡¨è¾¾å¼å·¥å‚è‡ªåŠ¨åŒ¹é…ç±»åˆ›å»ºå¯¹è±¡</span>    <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–å¯¹è±¡çš„é—®é¢˜äº¤ç»™å·¥å‚</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Operation <span class="token function">operation</span><span class="token punctuation">(</span>String operate<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// ç”¨ç¬¦å·è‡ªåŠ¨åŒ¹é…è¦åˆ›å»ºçš„å®ä¾‹</span>        Operation operation <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>operate<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">case</span> <span class="token string">"+"</span><span class="token operator">:</span>                <span class="token comment" spellcheck="true">// add</span>                operation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"-"</span><span class="token operator">:</span>                <span class="token comment" spellcheck="true">// sub</span>                operation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> operation<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4.ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>sjs<span class="token punctuation">.</span>SimpleFactory<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// ç®€å•å·¥å‚æ¨¡å¼()</span>        <span class="token comment" spellcheck="true">// ç”¨å·¥å‚ç±»è‡ªåŠ¨åˆ›å»ºå®ä¾‹</span>        Operation operation <span class="token operator">=</span> OperationFactory<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        operation<span class="token punctuation">.</span><span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        operation<span class="token punctuation">.</span><span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>operation<span class="token punctuation">.</span><span class="token function">getReasult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ²¡æœ‰ä»£ç†æ¨¡å¼</span><span class="token comment" spellcheck="true">//        Operation add = new Add();</span><span class="token comment" spellcheck="true">//        add.setNumberA(12);</span><span class="token comment" spellcheck="true">//        add.setNumberB(23);</span><span class="token comment" spellcheck="true">//        System.out.println(add.getReasult());</span><span class="token comment" spellcheck="true">//</span><span class="token comment" spellcheck="true">//        Operation sub = new Sub();</span><span class="token comment" spellcheck="true">//        sub.setNumberA(12);</span><span class="token comment" spellcheck="true">//        sub.setNumberB(23);</span><span class="token comment" spellcheck="true">//        System.out.println(sub.getReasult());</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¤§è¯è®¾è®¡æ¨¡å¼ </category>
          
          <category> æŠ„ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®€å•å·¥å‚æ¨¡å¼ </tag>
            
            <tag> GOF-23 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯æ—¥ä¸€é¢˜-76.æœ€å°è¦†ç›–å­ä¸²</title>
      <link href="/2020/05/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-76-%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2-1/"/>
      <url>/2020/05/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98-76-%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2-1/</url>
      
        <content type="html"><![CDATA[<h1 id="leetcodeæ¯æ—¥ä¸€é¢˜-76-æœ€å°è¦†ç›–å­ä¸²"><a href="#leetcodeæ¯æ—¥ä¸€é¢˜-76-æœ€å°è¦†ç›–å­ä¸²" class="headerlink" title="leetcodeæ¯æ—¥ä¸€é¢˜:76.æœ€å°è¦†ç›–å­ä¸²"></a>leetcodeæ¯æ—¥ä¸€é¢˜:76.æœ€å°è¦†ç›–å­ä¸²</h1><p><a href="https://leetcode-cn.com/problems/minimum-window-substring/" target="_blank" rel="noopener">76.æœ€å°è¦†ç›–å­ä¸²</a><br><br><img src="/images/76.png" alt="img"><br><br>ä»£ç å’Œæ³¨é‡Š:</p><pre class=" language-java"><code class="language-java"> <span class="token annotation punctuation">@Test</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mainTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">minWindow</span><span class="token punctuation">(</span><span class="token string">"ADOBECODEBANC"</span><span class="token punctuation">,</span> <span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// æ»‘åŠ¨çª—å£</span>    <span class="token keyword">public</span> String <span class="token function">minWindow</span><span class="token punctuation">(</span>String s<span class="token punctuation">,</span> String t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> t<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å·¦å³æŒ‡é’ˆ</span>        <span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å­˜å‚¨så’Œtå‡ºç°æ¬¡æ•°</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> snum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tnum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> tlen <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// tä¸²å­˜å…¥</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tlen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            tnum<span class="token punctuation">[</span>t<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> minLenth <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// å³æŒ‡é’ˆç§»åŠ¨</span>            <span class="token keyword">char</span> ch <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>            snum<span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å°†så‡ºç°çš„æ¬¡æ•°å­˜å…¥æ•°ç»„</span>            <span class="token comment" spellcheck="true">// å¦‚æœæ»¡è¶³ å½“å‰å­—ç¬¦æ˜¯tå­—ç¬¦é‡Œçš„ å¹¶ä¸”åœ¨å½“å‰èŒƒå›´åªå‡ºç°ä¸€æ¬¡</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>tnum<span class="token punctuation">[</span>ch<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> tnum<span class="token punctuation">[</span>ch<span class="token punctuation">]</span> <span class="token operator">>=</span> snum<span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                count<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// å½“é•¿åº¦æ»¡è¶³tæ—¶</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> tlen<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">char</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// ä»å·¦åˆ°å³ç§»åŠ¨left æŒ‡é’ˆç›´åˆ°counté•¿åº¦ä¸è¶³</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>tnum<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> tnum<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">>=</span> snum<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    count<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// æ‰¾åˆ°æœ€çŸ­é•¿åº¦ å°†åˆå§‹å’Œç»“å°¾å‚¨å­˜</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> minLenth<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    minLenth <span class="token operator">=</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    min <span class="token operator">=</span> left<span class="token punctuation">;</span>                    max <span class="token operator">=</span> right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                snum<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            right<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è®°å½•/è¸©å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataBase&amp;algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„hexoåšå®¢æ­å»ºé…ç½®æ›´æ”¹</title>
      <link href="/2020/05/22/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/"/>
      <url>/2020/05/22/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»0å¼€å§‹æ­å»ºhexoåšå®¢-win10"><a href="#ä»0å¼€å§‹æ­å»ºhexoåšå®¢-win10" class="headerlink" title="ä»0å¼€å§‹æ­å»ºhexoåšå®¢(win10)"></a>ä»0å¼€å§‹æ­å»ºhexoåšå®¢(win10)</h1><h2 id="åŸºæœ¬å®‰è£…"><a href="#åŸºæœ¬å®‰è£…" class="headerlink" title="åŸºæœ¬å®‰è£…"></a>åŸºæœ¬å®‰è£…</h2><blockquote><p>å®‰è£…node.js <a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.jså®˜ç½‘ä¸‹è½½åœ°å€</a></br><br>å®‰è£…git <a href="https://git-scm.com/downloads" target="_blank" rel="noopener">gitå®˜æ–¹ä¸‹è½½åœ°å€</a></br><br>åœ¨git/gitee æ–°å»ºåº“å¹¶ä¸”ä»¥ä½ çš„åå­—å‘½å git:<kbd>yourName.github.io</kbd> gitee:<kbd>yourName</kbd><br><br>å®‰è£…hexo<kbd>$ npm install -g hexo-cli</kbd> winä¼šæœ‰è­¦å‘Š å¿½ç•¥å°±å¥½</br><br>æ–°å»º: (<strong>æ‰¾åˆ°ä½ çš„æ–‡ä»¶å¤¹</strong>)æ‰§è¡Œ <kbd>hexo init</kbd>   <kbd>$ cd </kbd>   <kbd>$ npm install </kbd></br><br>é…ç½®:</p><blockquote><p>å¯ä»¥å‚è€ƒ <a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">è¿™é‡Œ</a> <br></p><pre><code>å»ºè®®é…ç½®:**url**: https://gitee.com/xxx/xxx.git ä½ çš„åšå®¢è®¿é—®åœ°å€**per_page**:æ”¹ä¸º6çš„å€æ•° 6,12,18 **# Site** æ­¤å¤„ æœ‰æ›´å¤šå…³äºé¦–é¡µé…ç½®**title**: åšå®¢åå­—</code></pre></blockquote></blockquote><p>hexoçš„ç›®å½•é…ç½®</p><pre class=" language-markdown"><code class="language-markdown">|-- demo//é¡¹ç›®è·Ÿç›®å½•å<span class="token code keyword">    |-- .gitignore//gitæ—¶å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•</span><span class="token code keyword">    |-- package-lock.json</span><span class="token code keyword">    |-- package.json//åº”ç”¨ç¨‹åºçš„ä¿¡æ¯</span><span class="token code keyword">    |-- _config.yml//ç½‘ç«™çš„é…ç½®ä¿¡æ¯</span><span class="token code keyword">    |-- scaffolds//æ¨¡æ¿æ–‡ä»¶å¤¹ï¼ŒHexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„markdownæ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚</span><span class="token code keyword">    |   |-- draft.md</span><span class="token code keyword">    |   |-- page.md</span><span class="token code keyword">    |   |-- post.md//åšæ–‡æ¨¡æ¿</span><span class="token code keyword">    |-- source//èµ„æºæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç”¨æˆ·èµ„æº</span><span class="token code keyword">    |   |-- _posts//åšæ–‡ç›®å½•</span><span class="token code keyword">    |       |-- hello-world.md//åšæ–‡</span><span class="token code keyword">    |-- themes//ä¸»é¢˜æ–‡ä»¶å¤¹ï¼ŒHexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢</span><span class="token code keyword">        |-- landscape.//é»˜è®¤ä¸»é¢˜</span></code></pre><h2 id="é…ç½®gitå’Œgiteeåº“"><a href="#é…ç½®gitå’Œgiteeåº“" class="headerlink" title="é…ç½®gitå’Œgiteeåº“"></a>é…ç½®gitå’Œgiteeåº“</h2><ol><li>é¦–å…ˆä½ è¦æœ‰è¿™ä¸¤ä¸ªä»“åº“</li><li>ä¿®æ”¹[^ _config.yml ] æ­¤æ–‡ä»¶çš„é…ç½®<pre><code>deploy:type: &#39;git&#39;repo:   github: https://github.com/xxxx/xxxx.github.io.git   gitee: https://gitee.com/xxxx/xxxx.gitbranch: master</code></pre></li><li>åœ¨æ‰§è¡Œ hexo d å°±èƒ½åœ¨ä½ çš„é“¾æ¥è®¿é—®å•¦</li><li><strong>æç¤º</strong>ï¼šgiteeè¦å¯åŠ¨ä¸€ä¸‹gitee Pages<kbd>è‡ªä½ çš„åº“-æœåŠ¡- gitee pages</kbd>æ¯æ¬¡æ›´æ–°åè¦é‡æ–°æ›´æ–°ä¸€ä¸‹gitee Pages<h2 id="åŸºæœ¬è¯­å¥"><a href="#åŸºæœ¬è¯­å¥" class="headerlink" title="åŸºæœ¬è¯­å¥"></a>åŸºæœ¬è¯­å¥</h2><ul><li>æ‰§è¡Œ <kbd>hexo server</kbd> == <kbd>hexo s</kbd> é»˜è®¤ä¸º <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a><br></li><li><ul><li><kbd>-p</kbd> é€‰é¡¹ï¼ŒæŒ‡å®šæœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ä¸º 4000</li></ul></li><li><ul><li><kbd>-i</kbd> é€‰é¡¹ï¼ŒæŒ‡å®šæœåŠ¡å™¨ IP åœ°å€ï¼Œé»˜è®¤ä¸º 0.0.0.0</li></ul></li><li><ul><li><kbd>-s</kbd> é€‰é¡¹ï¼Œé™æ€æ¨¡å¼ ï¼Œä»…æä¾› public æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å¹¶ç¦ç”¨æ–‡ä»¶ç›‘è§†</li></ul></li><li><kbd>hexo generate</kbd> å‘½ä»¤ç”¨äºç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¸€èˆ¬å¯ä»¥ç®€å†™ä¸º hexo g</li><li><kbd>hexo d</kbd> å‘å¸ƒåˆ° git/giteeåº“</li><li><strong>è¯´æ˜</strong> ï¼šéƒ¨ç½²å‰éœ€è¦ä¿®æ”¹ _config.yml é…ç½®æ–‡ä»¶ï¼Œä¸‹é¢ä»¥ git/gitee ä¸ºä¾‹è¿›è¡Œ</li><li><kbd>hexo clean</kbd> å‘½ä»¤ç”¨äºæ¸…ç†ç¼“å­˜æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å‘½ä»¤</li><li>æ ¹ç›®å½•å‘½ä»¤è¡Œè¾“å…¥hexo new &lt;æ¨¡æ¿&gt; &lt;æ–‡ç« å&gt; æ–°å»ºåšå®¢</li><li>æœ«ç­åœ¨scaffoldæ–‡ä»¶å¤¹ä¸‹</li></ul></li></ol><table><thead><tr><th>å‚æ•°</th><th>åŠŸèƒ½</th><th>è·¯å¾„</th></tr></thead><tbody><tr><td>post</td><td>æ–°å»ºæ–‡ç« </td><td>/source/_posts/</td></tr><tr><td>draft</td><td>æ–°å»ºè‰ç¨¿</td><td>/source/_drafts/</td></tr><tr><td>page</td><td>æ–°å»ºé¡µé¢ï¼ˆæ ‡ç­¾é¡µï¼Œåˆ†ç±»é¡µç­‰ï¼‰</td><td>/source/</td></tr></tbody></table><h2 id="ä¸»é¢˜å®‰è£…é…ç½®"><a href="#ä¸»é¢˜å®‰è£…é…ç½®" class="headerlink" title="ä¸»é¢˜å®‰è£…é…ç½®"></a>ä¸»é¢˜å®‰è£…é…ç½®</h2><p> æœ‰å¾ˆå¤šä¼˜ç§€å¥½çœ‹çš„ä¸»é¢˜ nextç­‰ ä¸æƒ³æŠ˜è…¾å°±ç”¨nextå§ ç”¨çš„å¤šæ’å‘çš„ä¹Ÿå¤š <br><br> æˆ‘çš„æ˜¯Matery æˆ‘çš„ä¸»é¡µä¸‹æ–¹æœ‰ä¸‹è½½åœ°å€[^ Theme Matery ] æˆ–è€…æˆ³<a href="https://github.com/blinkfox/hexo-theme-matery">è¿™é‡Œ</a><br><br> (ä¸‹è½½çš„ä¸»é¢˜æœ‰è¯´æ˜æ–‡æ¡£)ğŸ˜œ </p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><blockquote><p> å›¾ç‰‡è½®æ’­ä½ç½®: _config.yml/ myGallery:<br>æ–‡ç« å›¾ç‰‡: _config.yml/  featureImages</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> build </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
